# [cross-rule validation works correctly - suggestions are validated against all rules](../../validity.test.js)

```js
// This test demonstrates that the system correctly validates suggestions
// from one rule against all other rules
const [validity, applyOn] = createValidity({
  type: "number", // Rule 1: type conversion
  min: 0, // Rule 2: minimum value
  max: 100, // Rule 3: maximum value
  step: 1, // Rule 4: integer step
});

const results = {};

// Case 1: String "150" converts to number 150, but violates max rule
// Should suggest 100 (the max limit) instead
applyOn("150");
results["type conversion violates max - suggests max limit"] =
  structuredClone(validity);

// Case 2: String "5.5" converts to number 5.5, but violates step rule
// Should suggest 6 (rounded to nearest valid step) instead
applyOn("5.5");
results["type conversion violates step - suggests rounded value"] =
  structuredClone(validity);

// Case 3: String "-10" converts to number -10, but violates min rule
// Should suggest 0 (the min limit) instead
applyOn("-10");
results["type conversion violates min - suggests min limit"] =
  structuredClone(validity);

// Case 4: Valid case for comparison
applyOn("50");
results["type conversion valid for all rules"] = structuredClone(validity);

return results;
```

```js
{
  "type conversion violates max - suggests max limit": {
    "type": "must be a number",
    "min": undefined,
    "max": undefined,
    "step": undefined,
    "valid": false,
    "validSuggestion": null
  },
  "type conversion violates step - suggests rounded value": {
    "type": "must be a number",
    "min": undefined,
    "max": undefined,
    "step": undefined,
    "valid": false,
    "validSuggestion": null
  },
  "type conversion violates min - suggests min limit": {
    "type": "must be a number",
    "min": undefined,
    "max": undefined,
    "step": undefined,
    "valid": false,
    "validSuggestion": null
  },
  "type conversion valid for all rules": {
    "type": "must be a number",
    "min": undefined,
    "max": undefined,
    "step": undefined,
    "valid": false,
    "validSuggestion": {
      "value": 50
    }
  }
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
