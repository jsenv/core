# [0_basic](../../collect_test_files.test.mjs)

```js
const matchingFileResultArray = await collectFiles({
  directoryUrl: new URL("./fixtures/", import.meta.url),
  associations: {
    testPlan: {
      "./**/*.spec.js": { node: true },
      "./**/foo/": { node: null },
    },
  },
  predicate: ({ testPlan }) => testPlan,
});
const filesMatching = [];
const filesWithNodeMetaMatching = [];
for (const file of matchingFileResultArray) {
  filesMatching.push(file.relativeUrl);
  if (file.meta.testPlan.node) {
    filesWithNodeMetaMatching.push(file.relativeUrl);
  }
}
return { filesMatching, filesWithNodeMetaMatching };
```

```js
{
  "filesMatching": [
    "bar/bar.spec.js",
    "foo/foo.js",
    "foo/foo.spec.js"
  ],
  "filesWithNodeMetaMatching": [
    "bar/bar.spec.js"
  ]
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
