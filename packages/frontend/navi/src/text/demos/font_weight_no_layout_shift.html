<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Font Weight No Layout Shift Demo</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" jsenv-type="module/jsx">
      import { render } from "preact";
      import { useState } from "preact/hooks";
      import { Text, Link } from "@jsenv/navi";

      const Demo = () => {
        const [basicBoldActive, setBasicBoldActive] = useState(false);
        const [comparisonBoldActive, setComparisonBoldActive] = useState(false);
        const [lengthsBoldActive, setLengthsBoldActive] = useState(false);
        const [alignmentsBoldActive, setAlignmentsBoldActive] = useState(false);

        return (
          <div
            style={{
              padding: "20px",
              fontFamily: "system-ui, sans-serif",
            }}
          >
            <h1>Font Weight - No Layout Shift Demo</h1>
            <p>
              The <code>boldTransition</code> prop on Text components prevents
              layout shifts when transitioning to bold by using an invisible
              bold clone to reserve space. As a bonus, it enables smooth bold
              transitions. Only works with <code>noWrap</code> text.
            </p>

            {/* Table of Contents */}
            <section
              style={{
                marginBottom: "30px",
                padding: "15px",
                backgroundColor: "#f8f9fa",
                borderRadius: "6px",
                border: "1px solid #e9ecef",
              }}
            >
              <h2 style={{ margin: "0 0 15px 0", fontSize: "1.2rem" }}>
                üìã Table of Contents
              </h2>
              <nav>
                <ol
                  style={{
                    margin: 0,
                    paddingLeft: "20px",
                    lineHeight: "1.6",
                  }}
                >
                  <li>
                    <Link href="#layout-shift-problem" textColor="#007bff">
                      Layout Shift Problem
                    </Link>
                  </li>
                  <li>
                    <Link href="#basic-usage" textColor="#007bff">
                      Basic boldTransition Usage
                    </Link>
                  </li>
                  <li>
                    <Link href="#different-lengths" textColor="#007bff">
                      Different Text Lengths
                    </Link>
                  </li>
                  <li>
                    <Link href="#text-alignments" textColor="#007bff">
                      Different Text Alignments
                    </Link>
                  </li>
                </ol>
              </nav>
            </section>

            {/* Layout Shift Problem */}
            <section id="layout-shift-problem" style={{ marginBottom: "30px" }}>
              <h2>‚ö†Ô∏è The Layout Shift Problem</h2>
              <p>
                When text changes from normal to bold weight, it becomes wider,
                causing surrounding elements to shift. The{" "}
                <code>preventBoldLayoutShift</code> prop solves this by
                reserving space for the bold version upfront.
              </p>

              <div style={{ marginBottom: "20px" }}>
                <label style={{ display: "block", marginBottom: "10px" }}>
                  <input
                    type="checkbox"
                    checked={comparisonBoldActive}
                    onChange={(e) => setComparisonBoldActive(e.target.checked)}
                    style={{ marginRight: "8px" }}
                  />
                  Toggle bold to see the difference
                </label>

                <div style={{ display: "flex", gap: "20px" }}>
                  <div style={{ flex: 1 }}>
                    <h3
                      style={{
                        margin: "0 0 10px 0",
                        fontSize: "14px",
                        color: "#dc3545",
                      }}
                    >
                      ‚ùå Normal behavior (layout shift)
                    </h3>
                    <div
                      style={{
                        border: "2px solid #f5c2c7",
                        padding: "16px",
                        backgroundColor: "#f8d7da",
                        borderRadius: "6px",
                      }}
                    >
                      <span
                        style={{
                          whiteSpace: "nowrap",
                          fontWeight: comparisonBoldActive ? "bold" : "normal",
                          transition: "font-weight 0.3s ease",
                        }}
                      >
                        Text that shifts layout when bold
                      </span>
                      <Text width="16px" height="16px" background="red"></Text>
                    </div>
                  </div>

                  <div style={{ flex: 1 }}>
                    <h3
                      style={{
                        margin: "0 0 10px 0",
                        fontSize: "14px",
                        color: "#198754",
                      }}
                    >
                      ‚úÖ With preventBoldLayoutShift (stable)
                    </h3>
                    <div
                      style={{
                        border: "2px solid #badbcc",
                        padding: "16px",
                        backgroundColor: "#d1e7dd",
                        borderRadius: "6px",
                      }}
                    >
                      <Text
                        preventBoldLayoutShift
                        noWrap
                        bold={comparisonBoldActive}
                      >
                        Text that shifts layout when bold
                      </Text>
                      <Text
                        width="16px"
                        height="16px"
                        background="green"
                      ></Text>
                    </div>
                  </div>
                </div>
              </div>

              <div
                style={{
                  padding: "15px",
                  backgroundColor: "#e7f3ff",
                  border: "1px solid #b3d9ff",
                  borderRadius: "6px",
                  marginBottom: "20px",
                }}
              >
                <p style={{ margin: "0 0 10px 0", fontWeight: "600" }}>
                  üí° Pro tip:
                </p>
                <p style={{ margin: "0" }}>
                  The <code>boldTransition</code> prop automatically enables
                  <code>preventBoldLayoutShift</code> and adds smooth
                  transitions. Use <code>preventBoldLayoutShift</code> alone
                  when you only want to prevent layout shifts without
                  transitions.
                </p>
              </div>

              <p
                style={{ fontSize: "14px", color: "#666", fontStyle: "italic" }}
              >
                <strong>Notice:</strong> The red indicator will shift when the
                left example toggles bold, while the green indicator stays
                stable with preventBoldLayoutShift. Watch how the colored
                squares move!
              </p>
            </section>

            {/* Basic Usage */}
            <section id="basic-usage" style={{ marginBottom: "30px" }}>
              <h2>üéØ Basic boldTransition Usage</h2>
              <p>
                For the best experience, use <code>boldTransition</code> which
                combines <code>preventBoldLayoutShift</code> with smooth
                animations. Perfect for interactive elements like buttons and
                links.
              </p>

              <div style={{ marginBottom: "20px" }}>
                <label style={{ display: "block", marginBottom: "10px" }}>
                  <input
                    type="checkbox"
                    checked={basicBoldActive}
                    onChange={(e) => setBasicBoldActive(e.target.checked)}
                    style={{ marginRight: "8px" }}
                  />
                  Make text bold
                </label>

                <div
                  style={{
                    border: "2px solid #e9ecef",
                    padding: "16px",
                    backgroundColor: "#f8f9fa",
                    borderRadius: "6px",
                  }}
                >
                  <Text boldTransition noWrap bold={basicBoldActive}>
                    This text transitions smoothly to bold
                  </Text>
                  <Text width="16px" height="16px" background="violet"></Text>
                </div>
              </div>

              <pre
                style={{
                  background: "#f7f7f7",
                  padding: "10px",
                  borderRadius: "4px",
                  fontSize: "12px",
                  overflowX: "auto",
                }}
              >
                {`<Text 
  noWrap
  bold={basicBoldActive}
  boldTransition
>
  This text transitions smoothly to bold
</Text>`}
              </pre>
            </section>

            {/* Different Lengths */}
            <section id="different-lengths" style={{ marginBottom: "30px" }}>
              <h2>üìè Different Text Lengths</h2>
              <p>
                Testing <code>boldTransition</code> behavior with various text
                lengths to ensure it works consistently.
              </p>

              <div style={{ marginBottom: "20px" }}>
                <label style={{ display: "block", marginBottom: "10px" }}>
                  <input
                    type="checkbox"
                    checked={lengthsBoldActive}
                    onChange={(e) => setLengthsBoldActive(e.target.checked)}
                    style={{ marginRight: "8px" }}
                  />
                  Make all texts bold
                </label>

                <div
                  style={{
                    display: "flex",
                    flexDirection: "column",
                    gap: "15px",
                  }}
                >
                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Short text
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                      }}
                    >
                      <Text boldTransition noWrap bold={lengthsBoldActive}>
                        Short
                      </Text>
                      <Text
                        width="16px"
                        height="16px"
                        background="violet"
                      ></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Medium text
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                      }}
                    >
                      <Text boldTransition noWrap bold={lengthsBoldActive}>
                        A medium length text for testing
                      </Text>
                      <Text
                        width="16px"
                        height="16px"
                        background="orange"
                      ></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Long text
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                      }}
                    >
                      <Text boldTransition noWrap bold={lengthsBoldActive}>
                        This is a much longer text that tests the boldTransition
                        behavior with extended content
                      </Text>
                      <Text width="16px" height="16px" background="blue"></Text>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            {/* Text Alignments */}
            <section id="text-alignments" style={{ marginBottom: "30px" }}>
              <h2>üéØ Different Text Alignments</h2>
              <p>
                Testing how <code>boldTransition</code> works with different
                text alignments. The technique includes automatic centering for
                smooth transitions.
              </p>

              <div style={{ marginBottom: "20px" }}>
                <label style={{ display: "block", marginBottom: "10px" }}>
                  <input
                    type="checkbox"
                    checked={alignmentsBoldActive}
                    onChange={(e) => setAlignmentsBoldActive(e.target.checked)}
                    style={{ marginRight: "8px" }}
                  />
                  Toggle bold on all alignments
                </label>

                <div
                  style={{
                    display: "flex",
                    flexDirection: "column",
                    gap: "15px",
                  }}
                >
                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Left aligned
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                        textAlign: "left",
                      }}
                    >
                      <Text boldTransition noWrap bold={alignmentsBoldActive}>
                        Left aligned text
                      </Text>
                      <Text width="16px" height="16px" background="cyan"></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Center aligned
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                        textAlign: "center",
                      }}
                    >
                      <Text width="16px" height="16px" background="cyan"></Text>
                      <Text
                        boldTransition
                        noWrap
                        alignX="center"
                        style={{
                          fontWeight: alignmentsBoldActive ? "bold" : "normal",
                          transition: "font-weight 0.3s ease",
                        }}
                      >
                        Center aligned text
                      </Text>
                      <Text width="16px" height="16px" background="cyan"></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Right aligned
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                        textAlign: "right",
                      }}
                    >
                      <Text width="16px" height="16px" background="cyan"></Text>
                      <Text
                        boldTransition
                        noWrap
                        alignX="end"
                        bold={alignmentsBoldActive}
                      >
                        Right aligned text
                      </Text>
                    </div>
                  </div>
                </div>
              </div>

              <p
                style={{ fontSize: "14px", color: "#666", fontStyle: "italic" }}
              >
                <strong>Note:</strong> The boldTransition technique
                automatically centers the text overlay to give the impression
                that the bold effect applies from the center, regardless of
                container alignment.
              </p>
            </section>

            {/* Technical Details */}
            <section style={{ marginBottom: "30px" }}>
              <h2>‚öôÔ∏è How it Works</h2>
              <div
                style={{
                  padding: "20px",
                  backgroundColor: "#f8f9fa",
                  border: "1px solid #e9ecef",
                  borderRadius: "6px",
                }}
              >
                <p style={{ margin: "0 0 15px 0" }}>
                  The technique uses a clever CSS approach:
                </p>
                <ol style={{ margin: "0 0 15px 20px", lineHeight: "1.6" }}>
                  <li>
                    <strong>reserveBoldSpace</strong>: Creates an invisible bold
                    clone that reserves the space needed for bold text
                  </li>
                  <li>
                    <strong>boldTransition</strong>: Automatically enables
                    reserveBoldSpace and adds smooth transitions between normal
                    and bold states
                  </li>
                  <li>
                    Centers the overlay to make bold appear to apply from the
                    center
                  </li>
                  <li>
                    Only works with <code>noWrap</code> since multi-line would
                    have different wrapping
                  </li>
                </ol>
                <p style={{ margin: "0", fontSize: "14px", color: "#666" }}>
                  This prevents layout shifts by ensuring the container always
                  has the width of the bold version, while smoothly
                  transitioning the visible text.
                </p>
              </div>
            </section>
          </div>
        );
      };

      render(<Demo />, document.getElementById("app"));
    </script>
  </body>
</html>
