<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Font Weight No Layout Shift Demo</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" jsenv-type="module/jsx">
      import { render } from "preact";
      import { useState } from "preact/hooks";
      import { Text, Link, Paragraph } from "@jsenv/navi";

      // Reusable Components
      const SectionSeparator = () => (
        <div
          style={{
            height: "1px",
            background:
              "linear-gradient(90deg, transparent, #e0e0e0 25%, #e0e0e0 75%, transparent)",
            margin: "40px 0",
            position: "relative",
          }}
        >
          <div
            style={{
              position: "absolute",
              left: "50%",
              top: "-8px",
              transform: "translateX(-50%)",
              background: "white",
              padding: "0 15px",
              fontSize: "18px",
              color: "#999",
            }}
          >
            ‚Ä¢ ‚Ä¢ ‚Ä¢
          </div>
        </div>
      );

      const DemoSection = ({ id, title, children, style = {} }) => (
        <>
          <SectionSeparator />
          <section
            id={id}
            style={{
              marginBottom: "30px",
              padding: "25px",
              border: "1px solid #e9ecef",
              borderRadius: "8px",
              backgroundColor: "#fafbfc",
              boxShadow: "0 2px 4px rgba(0,0,0,0.05)",
              ...style,
            }}
          >
            <h2
              style={{
                margin: "0 0 20px 0",
                paddingBottom: "15px",
                borderBottom: "2px solid #e9ecef",
                color: "#495057",
              }}
            >
              {title}
            </h2>
            {children}
          </section>
        </>
      );

      const BoldToggle = ({ checked, onChange, label }) => (
        <label style={{ display: "block", marginBottom: "10px" }}>
          <input
            type="checkbox"
            checked={checked}
            onChange={onChange}
            style={{ marginRight: "8px" }}
          />
          {label}
        </label>
      );

      // Demo Section Components
      const LayoutShiftProblemSection = ({
        comparisonBoldActive,
        setComparisonBoldActive,
      }) => (
        <DemoSection
          id="layout-shift-problem"
          title="‚ö†Ô∏è The Layout Shift Problem"
        >
          <p>
            When text changes from normal to bold weight, it becomes wider,
            causing surrounding elements to shift. The{" "}
            <code>preventBoldLayoutShift</code> prop solves this by reserving
            space for the bold version upfront.
          </p>

          <div style={{ marginBottom: "20px" }}>
            <label style={{ display: "block", marginBottom: "10px" }}>
              <input
                type="checkbox"
                checked={comparisonBoldActive}
                onChange={(e) => setComparisonBoldActive(e.target.checked)}
                style={{ marginRight: "8px" }}
              />
              Toggle bold to see the difference
            </label>

            <div style={{ display: "flex", gap: "20px" }}>
              <div style={{ flex: 1 }}>
                <h3
                  style={{
                    margin: "0 0 10px 0",
                    fontSize: "14px",
                    color: "#dc3545",
                  }}
                >
                  ‚ùå Without preventBoldLayoutShift (layout shift)
                </h3>
                <div
                  style={{
                    border: "2px solid #f5c2c7",
                    padding: "16px",
                    backgroundColor: "#f8d7da",
                    borderRadius: "6px",
                  }}
                >
                  <span
                    style={{
                      whiteSpace: "nowrap",
                      fontWeight: comparisonBoldActive ? "bold" : "normal",
                      transition: "font-weight 0.3s ease",
                    }}
                  >
                    Text that shifts layout when bold
                  </span>
                  <Text width="16px" height="16px" background="red"></Text>
                </div>
              </div>

              <div style={{ flex: 1 }}>
                <h3
                  style={{
                    margin: "0 0 10px 0",
                    fontSize: "14px",
                    color: "#198754",
                  }}
                >
                  ‚úÖ With preventBoldLayoutShift (stable)
                </h3>
                <div
                  style={{
                    border: "2px solid #badbcc",
                    padding: "16px",
                    backgroundColor: "#d1e7dd",
                    borderRadius: "6px",
                  }}
                >
                  <Text
                    preventBoldLayoutShift
                    noWrap
                    bold={comparisonBoldActive}
                  >
                    Text that shifts layout when bold
                  </Text>
                  <Text width="16px" height="16px" background="green"></Text>
                </div>
              </div>
            </div>
          </div>

          <p style={{ fontSize: "14px", color: "#666", fontStyle: "italic" }}>
            <strong>Notice:</strong> The red indicator will shift when the left
            example toggles bold, while the green indicator stays stable with
            preventBoldLayoutShift. Watch how the colored squares move!
          </p>

          <div
            style={{
              padding: "15px",
              backgroundColor: "#e7f3ff",
              border: "1px solid #b6d7ff",
              borderRadius: "6px",
              marginTop: "20px",
            }}
          >
            <Text style={{ margin: "0" }}>
              The <code>boldTransition</code> prop automatically enables
              <code>preventBoldLayoutShift</code> and adds smooth transitions.
              Use <code>preventBoldLayoutShift</code> alone when you only want
              to prevent layout shifts without transitions.
            </Text>
          </div>
        </DemoSection>
      );

      const Demo = () => {
        const [basicBoldActive, setBasicBoldActive] = useState(false);
        const [comparisonBoldActive, setComparisonBoldActive] = useState(false);
        const [lengthsBoldActive, setLengthsBoldActive] = useState(false);
        const [alignmentsBoldActive, setAlignmentsBoldActive] = useState(false);
        const [stableBoldActive, setStableBoldActive] = useState(false);

        return (
          <div
            style={{
              padding: "20px",
              fontFamily: "system-ui, sans-serif",
              maxWidth: "1200px",
              margin: "0 auto",
              backgroundColor: "#ffffff",
            }}
          >
            {/* Header Section */}
            <div
              style={{
                textAlign: "center",
                padding: "40px 20px",
                background: "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                borderRadius: "12px",
                color: "white",
                marginBottom: "20px",
              }}
            >
              <h1 style={{ margin: "0 0 15px 0", fontSize: "2.5rem" }}>
                Font Weight - No Layout Shift Demo
              </h1>
              <p style={{ margin: "0", fontSize: "1.1rem", opacity: "0.9" }}>
                The{" "}
                <code
                  style={{
                    background: "rgba(255,255,255,0.2)",
                    padding: "2px 6px",
                    borderRadius: "4px",
                  }}
                >
                  boldTransition
                </code>{" "}
                prop on Text components prevents layout shifts when
                transitioning to bold by using an invisible bold clone to
                reserve space. As a bonus, it enables smooth bold transitions.
                Only works with{" "}
                <code
                  style={{
                    background: "rgba(255,255,255,0.2)",
                    padding: "2px 6px",
                    borderRadius: "4px",
                  }}
                >
                  noWrap
                </code>{" "}
                text.
              </p>
            </div>

            {/* Table of Contents */}
            <section
              style={{
                marginBottom: "30px",
                padding: "15px",
                backgroundColor: "#f8f9fa",
                borderRadius: "6px",
                border: "1px solid #e9ecef",
              }}
            >
              <h2 style={{ margin: "0 0 15px 0", fontSize: "1.2rem" }}>
                üìã Table of Contents
              </h2>
              <nav>
                <ol
                  style={{
                    margin: 0,
                    paddingLeft: "20px",
                    lineHeight: "1.6",
                  }}
                >
                  <li>
                    <Link href="#layout-shift-problem" textColor="#007bff">
                      Layout Shift Problem
                    </Link>
                  </li>
                  <li>
                    <Link href="#basic-usage" textColor="#007bff">
                      Basic boldTransition Usage
                    </Link>
                  </li>
                  <li>
                    <Link href="#different-lengths" textColor="#007bff">
                      Different Text Lengths
                    </Link>
                  </li>
                  <li>
                    <Link href="#text-alignments" textColor="#007bff">
                      Different Text Alignments
                    </Link>
                  </li>
                </ol>
              </nav>
            </section>

            <DemoSection
              id="layout-shift-problem"
              title="‚ö†Ô∏è The Layout Shift Problem"
            >
              <p>
                When text changes from normal to bold weight, it becomes wider,
                causing surrounding elements to shift. The{" "}
                <code>preventBoldLayoutShift</code> prop solves this by
                reserving space for the bold version upfront.
              </p>

              <div style={{ marginBottom: "20px" }}>
                <label style={{ display: "block", marginBottom: "10px" }}>
                  <input
                    type="checkbox"
                    checked={comparisonBoldActive}
                    onChange={(e) => setComparisonBoldActive(e.target.checked)}
                    style={{ marginRight: "8px" }}
                  />
                  Toggle bold to see the difference
                </label>

                <div style={{ display: "flex", gap: "20px" }}>
                  <div style={{ flex: 1 }}>
                    <h3
                      style={{
                        margin: "0 0 10px 0",
                        fontSize: "14px",
                        color: "#dc3545",
                      }}
                    >
                      ‚ùå Normal behavior (layout shift)
                    </h3>
                    <div
                      style={{
                        border: "2px solid #f5c2c7",
                        padding: "16px",
                        backgroundColor: "#f8d7da",
                        borderRadius: "6px",
                      }}
                    >
                      <span
                        style={{
                          whiteSpace: "nowrap",
                          fontWeight: comparisonBoldActive ? "bold" : "normal",
                          //  transition: "font-weight 0.3s ease",
                        }}
                      >
                        Text that shifts layout when bold
                      </span>
                      <Text width="16px" height="16px" background="red"></Text>
                    </div>
                  </div>

                  <div style={{ flex: 1 }}>
                    <h3
                      style={{
                        margin: "0 0 10px 0",
                        fontSize: "14px",
                        color: "#198754",
                      }}
                    >
                      ‚úÖ With preventBoldLayoutShift (stable)
                    </h3>
                    <div
                      style={{
                        border: "2px solid #badbcc",
                        padding: "16px",
                        backgroundColor: "#d1e7dd",
                        borderRadius: "6px",
                      }}
                    >
                      <Text
                        preventBoldLayoutShift
                        noWrap
                        bold={comparisonBoldActive}
                      >
                        Text that shifts layout when bold
                      </Text>
                      <Text
                        width="16px"
                        height="16px"
                        background="green"
                      ></Text>
                    </div>
                  </div>
                </div>
              </div>

              <p
                style={{ fontSize: "14px", color: "#666", fontStyle: "italic" }}
              >
                <strong>Notice:</strong> The red indicator will shift when the
                left example toggles bold, while the green indicator stays
                stable with preventBoldLayoutShift. Watch how the colored
                squares move!
              </p>

              <div
                style={{
                  padding: "15px",
                  backgroundColor: "#e7f3ff",
                  border: "1px solid #b3d9ff",
                  borderRadius: "6px",
                  marginBottom: "20px",
                }}
              >
                <p style={{ margin: "0 0 10px 0", fontWeight: "600" }}>
                  üí° Pro tip:
                </p>
                <Text style={{ margin: "0" }}>
                  The <code>boldTransition</code> prop automatically enables
                  <code>preventBoldLayoutShift</code> and adds smooth
                  transitions. Use <code>preventBoldLayoutShift</code> alone
                  when you only want to prevent layout shifts without
                  transitions.
                </Text>
              </div>
            </DemoSection>

            <DemoSection id="basic-usage" title="üéØ Basic boldTransition Usage">
              <p>
                For the best experience, use <code>boldTransition</code> which
                combines <code>preventBoldLayoutShift</code> with smooth
                animations. Perfect for interactive elements like buttons and
                links.
              </p>

              <div style={{ marginBottom: "20px" }}>
                <label style={{ display: "block", marginBottom: "10px" }}>
                  <input
                    type="checkbox"
                    checked={basicBoldActive}
                    onChange={(e) => setBasicBoldActive(e.target.checked)}
                    style={{ marginRight: "8px" }}
                  />
                  Make text bold
                </label>

                <div
                  style={{
                    border: "2px solid #e9ecef",
                    padding: "16px",
                    backgroundColor: "#f8f9fa",
                    borderRadius: "6px",
                  }}
                >
                  <Text boldTransition noWrap bold={basicBoldActive}>
                    This text transitions smoothly to bold
                  </Text>
                  <Text width="16px" height="16px" background="violet"></Text>
                </div>
              </div>

              <pre
                style={{
                  background: "#f7f7f7",
                  padding: "10px",
                  borderRadius: "4px",
                  fontSize: "12px",
                  overflowX: "auto",
                }}
              >
                {`<Text
        noWrap
        bold={basicBoldActive}
        boldTransition
      >
        This text transitions smoothly to bold
      </Text>`}
              </pre>
            </DemoSection>

            <DemoSection
              id="different-lengths"
              title="üìè Different Text Lengths"
            >
              <p>
                Testing <code>boldTransition</code> behavior with various text
                lengths to ensure it works consistently.
              </p>

              <div style={{ marginBottom: "20px" }}>
                <label style={{ display: "block", marginBottom: "10px" }}>
                  <input
                    type="checkbox"
                    checked={lengthsBoldActive}
                    onChange={(e) => setLengthsBoldActive(e.target.checked)}
                    style={{ marginRight: "8px" }}
                  />
                  Make all texts bold
                </label>

                <div
                  style={{
                    display: "flex",
                    flexDirection: "column",
                    gap: "15px",
                  }}
                >
                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Short text
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                      }}
                    >
                      <Text boldTransition noWrap bold={lengthsBoldActive}>
                        Short
                      </Text>
                      <Text
                        width="16px"
                        height="16px"
                        background="violet"
                      ></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Medium text
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                      }}
                    >
                      <Text boldTransition noWrap bold={lengthsBoldActive}>
                        A medium length text for testing
                      </Text>
                      <Text
                        width="16px"
                        height="16px"
                        background="orange"
                      ></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Long text
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                      }}
                    >
                      <Text boldTransition noWrap bold={lengthsBoldActive}>
                        This is a much longer text that tests the boldTransition
                        behavior with extended content
                      </Text>
                      <Text width="16px" height="16px" background="blue"></Text>
                    </div>
                  </div>
                </div>
              </div>
            </DemoSection>

            {/* Text Alignments */}
            <DemoSection id="text-alignments" style={{ marginBottom: "30px" }}>
              <h2>üéØ Different Text Alignments</h2>
              <p>
                Testing how <code>boldTransition</code> works with different
                text alignments. The technique includes automatic centering for
                smooth transitions.
              </p>

              <div style={{ marginBottom: "20px" }}>
                <label style={{ display: "block", marginBottom: "10px" }}>
                  <input
                    type="checkbox"
                    checked={alignmentsBoldActive}
                    onChange={(e) => setAlignmentsBoldActive(e.target.checked)}
                    style={{ marginRight: "8px" }}
                  />
                  Toggle bold on all alignments
                </label>

                <div
                  style={{
                    display: "flex",
                    flexDirection: "column",
                    gap: "15px",
                  }}
                >
                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Left aligned
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                        textAlign: "left",
                      }}
                    >
                      <Text boldTransition noWrap bold={alignmentsBoldActive}>
                        Left aligned text
                      </Text>
                      <Text width="16px" height="16px" background="cyan"></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Center aligned
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                        textAlign: "center",
                      }}
                    >
                      <Text width="16px" height="16px" background="cyan"></Text>
                      <Text
                        noWrap
                        alignX="center"
                        bold={alignmentsBoldActive}
                        boldTransition
                      >
                        Center aligned text
                      </Text>
                      <Text width="16px" height="16px" background="cyan"></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Right aligned
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                        textAlign: "right",
                      }}
                    >
                      <Text width="16px" height="16px" background="cyan"></Text>
                      <Text
                        boldTransition
                        noWrap
                        alignX="end"
                        bold={alignmentsBoldActive}
                      >
                        Right aligned text
                      </Text>
                    </div>
                  </div>
                </div>
              </div>

              <p
                style={{ fontSize: "14px", color: "#666", fontStyle: "italic" }}
              >
                <strong>Note:</strong> The boldTransition technique
                automatically centers the text overlay to give the impression
                that the bold effect applies from the center, regardless of
                container alignment.
              </p>
            </DemoSection>

            <DemoSection id="how-it-works" title="‚öôÔ∏è How it Works">
              <div
                style={{
                  padding: "20px",
                  backgroundColor: "#f8f9fa",
                  border: "1px solid #e9ecef",
                  borderRadius: "6px",
                }}
              >
                <p style={{ margin: "0 0 15px 0" }}>
                  The technique uses a CSS approach:
                </p>
                <ol style={{ margin: "0 0 15px 20px", lineHeight: "1.6" }}>
                  <li>
                    <strong>reserveBoldSpace</strong>: Creates an invisible bold
                    clone that reserves the space needed for bold text
                  </li>
                  <li>
                    <strong>boldTransition</strong>: Automatically enables
                    reserveBoldSpace and adds smooth transitions between normal
                    and bold states
                  </li>
                  <li>
                    Centers the overlay to make bold appear to apply from the
                    center
                  </li>
                  <li>
                    Only works with <code>noWrap</code> since multi-line would
                    have different wrapping
                  </li>
                </ol>
                <p style={{ margin: "0", fontSize: "14px", color: "#666" }}>
                  This prevents layout shifts by ensuring the container always
                  has the width of the bold version, while smoothly
                  transitioning the visible text.
                </p>
              </div>
            </DemoSection>

            <DemoSection
              id="boldstable-alternative"
              title="üîí boldStable Alternative"
            >
              <p>
                The <code>boldStable</code> technique uses a different approach
                to prevent layout shifts. Unlike <code>boldTransition</code>
                which reserves space for bold text, <code>boldStable</code>
                maintains consistent text width regardless of font-weight.
              </p>

              <BoldToggle
                checked={stableBoldActive}
                onChange={(e) => setStableBoldActive(e.target.checked)}
                label="Toggle bold on all boldStable examples"
              />

              {/* Long Text Example */}
              <div style={{ marginBottom: "20px" }}>
                <h3 style={{ fontSize: "16px", marginBottom: "10px" }}>
                  üìù Long Text Stability
                </h3>
                <p
                  style={{
                    fontSize: "14px",
                    color: "#666",
                    marginBottom: "15px",
                  }}
                >
                  Perfect for paragraphs and multi-line content where consistent
                  width is crucial:
                </p>
                <div
                  style={{
                    border: "2px solid #fd7e14",
                    padding: "16px",
                    backgroundColor: "#fff3cd",
                    borderRadius: "6px",
                  }}
                >
                  <Text boldStable bold={stableBoldActive}>
                    This is a much longer sentence that demonstrates how
                    boldStable can be used with extended text content without
                    causing any layout shifts or width changes, making it
                    particularly useful for paragraphs, long labels, or any text
                    that might wrap across multiple lines while maintaining
                    perfect layout stability.
                  </Text>
                  <Text width="20px" height="20px" background="orange"></Text>
                </div>
              </div>

              {/* Alignment Tests */}
              <div>
                <h3 style={{ fontSize: "16px", marginBottom: "10px" }}>
                  üéØ Alignment Tests
                </h3>
                <p
                  style={{
                    fontSize: "14px",
                    color: "#666",
                    marginBottom: "15px",
                  }}
                >
                  Testing boldStable with different text alignments:
                </p>
                <div
                  style={{
                    display: "flex",
                    flexDirection: "column",
                    gap: "15px",
                  }}
                >
                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Left aligned
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                        textAlign: "left",
                      }}
                    >
                      <Text boldStable noWrap bold={stableBoldActive}>
                        Left aligned text
                      </Text>
                      <Text
                        width="16px"
                        height="16px"
                        background="orange"
                      ></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Center aligned
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                        textAlign: "center",
                      }}
                    >
                      <Text
                        width="16px"
                        height="16px"
                        background="orange"
                      ></Text>
                      <Text
                        boldStable
                        noWrap
                        alignX="center"
                        bold={stableBoldActive}
                        boldTransition
                      >
                        Center aligned text
                      </Text>
                      <Text
                        width="16px"
                        height="16px"
                        background="orange"
                      ></Text>
                    </div>
                  </div>

                  <div>
                    <h4
                      style={{
                        margin: "0 0 8px 0",
                        fontSize: "12px",
                        color: "#666",
                      }}
                    >
                      Right aligned
                    </h4>
                    <div
                      style={{
                        border: "1px solid #dee2e6",
                        padding: "12px",
                        backgroundColor: "#ffffff",
                        borderRadius: "4px",
                        textAlign: "right",
                      }}
                    >
                      <Text
                        width="16px"
                        height="16px"
                        background="orange"
                      ></Text>
                      <Text
                        boldStable
                        noWrap
                        alignX="end"
                        bold={stableBoldActive}
                      >
                        Right aligned text
                      </Text>
                    </div>
                  </div>
                </div>
              </div>

              <p
                style={{
                  fontSize: "14px",
                  color: "#666",
                  fontStyle: "italic",
                  marginTop: "20px",
                }}
              >
                <strong>Key Difference:</strong> While{" "}
                <code>boldTransition</code> reserves space for bold text,{" "}
                <code>boldStable</code> maintains consistent visual width making
                it ideal for longer content and multi-line text.
              </p>
            </DemoSection>
          </div>
        );
      };

      render(<Demo />, document.getElementById("app"));
    </script>
  </body>
</html>
