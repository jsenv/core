<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Smooth-bold — problèmes de wrapping</title>
    <!-- Import Inter Variable pour font-variation-settings -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color: #111;
        font-family:
          Inter,
          system-ui,
          -apple-system,
          "Segoe UI",
          Roboto,
          "Helvetica Neue",
          Arial;

        --max-width: 162px;
      }
      body {
        padding: 20px;
        line-height: 1.4;
        background: #f7f7fb;
      }
      h1 {
        margin: 0 0 12px;
        font-size: 18px;
      }
      .examples {
        max-width: 900px;
        margin: 0 auto;
      }
      .card {
        margin-bottom: 24px;
        padding: 20px;
        background: white;
        border: 1px solid #e6e8ec;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(20, 20, 40, 0.03);
      }
      .technique {
        display: inline-block;
        margin-bottom: 12px;
        padding: 4px 8px;
        color: #1e40af;
        font-weight: 600;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        background: #e8f2ff;
        border-radius: 4px;
      }
      .example-title {
        margin-bottom: 16px;
        font-weight: 600;
      }

      /* Comparaison côte à côte */
      .comparison {
        display: flex;
        margin-bottom: 16px;
        gap: 12px;
      }
      .version {
        padding: 10px;
        flex: 1;
        font-size: 14px;
        background: #f8f9fa;
        border-radius: 4px;
      }
      .version-title {
        margin-bottom: 8px;
        color: #666;
        font-weight: 600;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .demo-text {
        line-height: 1.3;
      }
      .demo-text.normal {
        font-weight: 400;
      }
      .demo-text.bold {
        font-weight: 700;
      }
      .constrainer {
        box-sizing: border-box;
        max-width: var(--max-width);
        /* padding: 8px; */
        background: #fff;
        /* border: 1px dashed #ddd; */
        border-radius: 4px;
      }

      /* Section interactive */
      .interactive {
        margin-top: 16px;
        padding: 12px;
        background: #fff5f5;
        border: 1px solid #fecaca;
        border-radius: 6px;
      }
      .interactive label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        font-size: 13px;
      }
      .interactive input[type="checkbox"] {
        margin-right: 6px;
      }
      .smooth {
        display: inline-block;
        margin: 8px 0;
        /* padding: 6px 8px; */
        font-size: 14px;
        background: linear-gradient(
          90deg,
          rgba(255, 240, 240, 0.08),
          rgba(240, 255, 240, 0.03)
        );
        border-radius: 6px;
      }

      .meta {
        margin: 8px 0;
        color: #5b6473;
        font-size: 13px;
      }

      /* EXEMPLE 0: bold invisible dicte la largeur */
      .ex-0 .wrapper {
        position: relative;
        display: inline-block;
        box-sizing: border-box;
        max-width: var(--max-width);
      }
      .ex-0 .inner {
        position: relative;
        display: inline-block;
      }
      .ex-0 .text-normal {
        position: absolute;
        top: 0;
        left: 0;
        font-weight: 400;
        line-height: 1.3;
        opacity: 1;
        transition: font-weight 0.2s ease;
      }
      .ex-0 .text-bold {
        position: static;
        font-weight: 700;
        line-height: 1.3;
        opacity: 0;
      }
      .ex-0.active .text-normal {
        font-weight: 700;
      }

      /* EXEMPLE B: les deux en absolute */
      .ex-b .wrapper {
        position: relative;
        display: block;
        height: 110px;
      }
      .ex-b .inner {
        position: relative;
        display: block;
        width: 100%;
      }
      .ex-b .text-normal {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        font-weight: 400;
        line-height: 1.3;
        opacity: 1;
        transition: opacity 0.2s ease;
      }
      .ex-b .text-bold {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        font-weight: 700;
        line-height: 1.3;
        opacity: 0;
        transition: opacity 0.2s ease;
      }
      .ex-b.active .text-normal {
        opacity: 0;
      }
      .ex-b.active .text-bold {
        opacity: 1;
      }

      /* EXEMPLE C: les deux en flow */
      .ex-c .text {
        font-weight: 400;
        line-height: 1.3;
        transition: font-weight 0.2s ease;
      }
      .ex-c.active .text {
        font-weight: 700;
      }

      /* EXEMPLE D: single-line sans wrapping */
      .ex-d .wrapper {
        white-space: nowrap;
      }
      .ex-d .text {
        font-weight: 400;
        line-height: 1.3;
        white-space: nowrap;
        transition: font-weight 0.2s ease;
      }
      .ex-d.active .text {
        font-weight: 700;
      }
    </style>
  </head>
  <body>
    <h1>Font weight transitions</h1>
    <p style="margin: 0 0 16px; font-size: 14px; color: #666">
      Différentes approches pour gérer les transitions de font-weight.
    </p>

    <div
      style="
        margin-bottom: 20px;
        padding: 12px;
        background: #f0f4f8;
        border-radius: 6px;
      "
    >
      <label
        style="
          display: block;
          margin-bottom: 6px;
          font-weight: 600;
          font-size: 13px;
        "
      >
        Largeur max: <span id="width-display">100px</span>
      </label>
      <input
        type="range"
        id="width-slider"
        min="80"
        max="300"
        value="100"
        style="width: 200px"
      />
      <script>
        // Initial setup of max-width CSS variable
        const cssInitialValue = getComputedStyle(
          document.documentElement,
        ).getPropertyValue("--max-width");
        document.querySelector("#width-display").textContent = cssInitialValue;
        document.querySelector("#width-slider").value = parseInt(
          cssInitialValue,
          10,
        );
      </script>
    </div>

    <div class="examples">
      <!-- EXEMPLE 0 -->
      <div class="card ex-0">
        <div class="technique">Bold invisible avec largeur fixe</div>

        <div class="comparison">
          <div class="version">
            <div class="version-title">Normal (visible)</div>
            <div class="demo-text normal constrainer demo-text-content"></div>
          </div>
          <div class="version">
            <div class="version-title">Bold (invisible, dicte largeur)</div>
            <div class="demo-text bold constrainer demo-text-content"></div>
          </div>
        </div>

        <div class="interactive">
          <label> <input type="checkbox" data-toggle="0" /> Bold </label>
          <div class="smooth wrapper" id="wrap-0">
            <span class="inner">
              <span class="text-normal demo-text-content" id="0-normal"></span>
              <span class="text-bold demo-text-content" id="0-bold"></span>
            </span>
          </div>
        </div>
      </div>
      <!-- EXEMPLE B -->
      <div class="card ex-b">
        <div class="technique">Les deux en position absolute</div>

        <div class="comparison">
          <div class="version">
            <div class="version-title">Normal (absolute)</div>
            <div class="demo-text normal constrainer demo-text-content"></div>
          </div>
          <div class="version">
            <div class="version-title">Bold (absolute)</div>
            <div class="demo-text bold constrainer demo-text-content"></div>
          </div>
        </div>

        <div class="interactive">
          <label> <input type="checkbox" data-toggle="b" /> Bold </label>
          <div class="constrainer">
            <div class="smooth wrapper" id="wrap-b">
              <span class="inner">
                <span
                  class="text-normal demo-text-content"
                  id="b-normal"
                ></span>
                <span class="text-bold demo-text-content" id="b-bold"></span>
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- EXEMPLE C -->
      <div class="card ex-c">
        <div class="technique">Document flow normal</div>

        <div class="comparison">
          <div class="version">
            <div class="version-title">Normal (flow)</div>
            <div class="demo-text normal constrainer demo-text-content"></div>
          </div>
          <div class="version">
            <div class="version-title">Bold (flow)</div>
            <div class="demo-text bold constrainer demo-text-content"></div>
          </div>
        </div>

        <div class="interactive">
          <label> <input type="checkbox" data-toggle="c" /> Bold </label>
          <div class="constrainer">
            <div class="smooth">
              <span class="text demo-text-content" id="c-text"></span>
            </div>
          </div>
        </div>
      </div>

      <!-- EXEMPLE D -->
      <div class="card ex-d">
        <div class="technique">Single line avec nowrap</div>

        <div class="comparison">
          <div class="version">
            <div class="version-title">Normal (nowrap)</div>
            <div
              class="demo-text normal demo-text-content"
              style="white-space: nowrap"
            ></div>
          </div>
          <div class="version">
            <div class="version-title">Bold (nowrap)</div>
            <div
              class="demo-text bold demo-text-content"
              style="white-space: nowrap"
            ></div>
          </div>
        </div>

        <div class="interactive">
          <label> <input type="checkbox" data-toggle="d" /> Bold </label>
          <div class="smooth wrapper" id="wrap-d">
            <span class="text demo-text-content" id="d-text"></span>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Texte de référence centralisé
      const DEMO_TEXT = "Du texte sur lequel on fait varier la font weight.";

      // Simple helper
      const $ = (id) => document.getElementById(id);

      // Remplir tous les textes de démonstration
      function fillDemoTexts() {
        document.querySelectorAll(".demo-text-content").forEach((el) => {
          el.textContent = DEMO_TEXT;
        });

        // Remplir aussi les textes interactifs
        const interactiveTexts = [
          "0-normal",
          "0-bold",
          "b-normal",
          "b-bold",
          "c-text",
          "d-text",
        ];
        interactiveTexts.forEach((id) => {
          const el = $(id);
          if (el) el.textContent = DEMO_TEXT;
        });
      }

      // Toggle bold state based on checkbox
      function toggle(example, checked) {
        const card = document.querySelector(`.ex-${example}`);
        if (checked) {
          card.classList.add("active");
        } else {
          card.classList.remove("active");
        }
      }

      // Initialize everything
      function init() {
        // Fill all demo texts
        fillDemoTexts();

        // Attach checkbox listeners
        document.querySelectorAll("input[data-toggle]").forEach((checkbox) => {
          checkbox.addEventListener("change", () => {
            const example = checkbox.getAttribute("data-toggle");
            toggle(example, checkbox.checked);
          });
        });

        // Setup width control
        const slider = document.getElementById("width-slider");
        const display = document.getElementById("width-display");

        if (slider && display) {
          slider.addEventListener("input", (e) => {
            const value = e.target.value;
            document.documentElement.style.setProperty(
              "--max-width",
              value + "px",
            );
            display.textContent = value + "px";
          });
        }
      }

      // Start when ready
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", init);
      } else {
        init();
      }
    </script>
  </body>
</html>
