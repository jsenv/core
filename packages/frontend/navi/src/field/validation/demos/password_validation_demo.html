<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Password Validation Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        max-width: 600px;
        margin: 40px auto;
        padding: 20px;
        color: #333;
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        line-height: 1.5;
      }

      .demo-section {
        margin-bottom: 30px;
        padding: 30px;
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
      }

      h1 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 1.5rem;
      }

      .description {
        margin: 0 0 30px 0;
        color: #666;
        font-size: 0.95rem;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        color: #555;
        font-weight: 500;
      }

      input[type="password"] {
        box-sizing: border-box;
        width: 100%;
        padding: 12px 16px;
        font-size: 1rem;
        border: 2px solid #e0e0e0;
        border-radius: 6px;
        transition: border-color 0.2s ease;
      }

      input[type="password"]:focus {
        border-color: #007bff;
        outline: none;
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
      }

      .constraints-list {
        margin-top: 15px;
        padding: 20px;
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 6px;
      }

      .constraints-title {
        margin: 0 0 15px 0;
        color: #495057;
        font-weight: 600;
        font-size: 0.9rem;
      }

      .constraint {
        display: flex;
        margin-bottom: 10px;
        padding: 8px 0;
        align-items: center;
        font-size: 0.9rem;
        transition: all 0.2s ease;
      }

      .constraint:last-child {
        margin-bottom: 0;
      }

      .constraint-icon {
        display: flex;
        width: 18px;
        height: 18px;
        margin-right: 12px;
        flex-shrink: 0;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 0.7rem;
        border-radius: 50%;
        transition: all 0.2s ease;
      }

      .constraint.unfulfilled .constraint-icon {
        color: #6c757d;
        background: #f8f9fa;
        border: 1px solid #dee2e6;
      }

      .constraint.unfulfilled .constraint-icon::before {
        content: "○";
      }

      .constraint.fulfilled .constraint-icon {
        color: white;
        background: #28a745;
      }

      .constraint.fulfilled .constraint-icon::before {
        content: "✓";
      }

      .constraint.unfulfilled .constraint-text {
        color: #6c757d;
      }

      .constraint.fulfilled .constraint-text {
        color: #28a745;
        opacity: 0.8;
      }

      .constraint-text {
        flex: 1;
        transition: all 0.2s ease;
      }

      .debug-info {
        margin-top: 20px;
        padding: 15px;
        color: #666;
        font-size: 0.8rem;
        font-family: "Courier New", monospace;
        background: #f1f3f4;
        border-radius: 6px;
      }

      .debug-title {
        margin-bottom: 8px;
        color: #333;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="demo-section">
      <h1>Password Validation Demo</h1>
      <p class="description">
        A vanilla HTML/CSS/JS implementation showing real-time password
        validation with visual feedback for multiple constraints. This serves as
        a reference for improving the validation API to support complex
        validation scenarios.
      </p>

      <form>
        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            placeholder="Enter your password"
            autocomplete="new-password"
          />
        </div>

        <div class="constraints-list">
          <div class="constraints-title">Password Requirements:</div>

          <div class="constraint unfulfilled" data-constraint="minLength">
            <div class="constraint-icon"></div>
            <div class="constraint-text">At least 10 characters long</div>
          </div>

          <div class="constraint unfulfilled" data-constraint="uppercase">
            <div class="constraint-icon"></div>
            <div class="constraint-text">
              Contains at least one uppercase letter (A-Z)
            </div>
          </div>

          <div class="constraint unfulfilled" data-constraint="lowercase">
            <div class="constraint-icon"></div>
            <div class="constraint-text">
              Contains at least one lowercase letter (a-z)
            </div>
          </div>

          <div class="constraint unfulfilled" data-constraint="number">
            <div class="constraint-icon"></div>
            <div class="constraint-text">
              Contains at least one number (0-9)
            </div>
          </div>

          <div class="constraint unfulfilled" data-constraint="special">
            <div class="constraint-icon"></div>
            <div class="constraint-text">
              Contains at least one special character (!@#$%^&*)
            </div>
          </div>
        </div>

        <div class="debug-info">
          <div class="debug-title">Debug Information:</div>
          <div>Password length: <span id="debug-length">0</span></div>
          <div>
            Fulfilled constraints: <span id="debug-fulfilled">0</span>/5
          </div>
        </div>
      </form>
    </div>

    <script>
      class PasswordValidator {
        constructor(passwordInput) {
          this.passwordInput = passwordInput;
          this.constraints = {
            minLength: {
              test: (password) => password.length >= 10,
              element: document.querySelector('[data-constraint="minLength"]'),
            },
            uppercase: {
              test: (password) => /[A-Z]/.test(password),
              element: document.querySelector('[data-constraint="uppercase"]'),
            },
            lowercase: {
              test: (password) => /[a-z]/.test(password),
              element: document.querySelector('[data-constraint="lowercase"]'),
            },
            number: {
              test: (password) => /[0-9]/.test(password),
              element: document.querySelector('[data-constraint="number"]'),
            },
            special: {
              test: (password) => /[!@#$%^&*]/.test(password),
              element: document.querySelector('[data-constraint="special"]'),
            },
          };

          this.debugLength = document.getElementById("debug-length");
          this.debugFulfilled = document.getElementById("debug-fulfilled");

          this.init();
        }

        init() {
          this.passwordInput.addEventListener("input", (event) => {
            this.validatePassword(event.target.value);
          });

          // Initial validation
          this.validatePassword(this.passwordInput.value);
        }

        validatePassword(password) {
          let fulfilledCount = 0;

          // Check each constraint
          Object.entries(this.constraints).forEach(([, constraint]) => {
            const isFulfilled = constraint.test(password);

            if (isFulfilled) {
              fulfilledCount++;
              constraint.element.classList.remove("unfulfilled");
              constraint.element.classList.add("fulfilled");
            } else {
              constraint.element.classList.remove("fulfilled");
              constraint.element.classList.add("unfulfilled");
            }
          });

          // Update debug info
          this.updateDebugInfo(password, fulfilledCount);
        }

        updateStrengthIndicator(fulfilledCount, totalConstraints) {
          const strengthPercentage = Math.round(
            (fulfilledCount / totalConstraints) * 100,
          );

          // Remove existing strength classes
          this.strengthBar.classList.remove(
            "strength-weak",
            "strength-medium",
            "strength-strong",
          );

          // Determine strength level and styling
          let strengthClass;
          let strengthText;

          if (strengthPercentage === 0) {
            strengthText = "Enter a password to see strength";
            strengthClass = "";
          } else if (strengthPercentage <= 40) {
            strengthText = "Weak - More requirements needed";
            strengthClass = "strength-weak";
          } else if (strengthPercentage <= 80) {
            strengthText = "Medium - Almost there!";
            strengthClass = "strength-medium";
          } else {
            strengthText = "Strong - All requirements met!";
            strengthClass = "strength-strong";
          }

          // Apply styling
          this.strengthBar.style.width = `${strengthPercentage}%`;
          if (strengthClass) {
            this.strengthBar.classList.add(strengthClass);
          }
          this.strengthText.textContent = strengthText;
        }

        updateDebugInfo(password, fulfilledCount) {
          this.debugLength.textContent = password.length;
          this.debugFulfilled.textContent = fulfilledCount;
        }
      }

      // Initialize the password validator when the DOM is ready
      document.addEventListener("DOMContentLoaded", () => {
        const passwordInput = document.getElementById("password");
        const Validator = new PasswordValidator(passwordInput);
        // Validator is now active and listening for input events
        console.debug("Password validator initialized");
      });
    </script>
  </body>
</html>
