# [7_persistence_with_autofix](../../state_signal_persists.test.js)

```js
clearAll();

let autoFixCalls = [];
const sig = stateSignal("option1", {
  id: "autofix_persist",
  persists: true,
  oneOf: ["option1", "option2", "option3"],
  autoFix: (value) => {
    autoFixCalls.push(value);
    return "option1";
  },
});

// Set invalid value - should persist but trigger autofix
sig.value = "invalid";

const results = {
  value: sig.value,
  valid: sig.validity.valid,
  storage: mockLocalStorage.getItem("autofix_persist"),
  autoFixCalls,
};

return { results };
```

```js
{
  "results": {
    "value": "option1",
    "valid": true,
    "storage": null,
    "autoFixCalls": [
      "invalid"
    ]
  }
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
