# [5_persistence_storage_cleanup](../../state_signal_persists.test.js)

```js
clearAll();
const storageStates = [];

const captureStorage = (label) => {
  const keys = [];
  for (let i = 0; i < mockLocalStorage.length; i++) {
    keys.push(mockLocalStorage.key(i));
  }
  storageStates.push({ label, keys, size: mockLocalStorage.length });
};

captureStorage("initial empty");

// Create multiple persisting signals
const sig1 = stateSignal("default1", { id: "cleanup1", persists: true });
const sig2 = stateSignal("default2", { id: "cleanup2", persists: true });
captureStorage("after creation");

// Set explicit values
sig1.value = "stored1";
sig2.value = "stored2";
captureStorage("after setting values");

// Reset one signal
sig1.value = undefined;
captureStorage("after resetting sig1");

// Reset second signal
sig2.value = undefined;
captureStorage("after resetting sig2");

return { storageStates };
```

```js
{
  "storageStates": [
    {
      "label": "initial empty",
      "keys": [],
      "size": 0
    },
    {
      "label": "after creation",
      "keys": [],
      "size": 0
    },
    {
      "label": "after setting values",
      "keys": [
        "cleanup1",
        "cleanup2"
      ],
      "size": 2
    },
    {
      "label": "after resetting sig1",
      "keys": [
        "cleanup1",
        "cleanup2"
      ],
      "size": 2
    },
    {
      "label": "after resetting sig2",
      "keys": [
        "cleanup1",
        "cleanup2"
      ],
      "size": 2
    }
  ]
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
