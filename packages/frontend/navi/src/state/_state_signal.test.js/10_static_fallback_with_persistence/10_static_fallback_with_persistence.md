# [10_static_fallback_with_persistence](../../state_signal.test.js)

```js
clearSignalRegistry();
const dynamicDefault = signal(undefined);
const sig = stateSignal(dynamicDefault, {
  default: "fallback_value",
  id: "persist_test",
  persists: false, // Disable for test consistency
});

// Initially using fallback
const initialValue = sig.value;

// User sets value - should be treated as custom
sig.value = "user_value";
const customValue = sig.value;

// Check isCustomValue function
const registryEntry = globalSignalRegistry.get("persist_test");
const isInitialCustom = registryEntry.options.isCustomValue(initialValue);
const isUserValueCustom = registryEntry.options.isCustomValue(customValue);
const isFallbackCustom =
  registryEntry.options.isCustomValue("fallback_value");

return {
  initialValue,
  customValue,
  isInitialCustom, // Should be false (fallback is not custom)
  isUserValueCustom, // Should be true (user value is custom)
  isFallbackCustom, // Should be false when dynamic is undefined
};
```

```js
{
  "initialValue": "fallback_value",
  "customValue": "user_value",
  "isInitialCustom": false,
  "isUserValueCustom": true,
  "isFallbackCustom": false
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
