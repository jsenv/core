# [parameter value update in URL should sync to signal values](../../route_document_url_sync.test.js)

```js
try {
  const zoneSignal = stateSignal("london");
  const lonSignal = stateSignal(3);
  const isochroneTabSignal = stateSignal("compare");
  const isochroneLongitudeSignal = stateSignal(2);
  const isochroneTimeModeSignal = stateSignal("walk");

  const {
    MAP_ISOCHRONE_ROUTE,
    MAP_ISOCHRONE_COMPARE_ROUTE,
    MAP_ISOCHRONE_TIME_ROUTE,
  } = setupRoutes({
    MAP_ROUTE: `/map/?zone=${zoneSignal}&lon=${lonSignal}`,
    MAP_ISOCHRONE_ROUTE: `/map/isochrone/:tab=${isochroneTabSignal}/?iso_lon=${isochroneLongitudeSignal}`,
    MAP_ISOCHRONE_COMPARE_ROUTE: `/map/isochrone/compare`,
    MAP_ISOCHRONE_TIME_ROUTE: `/map/isochrone/time/:mode=${isochroneTimeModeSignal}/`,
  });

  // Mock browserIntegration.navTo to track redirectTo calls
  const navToCalls = [];
  const mockBrowserIntegration = {
    navTo: (url) => {
      navToCalls.push(url);
    },
  };
  setBrowserIntegration(mockBrowserIntegration);

  updateRoutes(`${baseUrl}/map/isochrone?zone=london&lon=3&iso_lon=2`);
  // Capture initial state
  const initialState = {
    matching: {
      isochrone: MAP_ISOCHRONE_ROUTE.matching,
      isochrone_compare: MAP_ISOCHRONE_COMPARE_ROUTE.matching,
      isochrone_time: MAP_ISOCHRONE_TIME_ROUTE.matching,
    },
  };
  // Clear navTo calls from initial setup
  navToCalls.length = 0;
  // Update URL to /map/isochrone/time?zone=longon&lon=3&iso_lon=2 (zone typo: london -> longon)
  updateRoutes(`${baseUrl}/map/isochrone/time?zone=longon&lon=3&iso_lon=2`);
  // Capture state after URL update
  const finalState = {
    matching: {
      isochrone: MAP_ISOCHRONE_ROUTE.matching,
      isochrone_compare: MAP_ISOCHRONE_COMPARE_ROUTE.matching,
      isochrone_time: MAP_ISOCHRONE_TIME_ROUTE.matching,
    },
  };

  return {
    initial_state: initialState,
    final_state: finalState,
    redirect_calls: {
      nav_to_calls: navToCalls,
      total_calls: navToCalls.length,
      any_redirects_occurred: navToCalls.length > 0,
    },
  };
} finally {
  setBrowserIntegration(undefined);
  clearAllRoutes();
  globalSignalRegistry.clear();
}
```

```js
{
  "initial_state": {
    "matching": {
      "isochrone": true,
      "isochrone_compare": true,
      "isochrone_time": false
    }
  },
  "final_state": {
    "matching": {
      "isochrone": true,
      "isochrone_compare": false,
      "isochrone_time": true
    }
  },
  "redirect_calls": {
    "nav_to_calls": [],
    "total_calls": 0,
    "any_redirects_occurred": false
  }
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
