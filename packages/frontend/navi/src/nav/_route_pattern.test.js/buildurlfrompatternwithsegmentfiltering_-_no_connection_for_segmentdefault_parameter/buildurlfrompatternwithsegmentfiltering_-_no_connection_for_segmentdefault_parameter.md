# [buildUrlFromPatternWithSegmentFiltering - no connection for segmentDefault parameter](../../route_pattern.test.js#L368)

```js
// This reproduces the specific issue where a segment should NOT be filtered
// when there's no connection for the parameter in the current route
const pattern = "/admin/analytics/";
const routePattern = createRoutePattern(pattern);

// segmentDefaults with correct inheritance scenario
const segmentDefaults = new Map([
  [
    1,
    {
      paramName: "section",
      literalValue: "analytics",
      signalDefault: "settings", // Different from literal - this is the proper case
    },
  ],
]);

const connections = [
  {
    paramName: "tab", // Note: different from segmentDefault paramName
    options: { defaultValue: "overview" },
  },
];

const result = buildUrlFromPatternWithSegmentFiltering(
  routePattern.pattern,
  {}, // No parameters provided
  new Map([["section", "settings"]]), // parameterDefaults uses correct signal default
  { segmentDefaults, connections },
);

return {
  pattern,
  segmentDefaults: Array.from(segmentDefaults.entries()),
  connections: connections.map((c) => ({
    paramName: c.paramName,
    defaultValue: c.options.defaultValue,
  })),
  result,
  expected: "/admin/analytics/", // Should NOT omit "analytics" since analytics â‰  settings
  issue:
    "segment should not be filtered when literal value differs from signal default",
};
```

```js
{
  "pattern": "/admin/analytics/",
  "segmentDefaults": [
    [
      1,
      {
        "paramName": "section",
        "literalValue": "analytics",
        "signalDefault": "settings"
      }
    ]
  ],
  "connections": [
    {
      "paramName": "tab",
      "defaultValue": "overview"
    }
  ],
  "result": "/admin/analytics",
  "expected": "/admin/analytics/",
  "issue": "segment should not be filtered when literal value differs from signal default"
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
