# [route.params with path parameters and dynamic defaults](../../route_params.test.js)

```js
try {
  const categorySignal = stateSignal(undefined);
  const pageSignal = stateSignal(categorySignal, {
    default: "home",
    type: "string",
  });

  const routes = setupRoutes({
    ROOT_ROUTE: "/",
    CATEGORY_ROUTE: `/category/:page=${pageSignal}`,
  });

  // Test with static default
  updateRoutes("http://localhost:3000/category/home");

  const staticDefaultState = {
    category_signal: categorySignal.value,
    page_signal: pageSignal.value,
    route_params: routes.CATEGORY_ROUTE.params,
    route_matching: routes.CATEGORY_ROUTE.matching,
  };

  // Test with different path parameter
  updateRoutes("http://localhost:3000/category/products");

  const differentPathState = {
    category_signal: categorySignal.value,
    page_signal: pageSignal.value,
    route_params: routes.CATEGORY_ROUTE.params,
    route_matching: routes.CATEGORY_ROUTE.matching,
  };

  // Change dynamic default
  categorySignal.value = "products";

  const afterDynamicChange = {
    category_signal: categorySignal.value,
    page_signal: pageSignal.value,
    route_params: routes.CATEGORY_ROUTE.params,
    route_matching: routes.CATEGORY_ROUTE.matching,
  };

  // Navigate to URL that matches new dynamic default
  updateRoutes("http://localhost:3000/category/products");

  const matchingDynamicDefault = {
    category_signal: categorySignal.value,
    page_signal: pageSignal.value,
    route_params: routes.CATEGORY_ROUTE.params,
    route_matching: routes.CATEGORY_ROUTE.matching,
  };

  // Navigate to URL that no longer matches dynamic default
  updateRoutes("http://localhost:3000/category/home");

  const nonMatchingOldDefault = {
    category_signal: categorySignal.value,
    page_signal: pageSignal.value,
    route_params: routes.CATEGORY_ROUTE.params,
    route_matching: routes.CATEGORY_ROUTE.matching,
  };

  return {
    static_default_state: staticDefaultState,
    different_path_state: differentPathState,
    after_dynamic_change: afterDynamicChange,
    matching_dynamic_default: matchingDynamicDefault,
    non_matching_old_default: nonMatchingOldDefault,
  };
} finally {
  clearAllRoutes();
  globalSignalRegistry.clear();
}
```

```js
{
  "static_default_state": {
    "category_signal": undefined,
    "page_signal": "home",
    "route_params": {
      "page": "home"
    },
    "route_matching": true
  },
  "different_path_state": {
    "category_signal": undefined,
    "page_signal": "products",
    "route_params": {
      "page": "products"
    },
    "route_matching": true
  },
  "after_dynamic_change": {
    "category_signal": "products",
    "page_signal": "products",
    "route_params": {
      "page": "products"
    },
    "route_matching": true
  },
  "matching_dynamic_default": {
    "category_signal": "products",
    "page_signal": "products",
    "route_params": {
      "page": "products"
    },
    "route_matching": true
  },
  "non_matching_old_default": {
    "category_signal": "products",
    "page_signal": "home",
    "route_params": {
      "page": "home"
    },
    "route_matching": true
  }
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
