# [shouldUseChildRoute_with_dynamic_defaults](../../route_dynamic_defaults_inheritance.test.js)

```js
try {
  // Test the shouldUseChildRoute logic with dynamic defaults
  
  const statusSignal = stateSignal("pending", {
    id: "status",
    type: "string", 
    defaultValue: "pending", // Static default
    getDefaultValue: () => {
      // Dynamic default based on some condition
      return Math.random() > 0.5 ? "active" : "pending";
    }
  });

  const currentDefault = statusSignal.options.getDefaultValue();
  statusSignal.value = currentDefault;

  const { LIST_ROUTE, ITEM_ROUTE } = setupRoutes({
    LIST_ROUTE: `/list?status=${statusSignal}`,
    ITEM_ROUTE: `/list/:status/items`
  });

  // Should prefer parent route when status is at dynamic default
  const urlWithDynamicDefault = LIST_ROUTE.buildMostPreciseUrl();
  
  // Change to non-default value
  statusSignal.value = currentDefault === "active" ? "pending" : "active";
  const urlWithNonDefault = LIST_ROUTE.buildMostPreciseUrl();

  return {
    currentDefault,
    statusValue: statusSignal.value,
    urlWithDynamicDefault, // Should use parent: /list
    urlWithNonDefault // Should potentially use child: /list/[status]/items
  };
} finally {
  clearAllRoutes();
  globalSignalRegistry.clear();
}
```

```console
TypeError: Cannot read properties of undefined (reading 'getDefaultValue')
  at base/route_dynamic_defaults_inheritance.test.js:88:51
  at capture (@jsenv/core/packages/tooling/snapshot/src/side_effects/create_capture_side_effects.js:342:29)
  at snapshotTests (@jsenv/core/packages/tooling/snapshot/src/side_effects/snapshot_tests.js:183:33)
  at async base/route_dynamic_defaults_inheritance.test.js:6:1
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
