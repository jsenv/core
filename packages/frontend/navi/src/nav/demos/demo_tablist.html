<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>TabList Demo</title>
    <style>
      body {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        line-height: 1.5;
        background: #f5f5f5;
      }
      h1 {
        margin: 0 0 30px;
        color: #333;
        font-size: 2rem;
        text-align: center;
      }
      .demo-section {
        margin-bottom: 40px;
        padding: 20px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }
      .demo-section h2 {
        margin: 0 0 15px;
        padding-bottom: 6px;
        color: #222;
        font-size: 1.3rem;
        border-bottom: 2px solid #e0e0e0;
      }
      .caption {
        margin: 10px 0 8px;
        color: #666;
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .example-block {
        margin-bottom: 24px;
      }
      .note {
        display: inline-block;
        padding: 10px 12px;
        color: #555;
        font-size: 0.8rem;
        background: #f8f9fa;
        border-left: 4px solid #1976d2;
        border-radius: 0 6px 6px 0;
      }
      .dynamic-panel {
        min-height: 60px;
        margin-top: 16px;
        padding: 12px 16px;
        background: #fafafa;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" jsenv-type="module/jsx">
      import { render } from "preact";
      import { useState } from "preact/hooks";
      import { Box, Title, Text, TabList, Tab, Link } from "@jsenv/navi";

      const Demo = () => {
        return (
          <div style={{ padding: "10px" }}>
            <Title as="h1">TabList Component Demo</Title>
            <BasicTabs />
            <UnderlineInteractiveTabs />
            <VerticalTabs />
            <VerticalTabsWithIcons />
            <SpacingVariants />
            <StylingVariables />
            <DynamicAddRemove />
          </div>
        );
      };

      const BasicTabs = () => {
        return (
          <Box as="section" className="demo-section">
            <Title as="h2">Basic</Title>
            <Text className="note">
              A minimal tab list. Selection is controlled via the{" "}
              <code>selected</code> prop on each <code>Tab</code>.
            </Text>
            <div className="example-block">
              <TabList>
                <Tab key="home" selected>
                  Home
                </Tab>
                <Tab key="profile">Profile</Tab>
                <Tab key="settings">Settings</Tab>
              </TabList>
            </div>
          </Box>
        );
      };

      const UnderlineInteractiveTabs = () => {
        const [active, setActive] = useState("overview");
        const tabs = ["overview", "activity", "reports", "billing"];
        return (
          <Box as="section" className="demo-section">
            <Title as="h2">Indicator + Click Selection</Title>
            <Text className="note">
              The <code>indicator</code> prop enables an active marker at the{" "}
              <code>"start"</code> or <code>"end"</code> of tabs. Tabs become
              interactive when you provide an <code>onClick</code>; selection is
              controlled externally (here by local state). The selected tab also
              updates the associated panel below.
            </Text>
            <div className="example-block">
              <div className="caption">Indicator at end (default)</div>
              <Box border="1px dashed violet">
                <TabList spacing="sm" indicator="end">
                  {tabs.map((name) => (
                    <Tab
                      key={name}
                      selected={name === active}
                      onClick={() => setActive(name)}
                      aria-controls={`panel-${name}`}
                    >
                      {name.charAt(0).toUpperCase() + name.slice(1)}
                    </Tab>
                  ))}
                </TabList>
              </Box>
            </div>
            <div className="example-block">
              <div className="caption">Indicator at start</div>
              <Box border="1px dashed violet">
                <TabList spacing="sm" indicator="start">
                  {tabs.map((name) => (
                    <Tab
                      key={name}
                      selected={name === active}
                      onClick={() => setActive(name)}
                      aria-controls={`panel-${name}`}
                    >
                      {name.charAt(0).toUpperCase() + name.slice(1)}
                    </Tab>
                  ))}
                </TabList>
              </Box>
            </div>
          </Box>
        );
      };

      const VerticalTabsWithIcons = () => {
        const [activeIconTab, setActiveIconTab] = useState("home");
        const iconTabs = [
          { key: "home", label: "Home", icon: "üè†" },
          { key: "profile", label: "Profile", icon: "üë§" },
          { key: "messages", label: "Messages", icon: "üí¨" },
          { key: "notifications", label: "Notifications", icon: "üîî" },
          { key: "settings", label: "Settings", icon: "‚öôÔ∏è" },
        ];

        return (
          <Box as="section" className="demo-section">
            <Title as="h2">Vertical Layout with Icons</Title>
            <Text className="note">
              Vertical tabs can include icons alongside text labels. Here are
              examples with different icon placements and styling approaches.
            </Text>

            <Box row spacing="lg">
              <Box column spacing="md">
                <div className="example-block">
                  <Box border="1px dashed violet" style={{ width: "200px" }}>
                    <TabList vertical spacing="xs" indicator="end">
                      {iconTabs.map((tab) => (
                        <Tab
                          key={tab.key}
                          selected={tab.key === activeIconTab}
                          onClick={() => setActiveIconTab(tab.key)}
                          aria-controls={`icon-panel-${tab.key}`}
                        >
                          <Text row spacing="sm" alignY="center">
                            <Text>{tab.icon}</Text>
                            <Text>{tab.label}</Text>
                          </Text>
                        </Tab>
                      ))}
                    </TabList>
                  </Box>
                </div>
              </Box>

              <Box column spacing="md">
                <div className="example-block">
                  <div className="caption">Icons only</div>
                  <Box border="1px dashed violet" style={{ width: "80px" }}>
                    <TabList vertical spacing="xs" indicator="end">
                      {iconTabs.map((tab) => (
                        <Tab
                          key={tab.key}
                          selected={tab.key === activeIconTab}
                          onClick={() => setActiveIconTab(tab.key)}
                          aria-controls={`icon-panel-${tab.key}`}
                          title={tab.label}
                        >
                          <Text fontSize="lg">{tab.icon}</Text>
                        </Tab>
                      ))}
                    </TabList>
                  </Box>
                </div>

                <div className="example-block">
                  <div className="caption">Stacked layout</div>
                  <Box border="1px dashed violet" style={{ width: "120px" }}>
                    <TabList vertical spacing="xs" indicator="start">
                      {iconTabs.slice(0, 3).map((tab) => (
                        <Tab
                          key={tab.key}
                          selected={tab.key === activeIconTab}
                          onClick={() => setActiveIconTab(tab.key)}
                          aria-controls={`icon-panel-${tab.key}`}
                          padding="sm"
                        >
                          <Text column spacing="xs" alignX="center">
                            <Text fontSize="lg">{tab.icon}</Text>
                            <Text fontSize="xs">{tab.label}</Text>
                          </Text>
                        </Tab>
                      ))}
                    </TabList>
                  </Box>
                </div>
              </Box>
            </Box>

            <div
              className="dynamic-panel"
              id={`icon-panel-${activeIconTab}`}
              role="tabpanel"
              style={{ marginTop: "20px" }}
            >
              <Text row spacing="sm" alignY="center">
                <Text fontSize="lg">
                  {iconTabs.find((t) => t.key === activeIconTab)?.icon}
                </Text>
                <Text>
                  <strong>
                    {iconTabs.find((t) => t.key === activeIconTab)?.label}
                  </strong>{" "}
                  panel content
                </Text>
              </Text>
            </div>
          </Box>
        );
      };

      const SpacingVariants = () => {
        return (
          <Box as="section" className="demo-section">
            <Title as="h2">Spacing Variants</Title>
            <Text className="note">
              The <code>spacing</code> prop controls gap between tabs.
              Demonstrated with values <code>xs</code>, <code>sm</code>, and no
              spacing prop (default).
            </Text>
            <div className="example-block">
              <div className="caption">spacing="xs"</div>
              <TabList spacing="xs">
                <Tab key="a" selected>
                  A
                </Tab>
                <Tab key="b">B</Tab>
                <Tab key="c">C</Tab>
              </TabList>
            </div>
            <div className="example-block">
              <div className="caption">spacing="sm"</div>
              <TabList spacing="sm">
                <Tab key="a" selected>
                  A
                </Tab>
                <Tab key="b">B</Tab>
                <Tab key="c">C</Tab>
              </TabList>
            </div>
            <div className="example-block">
              <div className="caption">(default spacing)</div>
              <TabList>
                <Tab key="a" selected>
                  A
                </Tab>
                <Tab key="b">B</Tab>
                <Tab key="c">C</Tab>
              </TabList>
            </div>
          </Box>
        );
      };

      const DynamicAddRemove = () => {
        const [tabs, setTabs] = useState([
          { key: "alpha", label: "Alpha" },
          { key: "beta", label: "Beta" },
          { key: "gamma", label: "Gamma" },
        ]);
        const [active, setActive] = useState("alpha");
        const addTab = () => {
          const id = `tab${tabs.length + 1}`;
          setTabs([...tabs, { key: id, label: id }]);
        };
        const removeLast = () => {
          if (tabs.length === 0) return;
          const clone = tabs.slice(0, -1);
          setTabs(clone);
          if (!clone.find((t) => t.key === active) && clone.length) {
            setActive(clone[clone.length - 1].key);
          }
        };
        return (
          <Box as="section" className="demo-section">
            <Title as="h2">Dynamic Add / Remove</Title>
            <Text className="note">
              Tabs can be created or removed externally; the list simply renders
              what it receives.
            </Text>
            <div style={{ marginBottom: "12px" }}>
              <button onClick={addTab} style={{ marginRight: "8px" }}>
                Add Tab
              </button>
              <button onClick={removeLast}>Remove Last</button>
            </div>
            <TabList spacing="sm">
              {tabs.map((t) => (
                <Tab
                  key={t.key}
                  selected={t.key === active}
                  onClick={() => setActive(t.key)}
                  aria-controls={`panel-${t.key}`}
                >
                  {t.label}
                </Tab>
              ))}
            </TabList>
            <div
              className="dynamic-panel"
              id={`panel-${active}`}
              role="tabpanel"
            >
              <strong>{active}</strong> dynamic panel content
            </div>
          </Box>
        );
      };

      const VerticalTabs = () => {
        const [activeVertical, setActiveVertical] = useState("dashboard");
        const verticalTabs = ["dashboard", "analytics", "reports", "settings"];
        return (
          <Box as="section" className="demo-section">
            <Title as="h2">Vertical Layout</Title>
            <Text className="note">
              The <code>vertical</code> prop changes the layout direction.
              Default indicator position for vertical is <code>"start"</code>{" "}
              (left side), but can be changed to <code>"end"</code> (right
              side).
            </Text>

            <Box row>
              <Box column spacing="md">
                <div className="example-block" style={{ flex: "1" }}>
                  <div className="caption">Default</div>
                  <Box border="1px dashed violet">
                    <TabList vertical spacing="xs">
                      {verticalTabs.map((name) => (
                        <Tab
                          key={name}
                          selected={name === activeVertical}
                          onClick={() => setActiveVertical(name)}
                          aria-controls={`vertical-panel-${name}`}
                        >
                          {name.charAt(0).toUpperCase() + name.slice(1)}
                        </Tab>
                      ))}
                    </TabList>
                  </Box>
                </div>

                <div className="example-block" style={{ flex: "1" }}>
                  <div className="caption">indicator end</div>
                  <Box border="1px dashed violet">
                    <TabList vertical indicator="end" spacing="xs">
                      {verticalTabs.map((name) => (
                        <Tab
                          key={name}
                          selected={name === activeVertical}
                          onClick={() => setActiveVertical(name)}
                          aria-controls={`vertical-panel-${name}`}
                        >
                          {name.charAt(0).toUpperCase() + name.slice(1)}
                        </Tab>
                      ))}
                    </TabList>
                  </Box>
                </div>
              </Box>
              <Box column spacing="md">
                <Box expandX>
                  <div className="caption">alignX="end"</div>
                  <Box border="1px dashed violet">
                    <TabList vertical spacing="xs" alignX="end">
                      {verticalTabs.map((name) => (
                        <Tab
                          key={name}
                          selected={name === activeVertical}
                          onClick={() => setActiveVertical(name)}
                          aria-controls={`vertical-panel-${name}`}
                        >
                          {name.charAt(0).toUpperCase() + name.slice(1)}
                        </Tab>
                      ))}
                    </TabList>
                  </Box>
                </Box>
                <Box expandX>
                  <div className="caption">alignX="end" + indicator end</div>
                  <Box border="1px dashed violet">
                    <TabList vertical spacing="xs" alignX="end" indicator="end">
                      {verticalTabs.map((name) => (
                        <Tab
                          key={name}
                          selected={name === activeVertical}
                          onClick={() => setActiveVertical(name)}
                          aria-controls={`vertical-panel-${name}`}
                        >
                          {name.charAt(0).toUpperCase() + name.slice(1)}
                        </Tab>
                      ))}
                    </TabList>
                  </Box>
                </Box>
              </Box>
            </Box>
          </Box>
        );
      };

      const StylingVariables = () => {
        return (
          <Box as="section" className="demo-section">
            <Title as="h2">Styling with CSS Variables</Title>
            <Text className="note">
              Use <code>--tab-*</code> variables on <code>TabList</code> to set
              base, hover and selected appearance; override per <code>Tab</code>{" "}
              when needed. Indicator controlled by{" "}
              <code>--tab-indicator-color</code> and{" "}
              <code>--tab-indicator-size</code>.
            </Text>
            <div className="example-block">
              <div className="caption">Global theme (light slate)</div>
              <TabList
                style={{
                  "--tab-background": "#f2f5f8",
                  "--tab-color": "#334155",
                  "--tab-background-hover": "#e2e8f0",
                  "--tab-color-hover": "#1e293b",
                }}
              >
                <Tab key="one" selected>
                  One
                </Tab>
                <Tab key="two">Two</Tab>
                <Tab key="three">Three</Tab>
              </TabList>
            </div>
            <div className="example-block">
              <div className="caption">Override third tab only</div>
              <TabList
                style={{
                  "--tab-background": "#202124",
                  "--tab-color": "#e8eaed",
                  "--tab-background-hover": "#2d2f31",
                  "--tab-color-hover": "white",
                }}
              >
                <Tab key="alpha" selected>
                  Alpha
                </Tab>
                <Tab key="beta">Beta</Tab>
                <Tab
                  key="gamma"
                  style={{
                    "--tab-background": "#0d47a1",
                    "--tab-color": "#fff",
                    "--tab-background-hover": "#1565c0",
                    "--tab-color-hover": "#fff",
                  }}
                >
                  Gamma (override)
                </Tab>
              </TabList>
            </div>
            <div className="example-block">
              <div className="caption">Custom hover + indicator</div>
              <TabList
                indicator="end"
                style={{
                  "--tab-background": "transparent",
                  "--tab-color": "#374151",
                  "--tab-background-hover": "#fde68a",
                  "--tab-color-hover": "#92400e",
                  "--tab-indicator-color": "#f59e0b",
                }}
              >
                <Tab key="day" selected>
                  Day
                </Tab>
                <Tab key="week">Week</Tab>
                <Tab key="month">Month</Tab>
              </TabList>
            </div>
            <div className="example-block">
              <div className="caption">Custom selected background & color</div>
              <TabList
                indicator="end"
                style={{
                  "--tab-background": "#1e1e1e",
                  "--tab-color": "#c9d1d9",
                  "--tab-background-hover": "#2a2a2a",
                  "--tab-color-hover": "white",
                  "--tab-indicator-color": "#ff6b6b",
                  "--tab-indicator-size": "3px",
                  "--tab-background-selected": "#0d1117",
                  "--tab-color-selected": "#ffdd57",
                }}
              >
                <Tab key="code" selected>
                  Code
                </Tab>
                <Tab key="design">Design</Tab>
                <Tab key="docs">Docs</Tab>
              </TabList>
            </div>
            <div className="example-block">
              <div className="caption">Override selected style for one tab</div>
              <TabList
                indicator="end"
                style={{
                  "--tab-background": "#f1f5f9",
                  "--tab-color": "#475569",
                  "--tab-background-hover": "#e2e8f0",
                  "--tab-color-hover": "#1e293b",
                  "--tab-background-selected": "#cbd5e1",
                  "--tab-color-selected": "#0f172a",
                  "--tab-indicator-color": "#0ea5e9",
                }}
              >
                <Tab key="general" selected>
                  General
                </Tab>
                <Tab key="advanced">Advanced</Tab>
                <Tab
                  key="danger"
                  style={{
                    "--tab-background": "#fee2e2",
                    "--tab-color": "#991b1b",
                    "--tab-background-hover": "#fecaca",
                    "--tab-color-hover": "#7f1d1d",
                    "--tab-background-selected": "#fb7185",
                    "--tab-color-selected": "white",
                    "--tab-indicator-color": "#dc2626",
                  }}
                >
                  Danger (override)
                </Tab>
              </TabList>
            </div>
            <div className="example-block">
              <div className="caption">Indicator at start position</div>
              <TabList
                indicator="start"
                style={{
                  "--tab-background": "#f8fafc",
                  "--tab-color": "#64748b",
                  "--tab-background-hover": "#e2e8f0",
                  "--tab-color-hover": "#334155",
                  "--tab-indicator-color": "#22c55e",
                  "--tab-indicator-size": "4px",
                }}
              >
                <Tab key="inbox" selected>
                  Inbox
                </Tab>
                <Tab key="sent">Sent</Tab>
                <Tab key="drafts">Drafts</Tab>
              </TabList>
            </div>
            <div className="example-block">
              <InteractiveStyledTabs />
            </div>
          </Box>
        );
      };

      const InteractiveStyledTabs = () => {
        const [active, setActive] = useState("Overview");
        const tabs = ["Overview", "Details", "More"];
        return (
          <div className="example-block">
            <div className="caption">
              TabList background + selected styling (no indicator)
            </div>
            <Box row align="center" width="400" border="1px dashed violet">
              <TabList
                borderRadius="s"
                expandX
                spacing="0"
                padding="xs"
                indicator="none"
                style={{
                  "--tablist-background": "rgb(233, 236, 240)",
                  "--tab-background": "transparent",
                  "--tab-color": "#373C45",
                  "--tab-background-selected": "#373C45",
                  "--tab-color-selected": "white",
                }}
              >
                {tabs.map((name) => (
                  <Tab
                    key={name}
                    selected={name === active}
                    onClick={() => setActive(name)}
                    aria-controls={`panel-${name}`}
                    padding="0"
                  >
                    <Link
                      discrete
                      pseudoState={{ ":focus-visible": name === "Details" }}
                    >
                      {name}
                    </Link>
                  </Tab>
                ))}
              </TabList>
            </Box>
          </div>
        );
      };

      render(<Demo />, document.getElementById("app"));
    </script>
  </body>
</html>
