<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Nested Params Demo</title>
    <style>
      body {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        font-family: Arial, sans-serif;
        line-height: 1.6;
      }
      .nav-section {
        margin: 20px 0;
        padding: 15px;
        background: #f5f5f5;
        border-left: 4px solid #007acc;
        border-radius: 8px;
      }
      .content-area {
        min-height: 100px;
        margin: 20px 0;
        padding: 20px;
        background: white;
        border: 1px solid #ddd;
        border-radius: 8px;
      }
      h1 {
        margin-bottom: 10px;
        color: #333;
      }
      h2 {
        margin-bottom: 15px;
        color: #555;
      }
      .param-display {
        margin: 10px 0;
        padding: 10px;
        font-family: monospace;
        background: #e8f4fd;
        border-radius: 4px;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" jsenv-type="module/jsx">
      import { render } from "preact";
      import { Route, Routes, setupRoutes, TabList } from "@jsenv/navi";

      // Setup nested routes
      const { HOME_ROUTE, PARENT_ROUTE, CHILD_A_ROUTE, CHILD_B_ROUTE } =
        setupRoutes({
          HOME_ROUTE: "/",
          PARENT_ROUTE: "/parent",
          CHILD_A_ROUTE: "/parent/child-a",
          CHILD_B_ROUTE: "/parent/child-b",
        });

      // Home page component
      const HomePage = () => {
        return (
          <div>
            <h2>üè† Home Page</h2>
            <p>This is the home page with no search params.</p>

            <div className="nav-section">
              <h3>Navigation</h3>
              <TabList>
                <TabList.Tab route={HOME_ROUTE}>Home (current)</TabList.Tab>
                <TabList.Tab
                  route={PARENT_ROUTE}
                  routeParams={{ category: "products" }}
                >
                  Parent Page (with category=products)
                </TabList.Tab>
              </TabList>
            </div>
          </div>
        );
      };

      // Parent page component
      const ParentPage = ({ category = "default" }) => {
        return (
          <div>
            <h2>üìÇ Parent Page</h2>
            <div className="param-display">
              Current category: <strong>{category}</strong>
            </div>

            <div className="nav-section">
              <h3>Sub-pages (using parent search param)</h3>
              <TabList>
                <TabList.Tab route={CHILD_A_ROUTE} routeParams={{ category }}>
                  Child A (inherits category={category})
                </TabList.Tab>
                <TabList.Tab route={CHILD_B_ROUTE} routeParams={{ category }}>
                  Child B (inherits category={category})
                </TabList.Tab>
              </TabList>
            </div>

            <div className="nav-section">
              <TabList>
                <TabList.Tab route={HOME_ROUTE}>‚Üê Home</TabList.Tab>
              </TabList>
            </div>
          </div>
        );
      };

      // Child A page component
      const ChildAPage = ({ category = "default" }) => {
        return (
          <div>
            <h2>üî∏ Child A Page</h2>
            <div className="param-display">
              Inherited category: <strong>{category}</strong>
            </div>
            <p>This child page uses the parent's search parameter.</p>

            <div className="nav-section">
              <TabList>
                <TabList.Tab route={PARENT_ROUTE} routeParams={{ category }}>
                  ‚Üê Parent (category={category})
                </TabList.Tab>
                <TabList.Tab route={HOME_ROUTE}>Home</TabList.Tab>
              </TabList>
            </div>
          </div>
        );
      };

      // Child B page component
      const ChildBPage = ({ category = "default" }) => {
        return (
          <div>
            <h2>üîπ Child B Page</h2>
            <div className="param-display">
              Inherited category: <strong>{category}</strong>
            </div>
            <p>This child page also uses the parent's search parameter.</p>

            <div className="nav-section">
              <TabList>
                <TabList.Tab route={PARENT_ROUTE} routeParams={{ category }}>
                  ‚Üê Parent (category={category})
                </TabList.Tab>
                <TabList.Tab route={HOME_ROUTE}>Home</TabList.Tab>
              </TabList>
            </div>
          </div>
        );
      };

      const App = () => {
        return (
          <div>
            <h1>Nested Route Parameters Demo</h1>
            <p>
              This demo shows how child routes can inherit and use search
              parameters from their parent route.
            </p>

            <div className="content-area">
              <Routes>
                <Route route={HOME_ROUTE} element={<HomePage />} />
                <Route route={PARENT_ROUTE} element={<ParentPage />} />
                <Route route={CHILD_A_ROUTE} element={<ChildAPage />} />
                <Route route={CHILD_B_ROUTE} element={<ChildBPage />} />
              </Routes>
            </div>
          </div>
        );
      };

      render(<App />, document.getElementById("app"));
    </script>
  </body>
</html>
