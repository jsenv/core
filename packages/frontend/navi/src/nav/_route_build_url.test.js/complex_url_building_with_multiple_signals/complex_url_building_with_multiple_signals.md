# [complex url building with multiple signals](../../route_build_url.test.js#L544)

```js
try {
  const zoneIdSignal = stateSignal("zone-123", {
    id: "zoneId",
    type: "string",
  });
  const mapboxStyleSignal = stateSignal("streets-v11", {
    id: "mapboxStyle",
    type: "string",
  });
  const mapboxLongitudeSignal = stateSignal(2.3522, {
    id: "mapboxLongitude",
    type: "float",
  });
  const mapboxLatitudeSignal = stateSignal(48.8566, {
    id: "mapboxLatitude",
    type: "float",
  });
  const mapboxZoomSignal = stateSignal(12, {
    id: "mapboxZoom",
    type: "number",
  });
  const mapSidebarOpenedSignal = stateSignal(true, {
    id: "mapSidebarOpened",
    type: "boolean",
  });
  const isochromeWalkTimeSignal = stateSignal(20, {
    id: "isochroneWalk",
    type: "number",
  });

  const { MAP_ROUTE, MAP_ISOCHRONE_ROUTE, MAP_ISOCHRONE_TIME_WALK_ROUTE } =
    setupRoutes({
      MAP_ROUTE: `/map/?zone=${zoneIdSignal}&style=${mapboxStyleSignal}&lon=${mapboxLongitudeSignal}&lat=${mapboxLatitudeSignal}&zoom=${mapboxZoomSignal}&sidebar=${mapSidebarOpenedSignal}`,
      MAP_ISOCHRONE_ROUTE: "/map/isochrone",
      MAP_ISOCHRONE_TIME_WALK_ROUTE: `/map/isochrone/walk?time=${isochromeWalkTimeSignal}`,
    });

  // Step 1: Generate URL with all defaults (no params passed)
  const urlWithDefaults = MAP_ROUTE.buildUrl();
  // Step 2: Change zoom signal to non-default value
  mapboxZoomSignal.value = 15;
  // Step 3: Generate URL again without params to see if changed zoom appears
  const urlAfterZoomChange = MAP_ROUTE.buildUrl();
  const isochroneUrl = MAP_ISOCHRONE_ROUTE.buildUrl();
  const isochroneTimeWalkRoute = MAP_ISOCHRONE_TIME_WALK_ROUTE.buildUrl();

  isochromeWalkTimeSignal.value = 40;
  const isochroneTimeWalkRouteAfterChange =
    MAP_ISOCHRONE_TIME_WALK_ROUTE.buildUrl();

  return {
    map_url_defaults: urlWithDefaults,
    map_url_with_zoom: urlAfterZoomChange,
    map_isochrone_url_with_zoom: isochroneUrl,
    map_isochrone_time_walk_url_with_zoom: isochroneTimeWalkRoute,
    map_isochrone_time_walk_url_after_change:
      isochroneTimeWalkRouteAfterChange,
  };
} finally {
  clearAllRoutes();
  globalSignalRegistry.clear();
}
```

```js
{
  "map_url_defaults": "http://127.0.0.1/map/",
  "map_url_with_zoom": "http://127.0.0.1/map?zoom=15",
  "map_isochrone_url_with_zoom": "http://127.0.0.1/map/isochrone?zoom=15",
  "map_isochrone_time_walk_url_with_zoom": "http://127.0.0.1/map/isochrone/walk?zoom=15",
  "map_isochrone_time_walk_url_after_change": "http://127.0.0.1/map/isochrone/walk?time=40&zoom=15"
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
