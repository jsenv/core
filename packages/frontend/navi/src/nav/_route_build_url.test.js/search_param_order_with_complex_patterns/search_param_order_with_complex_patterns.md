# [search param order with complex patterns](../../route_build_url.test.js#L762)

```js
try {
  const filterSignal = stateSignal("active", { id: "filter" });
  const sortSignal = stateSignal("name", { id: "sort" });
  const pageSignal = stateSignal(1, { id: "page", type: "number" });

  const { SEARCH_ROUTE, SEARCH_RESULTS_ROUTE } = setupRoutes({
    // Parent pattern with some query params
    SEARCH_ROUTE: `/search?filter=${filterSignal}&sort=${sortSignal}`,
    // Child pattern with additional query params
    SEARCH_RESULTS_ROUTE: `/search/results?page=${pageSignal}&limit=20`,
  });

  return {
    patterns: {
      search: "?filter&sort",
      results: "?page&limit",
    },

    // Test buildUrl with different param combinations
    search_no_params: SEARCH_ROUTE.buildUrl(),
    search_partial_params: SEARCH_ROUTE.buildUrl({ sort: "date" }),
    search_with_extras: SEARCH_ROUTE.buildUrl({
      sort: "date",
      extra: "value",
      filter: "inactive",
      another: "param",
    }),

    results_no_params: SEARCH_RESULTS_ROUTE.buildUrl(),
    results_with_extras: SEARCH_RESULTS_ROUTE.buildUrl({
      page: 2,
      custom: "param",
      limit: 50,
      filter: "all", // This should be extra since it's not in results pattern
    }),

    expected_analysis: {
      search_param_order: "filter, sort, then extras alphabetically",
      results_param_order: "page, limit, then extras alphabetically",
      inheritance_note:
        "Child routes don't inherit parent query param order",
    },
  };
} finally {
  clearAllRoutes();
  globalSignalRegistry.clear();
}
```

```js
{
  "patterns": {
    "search": "?filter&sort",
    "results": "?page&limit"
  },
  "search_no_params": "http://127.0.0.1/search",
  "search_partial_params": "http://127.0.0.1/search?sort=date",
  "search_with_extras": "http://127.0.0.1/search?filter=inactive&sort=date&another=param&extra=value",
  "results_no_params": "http://127.0.0.1/search/results",
  "results_with_extras": "http://127.0.0.1/search/results?page=2&limit=50&custom=param&filter=all",
  "expected_analysis": {
    "search_param_order": "filter, sort, then extras alphabetically",
    "results_param_order": "page, limit, then extras alphabetically",
    "inheritance_note": "Child routes don't inherit parent query param order"
  }
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
