# [deepest url generation with search parameters](../../route_build_url.test.js#L372)

```js
clearAllRoutes();
globalSignalRegistry.clear();

// Reproduce dashboard_demo.jsx scenario: parent route with search parameter child
const sectionSignal = stateSignal("settings", { id: "demo_section" });
const analyticsTabSignal = stateSignal("overview", {
  id: "demo_analytics_tab",
});

// Set signals to non-default values to trigger deepest URL generation
sectionSignal.value = "analytics"; // non-default
analyticsTabSignal.value = "details"; // non-default

// Register routes like dashboard_demo.jsx:
// - Admin route with path parameter: /admin/:section/
// - Analytics route with search parameter: /admin/analytics/?tab=signal
const ADMIN_ROUTE = registerRoute(`/admin/:section=${sectionSignal}/`);
const ADMIN_ANALYTICS_ROUTE = registerRoute(
  `/admin/analytics?tab=${analyticsTabSignal}`,
);

return {
  // This should be /admin/analytics/?tab=details (deepest URL with search param)
  admin_route_url: ADMIN_ROUTE.buildUrl({}),
  // For comparison - direct analytics route URL
  analytics_route_url: ADMIN_ANALYTICS_ROUTE.buildUrl({}),
  // Verify signal values
  section_signal: sectionSignal.value,
  analytics_tab_signal: analyticsTabSignal.value,
};
```

```js
{
  "admin_route_url": "http://127.0.0.1/admin/analytics?tab=details",
  "analytics_route_url": "http://127.0.0.1/admin/analytics?tab=details",
  "section_signal": "analytics",
  "analytics_tab_signal": "details"
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
