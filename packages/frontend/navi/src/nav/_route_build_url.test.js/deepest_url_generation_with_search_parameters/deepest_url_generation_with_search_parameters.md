# [deepest url generation with search parameters](../../route_build_url.test.js#L344)

```js
clearAllRoutes();
globalSignalRegistry.clear();

// Simple case: basic path + search parameter variant
const tabSignal = stateSignal("overview", { id: "simple_tab" });
tabSignal.value = "performance"; // non-default

// Register routes: parent without search params, child with search params
const ADMIN_SETTINGS_BASE = registerRoute("/admin/settings/");
const ADMIN_SETTINGS_WITH_TAB = registerRoute(
  `/admin/settings/?tab=${tabSignal}`,
);

return {
  // Parent route should upgrade to child when child has non-default search params
  base_no_params: ADMIN_SETTINGS_BASE.buildUrl({}), // Should become /admin/settings/?tab=performance

  // Child route should work normally
  with_tab_no_params: ADMIN_SETTINGS_WITH_TAB.buildUrl({}), // Should be /admin/settings/?tab=performance
  with_tab_explicit: ADMIN_SETTINGS_WITH_TAB.buildUrl({ tab: "custom" }), // Should be /admin/settings/?tab=custom
  with_tab_default: ADMIN_SETTINGS_WITH_TAB.buildUrl({ tab: "overview" }), // Should be /admin/settings/ (omit default)

  // Verify signal value
  signal_values: {
    tab: tabSignal.value, // "performance" (non-default)
  },
  defaults: {
    tab: "overview",
  },
};
```

```js
{
  "base_no_params": "http://127.0.0.1/admin/settings/?tab=performance",
  "with_tab_no_params": "http://127.0.0.1/admin/settings/?tab=performance",
  "with_tab_explicit": "http://127.0.0.1/admin/settings/?tab=custom",
  "with_tab_default": "http://127.0.0.1/admin/settings/",
  "signal_values": {
    "tab": "performance"
  },
  "defaults": {
    "tab": "overview"
  }
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
