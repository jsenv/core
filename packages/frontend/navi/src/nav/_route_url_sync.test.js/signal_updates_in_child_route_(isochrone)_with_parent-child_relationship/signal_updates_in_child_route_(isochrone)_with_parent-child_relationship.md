# [signal updates in child route (isochrone) with parent-child relationship](../../route_url_sync.test.js#L706)

```js
try {
  const enabledSignal = stateSignal(false, {
    id: "enabled",
    type: "boolean",
  });

  const minuteSignal = stateSignal(30, {
    id: "minute",
    type: "number",
  });

  // Create parent-child route structure with signals on the child
  const { MAP_ROUTE, ISOCHRONE_ROUTE } = setupRoutes({
    MAP_ROUTE: "/map/",
    ISOCHRONE_ROUTE: `/map/isochrone/?enabled=${enabledSignal}&minute=${minuteSignal}`,
  });

  // Start on the isochrone route with default values
  updateRoutes(`${baseUrl}/map/isochrone/?enabled=false&minute=30`);

  const scenario1 = {
    description: "Initial state on isochrone route with defaults",
    enabled_signal: enabledSignal.value,
    minute_signal: minuteSignal.value,
    map_route_matches: MAP_ROUTE.matching,
    isochrone_route_matches: ISOCHRONE_ROUTE.matching,
    current_url: ISOCHRONE_ROUTE.url,
  };

  // Update enabled signal to true (non-default)
  enabledSignal.value = true;

  const scenario2 = {
    description: "After updating enabled signal to true (non-default)",
    enabled_signal: enabledSignal.value,
    minute_signal: minuteSignal.value,
    map_route_matches: MAP_ROUTE.matching,
    isochrone_route_matches: ISOCHRONE_ROUTE.matching,
    current_url: ISOCHRONE_ROUTE.url,
  };

  // Navigate to parent route (map) - this should trigger signal clearing
  updateRoutes(`${baseUrl}/map/`);

  const scenario3 = {
    description: "After navigating to parent route /map/",
    enabled_signal: enabledSignal.value,
    minute_signal: minuteSignal.value,
    map_route_matches: MAP_ROUTE.matching,
    isochrone_route_matches: ISOCHRONE_ROUTE.matching,
    current_url: MAP_ROUTE.url,
  };

  // Navigate back to isochrone
  updateRoutes(`${baseUrl}/map/isochrone/?enabled=true&minute=45`);

  const scenario4 = {
    description: "Navigate back to isochrone with new values",
    enabled_signal: enabledSignal.value,
    minute_signal: minuteSignal.value,
    map_route_matches: MAP_ROUTE.matching,
    isochrone_route_matches: ISOCHRONE_ROUTE.matching,
    current_url: ISOCHRONE_ROUTE.url,
  };

  return {
    scenario1_initial_isochrone: scenario1,
    scenario2_enabled_updated: scenario2,
    scenario3_navigate_to_parent_map: scenario3,
    scenario4_back_to_isochrone: scenario4,

    // Track URL and signal evolution
    url_progression: [
      scenario1.current_url,
      scenario2.current_url,
      scenario3.current_url,
      scenario4.current_url,
    ],

    // Key behaviors to test
    signal_behaviors: {
      signals_update_child_route_url: scenario2.current_url.includes("enabled=true"),
      signals_cleared_when_parent_matches: 
        scenario3.enabled_signal === false && scenario3.minute_signal === 30,
      signals_update_from_new_url: 
        scenario4.enabled_signal === true && scenario4.minute_signal === 45,
    },

    // This is what we expect might fail - parent-child signal clearing
    expected_issue: "Signals should be cleared when navigating from child to parent route",
    route_relationship: "/map/isochrone/ is child of /map/",
  };
} finally {
  clearAllRoutes();
  globalSignalRegistry.clear();
}
```

```js
{
  "scenario1_initial_isochrone": {
    "description": "Initial state on isochrone route with defaults",
    "enabled_signal": false,
    "minute_signal": 30,
    "map_route_matches": true,
    "isochrone_route_matches": true,
    "current_url": "http://127.0.0.1/map/isochrone/"
  },
  "scenario2_enabled_updated": {
    "description": "After updating enabled signal to true (non-default)",
    "enabled_signal": true,
    "minute_signal": 30,
    "map_route_matches": true,
    "isochrone_route_matches": true,
    "current_url": "http://127.0.0.1/map/isochrone?enabled=true"
  },
  "scenario3_navigate_to_parent_map": {
    "description": "After navigating to parent route /map/",
    "map_route_matches": true,
    "isochrone_route_matches": false,
    "current_url": "http://127.0.0.1/map/"
  },
  "scenario4_back_to_isochrone": {
    "description": "Navigate back to isochrone with new values",
    "enabled_signal": true,
    "minute_signal": 45,
    "map_route_matches": true,
    "isochrone_route_matches": true,
    "current_url": "http://127.0.0.1/map/isochrone?enabled=true&minute=45"
  },
  "url_progression": [
    "http://127.0.0.1/map/isochrone/",
    "http://127.0.0.1/map/isochrone?enabled=true",
    "http://127.0.0.1/map/",
    "http://127.0.0.1/map/isochrone?enabled=true&minute=45"
  ],
  "signal_behaviors": {
    "signals_update_child_route_url": true,
    "signals_cleared_when_parent_matches": false,
    "signals_update_from_new_url": true
  },
  "expected_issue": "Signals should be cleared when navigating from child to parent route",
  "route_relationship": "/map/isochrone/ is child of /map/"
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
