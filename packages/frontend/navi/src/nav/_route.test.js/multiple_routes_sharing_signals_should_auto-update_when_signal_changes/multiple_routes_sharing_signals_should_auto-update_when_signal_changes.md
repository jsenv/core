# [multiple routes sharing signals should auto-update when signal changes](../../route.test.js)

```js
try {
  const zoneSignal = stateSignal("paris", { id: "sharedZone" });
  const panelSignal = stateSignal("isochrone", { id: "panel" });
  const isoLonSignal = stateSignal(2.3522, { id: "isoLon" });

  const { MAP_ROUTE, MAP_PANEL_ROUTE, MAP_ISOCHRONE_ROUTE } = setupRoutes({
    MAP_ROUTE: `/map?zone=${zoneSignal}`,
    MAP_PANEL_ROUTE: `/map/:panel=${panelSignal}?zone=${zoneSignal}`,
    MAP_ISOCHRONE_ROUTE: `/map/isochrone?zone=${zoneSignal}&iso_lon=${isoLonSignal}`,
  });

  // Read initial URLs for all routes
  const initialUrls = {
    map: MAP_ROUTE.url,
    panel: MAP_PANEL_ROUTE.url,
    isochrone: MAP_ISOCHRONE_ROUTE.url,
  };

  // Change the shared zone signal
  zoneSignal.value = "london";

  // Change other signals
  panelSignal.value = "settings";
  isoLonSignal.value = 0.1278;

  // Read URLs again - all should reflect the new signal values
  const updatedUrls = {
    map: MAP_ROUTE.url,
    panel: MAP_PANEL_ROUTE.url,
    isochrone: MAP_ISOCHRONE_ROUTE.url,
  };

  return {
    initial_signal_values: {
      zone: "paris",
      panel: "isochrone",
      isoLon: 2.3522,
    },
    updated_signal_values: {
      zone: zoneSignal.value,
      panel: panelSignal.value,
      isoLon: isoLonSignal.value,
    },
    initial_urls: initialUrls,
    updated_urls: updatedUrls,
    url_changes: {
      map_changed: initialUrls.map !== updatedUrls.map,
      panel_changed: initialUrls.panel !== updatedUrls.panel,
      isochrone_changed: initialUrls.isochrone !== updatedUrls.isochrone,
    },
    // All URLs should have changed since we modified signals they depend on
    expected_all_changed: true,
    test_results: {
      map: initialUrls.map !== updatedUrls.map ? "PASS" : "FAIL",
      panel: initialUrls.panel !== updatedUrls.panel ? "PASS" : "FAIL",
      isochrone:
        initialUrls.isochrone !== updatedUrls.isochrone ? "PASS" : "FAIL",
    },
    overall_result:
      initialUrls.map !== updatedUrls.map &&
      initialUrls.panel !== updatedUrls.panel &&
      initialUrls.isochrone !== updatedUrls.isochrone
        ? "PASS"
        : "FAIL",
  };
} finally {
  clearAllRoutes();
  globalSignalRegistry.clear();
}
```

```js
{
  "initial_signal_values": {
    "zone": "paris",
    "panel": "isochrone",
    "isoLon": 2.3522
  },
  "updated_signal_values": {
    "zone": "london",
    "panel": "settings",
    "isoLon": 0.1278
  },
  "initial_urls": {
    "map": "http://127.0.0.1/map",
    "panel": "http://127.0.0.1/map",
    "isochrone": "http://127.0.0.1/map"
  },
  "updated_urls": {
    "map": "http://127.0.0.1/map/settings?zone=london",
    "panel": "http://127.0.0.1/map/settings?zone=london",
    "isochrone": "http://127.0.0.1/map?zone=london&iso_lon=0.1278"
  },
  "url_changes": {
    "map_changed": true,
    "panel_changed": true,
    "isochrone_changed": true
  },
  "expected_all_changed": true,
  "test_results": {
    "map": "PASS",
    "panel": "PASS",
    "isochrone": "PASS"
  },
  "overall_result": "PASS"
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
