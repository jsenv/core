<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:," />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Input radio demo</title>
  </head>
  <body>
    <div id="root" style="position: relative"></div>

    <script type="module" jsenv-type="module/jsx">
      import { render } from "preact";
      import {
        // eslint-disable-next-line no-unused-vars
        Form,
        // eslint-disable-next-line no-unused-vars
        Field,
        // eslint-disable-next-line no-unused-vars
        Input,
        // eslint-disable-next-line no-unused-vars
        Button,
      } from "@jsenv/navi";

      // eslint-disable-next-line no-unused-vars
      const App = () => {
        return (
          <div style="display: flex; flex-direction: row; gap: 30px">
            <div>
              <p>
                <strong>Form + throw after 1s</strong>
              </p>
              <Form
                action={async ({ drone }) => {
                  await new Promise((resolve) => setTimeout(resolve, 1_000));
                  throw new Error(`Drone selected: ${drone}`);
                }}
              >
                <fieldset name="toto">
                  <legend>Select a maintenance drone:</legend>

                  <div>
                    <Field
                      input={
                        <Input
                          type="radio"
                          id="drone"
                          name="drone"
                          value="huey"
                        />
                      }
                      label="Huey"
                    />
                  </div>

                  <div>
                    <Field
                      input={
                        <Input
                          type="radio"
                          id="drone"
                          name="drone"
                          value="dewey"
                        />
                      }
                      label="Dewey"
                    />
                  </div>

                  <div>
                    <Field
                      input={
                        <Input
                          type="radio"
                          id="drone"
                          name="drone"
                          value="louie"
                        />
                      }
                      label="Louie"
                    />
                  </div>
                </fieldset>

                <Button type="submit">Submit</Button>
              </Form>
            </div>
            <div>
              <p>
                <strong>Throw after 1s</strong>
              </p>
              <div>
                <Input
                  type="radio"
                  name="test"
                  value="coucou"
                  id="throw"
                  action={async ({ test }) => {
                    await new Promise((resolve) => {
                      setTimeout(resolve, 1_000);
                    });
                    throw new Error(`This is an error, checked: ${test}`);
                  }}
                  style="color: blue"
                  // data-validation-message-stay-on-focus
                  // data-validation-message-stay-on-blur
                />
              </div>
            </div>
          </div>
        );
      };

      render(<App />, document.querySelector("#root"));
    </script>
  </body>
</html>
