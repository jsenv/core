<!doctype html>
<html>
  <head>
    <title>Simple Callout Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="icon" href="data:," />
    <style>
      body {
        min-height: 300vh; /* Make page scrollable */
        margin: 0;
        padding: 20px;
        font-family: Arial, sans-serif;
        background: linear-gradient(45deg, #f0f8ff, #e6f3ff);
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
      }

      .section {
        margin: 40px 0;
        padding: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .target-element {
        display: inline-block;
        margin: 10px;
        padding: 12px 20px;
        color: white;
        font-size: 16px;
        background: #4caf50;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      .target-element:hover {
        background: #45a049;
      }

      .spacer {
        display: flex;
        height: 200px;
        margin: 40px 0;
        align-items: center;
        justify-content: center;
        color: #666;
        font-weight: bold;
        font-size: 18px;
        background: repeating-linear-gradient(
          45deg,
          transparent,
          transparent 20px,
          rgba(0, 0, 0, 0.1) 20px,
          rgba(0, 0, 0, 0.1) 40px
        );
      }

      .scroll-instruction {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 1000;
        padding: 10px;
        color: white;
        font-size: 14px;
        background: #333;
        border-radius: 4px;
      }

      .scrollable-container {
        width: 100%;
        height: 300px;
        padding: 20px;
        background: #f9f9f9;
        border: 2px solid #ddd;
        border-radius: 8px;
        overflow: auto;
      }

      .scrollable-content {
        display: flex;
        width: 800px;
        height: 600px;
        flex-direction: column;
        align-items: center;
        justify-content: space-around;
        background: repeating-linear-gradient(
          45deg,
          transparent,
          transparent 30px,
          rgba(0, 0, 255, 0.1) 30px,
          rgba(0, 0, 255, 0.1) 60px
        );
      }
    </style>
  </head>
  <body>
    <div class="scroll-instruction">Scroll to test callout positioning</div>

    <div class="container">
      <h1>Simple Callout Demo</h1>
      <p>
        This demo shows how the callout follows its target element during
        scrolling.
      </p>

      <div class="section">
        <h2>Auto-opened Callout</h2>
        <p>This callout opens automatically when the page loads:</p>
        <p>
          <strong
            >Scroll inside the container below to test positioning within a
            scrollable parent:</strong
          >
        </p>
        <div class="scrollable-container">
          <div class="scrollable-content">
            <div>Top of scrollable area</div>
            <button id="auto-target" class="target-element">
              Target Element (Auto-opened message)
            </button>
            <div>Bottom of scrollable area</div>
          </div>
        </div>
      </div>

      <div class="spacer">
        Scroll Area 1 - Keep scrolling to test positioning
      </div>

      <div class="section">
        <h2>Middle Section</h2>
        <p>
          The callout should follow the target element as you scroll past this
          section.
        </p>
      </div>

      <div class="spacer">Scroll Area 2 - More scrolling space</div>

      <div class="section">
        <h2>Another Section</h2>
        <p>
          Continue scrolling to test the message positioning at different scroll
          positions.
        </p>
      </div>

      <div class="spacer">Scroll Area 3 - Bottom section</div>

      <div class="section">
        <h2>Final Section</h2>
        <p>Scroll back up to see how the callout behaves.</p>
      </div>

      <div
        style="
          height: 50vh;
          background: #f0f0f0;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-top: 40px;
        "
      >
        <p>Bottom spacer - scroll back up to see callouts</p>
      </div>
    </div>

    <script type="module">
      import { openCallout } from "@jsenv/navi";

      // Auto-open callout on page load
      window.addEventListener("load", () => {
        const autoTarget = document.getElementById("auto-target");
        openCallout(
          `This is a very long callout that was opened automatically when the page loaded. <strong>Try scrolling both horizontally and vertically</strong> within the container to see how the callout follows the target element! This message is intentionally made very long to test how the positioning system handles callouts that exceed the visible area of their container. The callout should properly position itself even when parts of it would normally be clipped by the container boundaries. You can scroll in any direction - up, down, left, right - to test the robustness of the positioning algorithm. This lengthy content helps verify that the callout system can handle edge cases where the callout content is larger than the available viewport space within scrollable containers.`,
          {
            anchorElement: autoTarget,
            level: "warning",
            debug: true,
            arrow: false,
            canClickThrough: true,
            onClose: () => {
              console.log("Callout was closed");
            },
          },
        );
      });

      console.log(
        "Simple callout demo loaded. Check console for debug output.",
      );
    </script>
  </body>
</html>
