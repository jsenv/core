<!doctype html>
<html>
  <head>
    <title>UITransition Size Demo with Routes</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        box-sizing: border-box;
      }
      html,
      body,
      #root {
        width: 100%;
        height: 100%;
      }

      #root {
        background: rgba(0, 0, 0, 0.5);
      }

      body {
        position: relative;
        margin: 0;
        padding: 0;
        color: white;
        font-family: system-ui;
        background:
          repeating-linear-gradient(
            45deg,
            transparent,
            transparent 100px,
            rgba(0, 0, 0, 0.05) 100px,
            rgba(0, 0, 0, 0.05) 200px
          ),
          linear-gradient(
            45deg,
            rgba(255, 255, 0, 0.8) 0%,
            rgba(255, 255, 0, 0.6) 100%
          );
      }

      body::before {
        position: fixed;
        top: 50%;
        left: 50%;
        z-index: -1;
        color: rgba(0, 0, 0, 0.1);
        font-weight: 900;
        font-size: 8rem;
        letter-spacing: 2rem;
        transform: translate(-50%, -50%) rotate(-45deg);
        pointer-events: none;
        content: "BODY";
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="module" jsenv-type="module/jsx">
      import { render } from "preact";
      import {
        Layout,
        Link,
        Routes,
        Route,
        RouteLink,
        setupRoutes,
        UITransition,
      } from "@jsenv/navi";

      const {
        FIT_ROUTE,
        VIEWPORT_ROUTE,
        VIEWPORT_TALL_ROUTE,
        VIEWPORT_WIDE_ROUTE,
        VIEWPORT_LARGE_ROUTE,
      } = setupRoutes({
        FIT_ROUTE: "",
        VIEWPORT_ROUTE: "viewport",
        VIEWPORT_TALL_ROUTE: "viewport_tall",
        VIEWPORT_WIDE_ROUTE: "viewport_wide",
        VIEWPORT_LARGE_ROUTE: "viewport_large",
      });

      const Nav = () => {
        return (
          <Layout as="nav" row contentSpacing="16" style="position: fixed;">
            <RouteLink route={FIT_ROUTE}>Fit</RouteLink>
            <RouteLink route={VIEWPORT_ROUTE}>Viewport</RouteLink>
            <RouteLink route={VIEWPORT_WIDE_ROUTE}>
              Viewport x scrollbar
            </RouteLink>
            <RouteLink route={VIEWPORT_TALL_ROUTE}>
              Viewport y scrollbar
            </RouteLink>
            <RouteLink route={VIEWPORT_LARGE_ROUTE}>
              Viewport xy scrollbars
            </RouteLink>
          </Layout>
        );
      };

      const RootLayout = () => {
        return (
          <Layout
            as="main"
            id="root_layout"
            width="100%"
            height="100%"
            minWidth="fit-content"
            background="rgba(0, 0, 160, 0.5)"
          >
            <Route.Slot />
          </Layout>
        );
      };
      const FitContentLayout = ({ children }) => {
        return (
          <Layout
            id="fit_content_layout"
            minWidth="300"
            borderRadius="inherit"
            borderRadius="8"
            color="#666"
          >
            {children}
          </Layout>
        );
      };
      const ViewportLayout = ({ children }) => {
        return (
          <Layout
            id="viewport_layout"
            width="100%"
            height="100%"
            minWidth="fit-content"
            row
            borderRadius="0"
            color="#666"
          >
            {children}
          </Layout>
        );
      };

      const FitPage = () => (
        <FitContentLayout>
          <Layout id="fit_page" row contentAlignX="center" contentSpacing="16">
            300x250 with border
          </Layout>
        </FitContentLayout>
      );
      const ViewportPage = () => (
        <ViewportLayout>
          <Layout
            id="viewport_page"
            row
            minWidth="100vw"
            minHeight="100vh"
            contentAlignX="center"
            contentSpacing="16"
            background="white"
            padding="40"
          >
            Full page no border
          </Layout>
        </ViewportLayout>
      );
      const ViewportWidePage = () => (
        <ViewportLayout>
          <Layout
            id="viewport_wide_page"
            contentAlignX="start"
            contentAlignY="center"
            minWidth="150vw"
            contentSpacing="20"
            background="white"
            padding="40"
            color="blue"
            size="lg"
            bold
          >
            Wide Page (150% viewport width)
            <div>Extra content to make sure scrolling is possible</div>
            <div>Extra content to make sure scrolling is possible</div>
            <div>Extra content to make sure scrolling is possible</div>
          </Layout>
        </ViewportLayout>
      );
      const ViewportTallPage = () => (
        <ViewportLayout>
          <Layout
            id="viewport_tall_page"
            minHeight="150vh"
            contentSpacing="20"
            background="white"
            padding="40"
            color="red"
            size="lg"
            bold
          >
            Tall Page (150% viewport height)
          </Layout>
        </ViewportLayout>
      );

      const ViewportLargePage = () => (
        <ViewportLayout>
          <Layout
            id="viewport_large_page"
            column
            contentAlignX="start"
            contentAlignY="start"
            minWidth="150vw"
            minHeight="150vh"
            contentSpacing="30"
            color="purple"
            size="lg"
            bold
          >
            Large Page (150% viewport width AND height)
          </Layout>
        </ViewportLayout>
      );

      const Router = () => {
        return (
          <Routes element={RootLayout}>
            <Route element={<ViewportPage />} route={VIEWPORT_ROUTE} />
            <Route element={<ViewportTallPage />} route={VIEWPORT_TALL_ROUTE} />
            <Route element={<ViewportWidePage />} route={VIEWPORT_WIDE_ROUTE} />
            <Route
              element={<ViewportLargePage />}
              route={VIEWPORT_LARGE_ROUTE}
            />
            <Route element={<FitPage />} fallback />
          </Routes>
        );
      };

      const App = () => {
        return (
          <>
            <Nav />
            <Router />
          </>
        );
      };

      const RouteSlotWrapper = () => {
        return (
          <Layout
            id="route_slot_wrapper"
            column
            contentAlignX="center"
            contentAlignY="center"
            background="white"
            borderRadius="8"
            outline="5px solid orange"
          ></Layout>
        );
      };

      render(<App />, document.querySelector("#root"));
    </script>
  </body>
</html>
