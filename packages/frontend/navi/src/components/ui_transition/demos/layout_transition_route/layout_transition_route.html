<!doctype html>
<html>
  <head>
    <title>UITransition Size Demo with Routes</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        width: 100vw;
        margin: 0;
        padding: 0;
        color: white;
        font-family: system-ui;
        background: #1a1a1a;
      }

      #root {
        width: 100%;
        min-height: 100vh;
      }

      /* box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3); */
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="module" jsenv-type="module/jsx">
      import { render } from "preact";
      import {
        Layout,
        Link,
        Routes,
        Route,
        RouteLink,
        setupRoutes,
        UITransition,
      } from "@jsenv/navi";

      const { SMALL_ROUTE, LARGE_ROUTE, TALL_ROUTE } = setupRoutes({
        SMALL_ROUTE: "",
        LARGE_ROUTE: "large",
        TALL_ROUTE: "tall",
      });

      const RootLayout = () => {
        return (
          <Layout
            column
            width="100%"
            minHeight="100vh"
            contentAlignX="center"
            contentAlignY="center"
            background="#2a2a2a"
          >
            <Layout
              column
              contentAlignX="center"
              contentAlignY="center"
              background="white"
              borderRadius="8"
              outline="5px solid orange"
            >
              <UITransition
                // sizeTransition
                sizeTransitionDuration={1000}
                debugDetection
                debugSize
              >
                <Route.Slot />
              </UITransition>
            </Layout>
          </Layout>
        );
      };
      const FitContentLayout = ({ children }) => {
        return (
          <Layout
            row
            minWidth="300"
            padding="40"
            contentAlignX="center"
            contentAlignY="center"
            borderRadius="inherit"
            borderRadius="8"
            background="white"
            color="#666"
          >
            {children}
          </Layout>
        );
      };
      const ViewportLayout = ({ children }) => {
        return (
          <Layout
            row
            width="100%"
            minHeight="100vh"
            padding="40"
            contentAlignX="center"
            contentAlignY="center"
            borderRadius="0"
            background="white"
            color="#666"
          >
            {children}
          </Layout>
        );
      };

      const HomePage = () => (
        <FitContentLayout>
          <Layout row contentAlignX="center" gap="16">
            <div>300Ã—250 with border</div>
            <RouteLink route={LARGE_ROUTE}>Go to Large Page</RouteLink>
            <RouteLink route={TALL_ROUTE}>
              Go to Tall Page (scrollbars)
            </RouteLink>
          </Layout>
        </FitContentLayout>
      );

      const FirstPage = () => (
        <ViewportLayout>
          <Layout row contentAlignX="center" gap="16">
            <div>Full page no border</div>
            <RouteLink route={SMALL_ROUTE}>Go to Homepage</RouteLink>
            <RouteLink route={TALL_ROUTE}>
              Go to Tall Page (scrollbars)
            </RouteLink>
          </Layout>
        </ViewportLayout>
      );

      const TallPage = () => (
        <ViewportLayout>
          <Layout row contentAlignX="center" minHeight="150vh" gap="20">
            <div style="font-size: 18px; font-weight: bold;">
              Tall Page (150% viewport height)
            </div>
            <div>
              This page is taller than the viewport to test scrollbar behavior.
            </div>
            <div>
              You should see vertical scrollbars when this page is active.
            </div>
            <div style="margin-top: 20px;">
              Scroll down to see more content...
            </div>
            <div style="margin-top: 40px;">More content here...</div>
            <div style="margin-top: 40px;">And even more content...</div>
            <div style="margin-top: 40px;">Keep scrolling...</div>
            <div style="margin-top: 40px;">Almost at the bottom...</div>
            <div style="margin-top: 40px;">Navigation from here:</div>
            <Layout row gap="16">
              <RouteLink route={SMALL_ROUTE}>Go to Homepage</RouteLink>
              <RouteLink route={LARGE_ROUTE}>Go to Large Page</RouteLink>
            </Layout>
          </Layout>
        </ViewportLayout>
      );

      const Router = () => {
        return (
          <Routes element={RootLayout}>
            <Route element={<FirstPage />} route={LARGE_ROUTE} />
            <Route element={<TallPage />} route={TALL_ROUTE} />
            <Route element={<HomePage />} fallback />
          </Routes>
        );
      };

      const App = () => {
        return <Router />;
      };

      render(<App />, document.querySelector("#root"));
    </script>
  </body>
</html>
