<!doctype html>
<html>
  <head>
    <title>UITransition Size Demo with Routes</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
      }

      body {
        margin: 0;
        padding: 0;
        color: white;
        font-family: system-ui;
        background: #1a1a1a;
      }

      #root {
        width: 100%;
        height: 100%;
        background: #1a1a1a;
      }

      /* box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3); */
    </style>
  </head>
  <body>
    <div style="width: 100%; height: 100%; background: orange"></div>
    <div id="root"></div>

    <script type="module" jsenv-type="module/jsx">
      import { render } from "preact";
      import {
        Layout,
        Link,
        Routes,
        Route,
        RouteLink,
        setupRoutes,
        UITransition,
      } from "@jsenv/navi";

      const { FIT_ROUTE, VIEWPORT_ROUTE, VIEWPORT_TALL_ROUTE } = setupRoutes({
        FIT_ROUTE: "",
        VIEWPORT_ROUTE: "viewport",
        VIEWPORT_TALL_ROUTE: "viewport_tall",
      });

      const RootLayout = () => {
        return (
          <Layout
            column
            width="100%"
            minHeight="fit-content"
            height="100%"
            contentAlignX="center"
            contentAlignY="start"
            background="#2a2a2a"
          >
            <Layout
              column
              contentAlignX="center"
              contentAlignY="center"
              background="white"
              borderRadius="8"
              outline="5px solid orange"
            >
              <Route.Slot />
            </Layout>
          </Layout>
        );
      };
      const FitContentLayout = ({ children }) => {
        return (
          <Layout
            row
            minWidth="300"
            padding="40"
            contentAlignX="center"
            contentAlignY="center"
            borderRadius="inherit"
            borderRadius="8"
            background="white"
            color="#666"
          >
            {children}
          </Layout>
        );
      };
      const ViewportLayout = ({ children }) => {
        return (
          <Layout
            row
            width="100%"
            minHeight="fit-content"
            height="100%"
            padding="40"
            contentAlignX="center"
            contentAlignY="center"
            borderRadius="0"
            background="white"
            color="#666"
          >
            {children}
          </Layout>
        );
      };

      const FitPage = () => (
        <FitContentLayout>
          <Layout row contentAlignX="center" gap="16">
            <div>300Ã—250 with border</div>
            <RouteLink route={VIEWPORT_ROUTE}>Viewport page</RouteLink>
            <RouteLink route={VIEWPORT_TALL_ROUTE}>
              Tall Page (scrollbars)
            </RouteLink>
          </Layout>
        </FitContentLayout>
      );

      const ViewportPage = () => (
        <ViewportLayout>
          <Layout row contentAlignX="center" gap="16">
            <div>Full page no border</div>
            <RouteLink route={FIT_ROUTE}>Fit page</RouteLink>
            <RouteLink route={VIEWPORT_TALL_ROUTE}>
              Tall Page (scrollbars)
            </RouteLink>
          </Layout>
        </ViewportLayout>
      );

      const ViewportTallPage = () => (
        <ViewportLayout>
          <Layout
            row
            contentAlignX="center"
            minHeight="150vh"
            contentSpacing="20"
            color="red"
          >
            <div style="font-size: 18px; font-weight: bold;">
              Tall Page (150% viewport height)
            </div>
            <Layout row contentSpacing="16">
              <RouteLink route={FIT_ROUTE}>Fit page</RouteLink>
              <RouteLink route={VIEWPORT_TALL_ROUTE}>
                Tall Page (scrollbars)
              </RouteLink>
            </Layout>
          </Layout>
        </ViewportLayout>
      );

      const Router = () => {
        return (
          <Routes element={RootLayout}>
            <Route element={<ViewportPage />} route={VIEWPORT_ROUTE} />
            <Route element={<ViewportTallPage />} route={VIEWPORT_TALL_ROUTE} />
            <Route element={<FitPage />} fallback />
          </Routes>
        );
      };

      const App = () => {
        return <Router />;
      };

      render(<App />, document.querySelector("#root"));
    </script>
  </body>
</html>
