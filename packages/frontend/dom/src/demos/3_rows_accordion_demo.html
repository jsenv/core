<!doctype html>
<html>
  <head>
    <title>3 rows accordion demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="icon" href="data:," />
  </head>
  <body>
    <style>
      body {
        margin: 0;
      }

      * {
        box-sizing: border-box;
      }

      #app {
        display: flex;
        flex-direction: column;
        height: 300px;
        border: 1px solid black;
        box-sizing: content-box;
        width: 300px;
        margin-left: 200px;
        margin-top: 50px;
      }

      .section {
        min-height: 50px;
      }
    </style>

    <div id="app"></div>

    <script type="module" jsenv-type="module/jsx">
      import "@jsenv/dom/resize";
      import { render } from "preact";
      import { useState } from "preact/hooks";

      // eslint-disable-next-line no-unused-vars
      const App = () => {
        return (
          <div>
            <Section id="a" color="blue" />
            <Section id="b" color="green" />
            <Section id="c" color="red" />
          </div>
        );
      };

      // eslint-disable-next-line no-unused-vars
      const Section = ({ id, color }) => {
        const [opened, setOpened] = useState(false);

        return (
          <div
            className="section"
            id={id}
            data-resize="vertical"
            style={`background: ${color};`}
          >
            <button
              onClick={() => {
                setOpened(!opened);
              }}
            >
              {opened ? "close" : "open"}
            </button>
            <div
              style="background: yellow; height: 10px"
              data-resize-handle={id}
              data-resize-absolute
            ></div>
            {opened && (
              <div style="padding: 20px; width: fit-content; background: lightgray">
                This is the main content area. Lorem ipsum dolor sit amet,
                consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                nostrud exercitation
              </div>
            )}
          </div>
        );
      };

      render(<App />, document.querySelector("#app"));
    </script>
  </body>
</html>
