<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Button Background-Color Demo</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 40px;
        line-height: 1.6;
      }

      .demo-section {
        background: white;
        padding: 20px;
        margin: 20px 0;
        border: 1px solid #ddd;
        border-radius: 8px;
      }

      .result {
        background: #f8f8f8;
        border: 1px solid #ddd;
        padding: 15px;
        margin: 10px 0;
        font-family: monospace;
        font-size: 14px;
      }

      .result h3 {
        margin-top: 0;
        font-family: Arial, sans-serif;
      }

      .color-preview {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 1px solid #333;
        vertical-align: middle;
        margin-left: 8px;
      }

      /* Intentionally style buttons to test isolation */
      button {
        background: red !important;
        color: white !important;
        border: 3px solid blue !important;
        padding: 10px 20px;
        margin: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Button Background-Color Demo</h1>
    <p>
      This demo tests <code>getDefaultStyles('button')</code> and focuses on the
      background-color property.
    </p>

    <div class="demo-section">
      <h2>Styled Button on Page</h2>
      <p>This button is styled with CSS (red background):</p>
      <button>Styled Button</button>
      <p>
        <em
          >The button above should be red, proving our page CSS is working.</em
        >
      </p>
    </div>

    <div class="demo-section">
      <h2>Default Button Background-Color Test</h2>
      <div id="result"></div>
    </div>

    <script type="module">
      import { getDefaultStyles } from "./style_default.js";

      // Make function available globally for onclick
      window.testButtonBackgroundColor = testButtonBackgroundColor;

      function testButtonBackgroundColor() {
        const resultDiv = document.getElementById("result");

        try {
          console.log("Testing button default background-color...");
          const startTime = performance.now();

          // Get default styles for button
          const styles = getDefaultStyles("button");

          const endTime = performance.now();
          const duration = (endTime - startTime).toFixed(2);

          // Extract background-color
          const backgroundColor = styles["background-color"];

          // Display result
          resultDiv.innerHTML = `
                    <div class="result">
                        <h3>Result (${duration}ms)</h3>
                        <p><strong>Element:</strong> button</p>
                        <p><strong>background-color:</strong> <code>${backgroundColor}</code> <span class="color-preview" style="background-color: ${backgroundColor};" title="Color preview: ${backgroundColor}"></span></p>
                        <p><strong>Expected:</strong> Should be a light color (not red), proving CSS isolation works</p>
                        <p><strong>Full styles object keys:</strong> ${Object.keys(styles).length} properties</p>
                    </div>
                `;

          console.log("Button default background-color:", backgroundColor);
          console.log("Full styles object:", styles);
        } catch (error) {
          console.error("Error:", error);
          resultDiv.innerHTML = `
                    <div class="result" style="background: #ffe6e6;">
                        <h3>Error</h3>
                        <p>${error.message}</p>
                    </div>
                `;
        }
      }

      // Auto-run test on page load
      setTimeout(testButtonBackgroundColor, 500);
    </script>
  </body>
</html>
