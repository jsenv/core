<!doctype html>
<html>
  <head>
    <title>Details toggle animation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="icon" href="data:," />
  </head>
  <body>
    <style>
      * {
        box-sizing: border-box;
      }

      #app {
        display: flex;
        flex-direction: row;
      }

      main {
        box-sizing: border-box;

        width: 100px;
        min-width: 200px;
        min-width: 200px; /* Prevents content area from becoming too narrow */
        min-height: 80vh; /* Ensures content area is at least viewport height */
        padding-bottom: 0;
        overflow-x: auto; /* Horizontal scrollbar appears when content is wider than available space */
        scrollbar-gutter: stable; /* Reserves space for scrollbar to prevent layout shifts */
      }

      details {
        width: 100%;
        overflow: hidden;
      }

      details > summary {
        background: lightblue;
        user-select: none;
      }

      details > summary + * {
        background: lightgreen;
      }

      * {
        box-sizing: border-box;
      }
    </style>

    <div id="app">
      <main>
        <details data-details-toggle-animation>
          <summary>First summary</summary>
          <div style="padding: 20px; width: 100%">
            This is the main content area. Lorem ipsum dolor sit amet,
            consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut
            labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
            exercitation
            <button id="add">Add content</button>
          </div>
        </details>
        <details data-details-toggle-animation>
          <summary>Second summary</summary>
          <div style="padding: 20px; width: fit-content">
            This is the main content area. Lorem ipsum dolor sit amet,
            consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut
            labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
            exercitation
          </div>
        </details>
        <details data-details-toggle-animation>
          <summary>Third summary</summary>
          <div style="padding: 20px; width: fit-content">
            This is the main content area. Lorem ipsum dolor sit amet,
            consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut
            labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
            exercitation
          </div>
        </details>
      </main>
    </div>

    <script type="module">
      import "../details_toggle_animation.js";

      const addButton = document.querySelector("#add");
      addButton.onclick = () => {
        const p = document.createElement("p");
        p.textContent =
          "This is some new content added to the details element.";
        addButton.parentNode.appendChild(p);
      };

      const firstDetails = document.querySelector("details");
      firstDetails.ontoggle = () => {
        setTimeout(() => {
          console.log("set details height to 100");
          firstDetails.style.height = "100px";
        }, 200);
      };
    </script>
  </body>
</html>
