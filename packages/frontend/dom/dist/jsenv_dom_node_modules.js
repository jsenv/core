var l$3,
  t$2;
l$3 = {
  __e: function (n, l, u, t) {
    for (var i, r, o; l = l.__;) if ((i = l.__c) && !i.__) try {
      if ((r = i.constructor) && null != r.getDerivedStateFromError && (i.setState(r.getDerivedStateFromError(n)), o = i.__d), null != i.componentDidCatch && (i.componentDidCatch(n, t || {}), o = i.__d), o) return i.__E = i;
    } catch (l) {
      n = l;
    }
    throw n;
  }
}, t$2 = function (n) {
  return null != n && null == n.constructor;
}, "function" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout;

var t$1,
  r$1,
  u$1,
  i$1,
  o$1 = 0,
  f$1 = [],
  c$1 = l$3,
  e$1 = c$1.__b,
  a$1 = c$1.__r,
  v$1 = c$1.diffed,
  l$2 = c$1.__c,
  m$1 = c$1.unmount,
  s$2 = c$1.__;
function p$2(n, t) {
  c$1.__h && c$1.__h(r$1, n, o$1 || t), o$1 = 0;
  var u = r$1.__H || (r$1.__H = {
    __: [],
    __h: []
  });
  return n >= u.__.length && u.__.push({}), u.__[n];
}
function d$1(n) {
  return o$1 = 1, h$1(D, n);
}
function h$1(n, u, i) {
  var o = p$2(t$1++, 2);
  if (o.t = n, !o.__c && (o.__ = [D(void 0, u), function (n) {
    var t = o.__N ? o.__N[0] : o.__[0],
      r = o.t(t, n);
    t !== r && (o.__N = [r, o.__[1]], o.__c.setState({}));
  }], o.__c = r$1, !r$1.__f)) {
    var f = function (n, t, r) {
      if (!o.__c.__H) return true;
      var u = o.__c.__H.__.filter(function (n) {
        return !!n.__c;
      });
      if (u.every(function (n) {
        return !n.__N;
      })) return !c || c.call(this, n, t, r);
      var i = o.__c.props !== n;
      return u.forEach(function (n) {
        if (n.__N) {
          var t = n.__[0];
          n.__ = n.__N, n.__N = void 0, t !== n.__[0] && (i = true);
        }
      }), c && c.call(this, n, t, r) || i;
    };
    r$1.__f = true;
    var c = r$1.shouldComponentUpdate,
      e = r$1.componentWillUpdate;
    r$1.componentWillUpdate = function (n, t, r) {
      if (this.__e) {
        var u = c;
        c = void 0, f(n, t, r), c = u;
      }
      e && e.call(this, n, t, r);
    }, r$1.shouldComponentUpdate = f;
  }
  return o.__N || o.__;
}
function _$2(n, u) {
  var i = p$2(t$1++, 4);
  !c$1.__s && C(i.__H, u) && (i.__ = n, i.u = u, r$1.__h.push(i));
}
function T(n, r) {
  var u = p$2(t$1++, 7);
  return C(u.__H, r) && (u.__ = n(), u.__H = r, u.__h = n), u.__;
}
function j() {
  for (var n; n = f$1.shift();) if (n.__P && n.__H) try {
    n.__H.__h.forEach(z), n.__H.__h.forEach(B), n.__H.__h = [];
  } catch (t) {
    n.__H.__h = [], c$1.__e(t, n.__v);
  }
}
c$1.__b = function (n) {
  r$1 = null, e$1 && e$1(n);
}, c$1.__ = function (n, t) {
  n && t.__k && t.__k.__m && (n.__m = t.__k.__m), s$2 && s$2(n, t);
}, c$1.__r = function (n) {
  a$1 && a$1(n), t$1 = 0;
  var i = (r$1 = n.__c).__H;
  i && (u$1 === r$1 ? (i.__h = [], r$1.__h = [], i.__.forEach(function (n) {
    n.__N && (n.__ = n.__N), n.u = n.__N = void 0;
  })) : (i.__h.forEach(z), i.__h.forEach(B), i.__h = [], t$1 = 0)), u$1 = r$1;
}, c$1.diffed = function (n) {
  v$1 && v$1(n);
  var t = n.__c;
  t && t.__H && (t.__H.__h.length && (1 !== f$1.push(t) && i$1 === c$1.requestAnimationFrame || ((i$1 = c$1.requestAnimationFrame) || w$2)(j)), t.__H.__.forEach(function (n) {
    n.u && (n.__H = n.u), n.u = void 0;
  })), u$1 = r$1 = null;
}, c$1.__c = function (n, t) {
  t.some(function (n) {
    try {
      n.__h.forEach(z), n.__h = n.__h.filter(function (n) {
        return !n.__ || B(n);
      });
    } catch (r) {
      t.some(function (n) {
        n.__h && (n.__h = []);
      }), t = [], c$1.__e(r, n.__v);
    }
  }), l$2 && l$2(n, t);
}, c$1.unmount = function (n) {
  m$1 && m$1(n);
  var t,
    r = n.__c;
  r && r.__H && (r.__H.__.forEach(function (n) {
    try {
      z(n);
    } catch (n) {
      t = n;
    }
  }), r.__H = void 0, t && c$1.__e(t, r.__v));
};
var k$1 = "function" == typeof requestAnimationFrame;
function w$2(n) {
  var t,
    r = function () {
      clearTimeout(u), k$1 && cancelAnimationFrame(t), setTimeout(n);
    },
    u = setTimeout(r, 35);
  k$1 && (t = requestAnimationFrame(r));
}
function z(n) {
  var t = r$1,
    u = n.__c;
  "function" == typeof u && (n.__c = void 0, u()), r$1 = t;
}
function B(n) {
  var t = r$1;
  n.__c = n.__(), r$1 = t;
}
function C(n, t) {
  return !n || n.length !== t.length || t.some(function (t, r) {
    return t !== n[r];
  });
}
function D(n, t) {
  return "function" == typeof t ? t(n) : t;
}

var i = Symbol.for("preact-signals");
function t() {
  if (!(s$1 > 1)) {
    var i,
      t = false;
    while (void 0 !== h) {
      var r = h;
      h = void 0;
      f++;
      while (void 0 !== r) {
        var o = r.o;
        r.o = void 0;
        r.f &= -3;
        if (!(8 & r.f) && c(r)) try {
          r.c();
        } catch (r) {
          if (!t) {
            i = r;
            t = true;
          }
        }
        r = o;
      }
    }
    f = 0;
    s$1--;
    if (t) throw i;
  } else s$1--;
}
function r(i) {
  if (s$1 > 0) return i();
  s$1++;
  try {
    return i();
  } finally {
    t();
  }
}
var o = void 0;
function n(i) {
  var t = o;
  o = void 0;
  try {
    return i();
  } finally {
    o = t;
  }
}
var h = void 0,
  s$1 = 0,
  f = 0,
  v = 0;
function e(i) {
  if (void 0 !== o) {
    var t = i.n;
    if (void 0 === t || t.t !== o) {
      t = {
        i: 0,
        S: i,
        p: o.s,
        n: void 0,
        t: o,
        e: void 0,
        x: void 0,
        r: t
      };
      if (void 0 !== o.s) o.s.n = t;
      o.s = t;
      i.n = t;
      if (32 & o.f) i.S(t);
      return t;
    } else if (-1 === t.i) {
      t.i = 0;
      if (void 0 !== t.n) {
        t.n.p = t.p;
        if (void 0 !== t.p) t.p.n = t.n;
        t.p = o.s;
        t.n = void 0;
        o.s.n = t;
        o.s = t;
      }
      return t;
    }
  }
}
function u(i, t) {
  this.v = i;
  this.i = 0;
  this.n = void 0;
  this.t = void 0;
  this.W = null == t ? void 0 : t.watched;
  this.Z = null == t ? void 0 : t.unwatched;
  this.name = null == t ? void 0 : t.name;
}
u.prototype.brand = i;
u.prototype.h = function () {
  return true;
};
u.prototype.S = function (i) {
  var t = this,
    r = this.t;
  if (r !== i && void 0 === i.e) {
    i.x = r;
    this.t = i;
    if (void 0 !== r) r.e = i;else n(function () {
      var i;
      null == (i = t.W) || i.call(t);
    });
  }
};
u.prototype.U = function (i) {
  var t = this;
  if (void 0 !== this.t) {
    var r = i.e,
      o = i.x;
    if (void 0 !== r) {
      r.x = o;
      i.e = void 0;
    }
    if (void 0 !== o) {
      o.e = r;
      i.x = void 0;
    }
    if (i === this.t) {
      this.t = o;
      if (void 0 === o) n(function () {
        var i;
        null == (i = t.Z) || i.call(t);
      });
    }
  }
};
u.prototype.subscribe = function (i) {
  var t = this;
  return E(function () {
    var r = t.value,
      n = o;
    o = void 0;
    try {
      i(r);
    } finally {
      o = n;
    }
  }, {
    name: "sub"
  });
};
u.prototype.valueOf = function () {
  return this.value;
};
u.prototype.toString = function () {
  return this.value + "";
};
u.prototype.toJSON = function () {
  return this.value;
};
u.prototype.peek = function () {
  var i = o;
  o = void 0;
  try {
    return this.value;
  } finally {
    o = i;
  }
};
Object.defineProperty(u.prototype, "value", {
  get: function () {
    var i = e(this);
    if (void 0 !== i) i.i = this.i;
    return this.v;
  },
  set: function (i) {
    if (i !== this.v) {
      if (f > 100) throw new Error("Cycle detected");
      this.v = i;
      this.i++;
      v++;
      s$1++;
      try {
        for (var r = this.t; void 0 !== r; r = r.x) r.t.N();
      } finally {
        t();
      }
    }
  }
});
function d(i, t) {
  return new u(i, t);
}
function c(i) {
  for (var t = i.s; void 0 !== t; t = t.n) if (t.S.i !== t.i || !t.S.h() || t.S.i !== t.i) return true;
  return false;
}
function a(i) {
  for (var t = i.s; void 0 !== t; t = t.n) {
    var r = t.S.n;
    if (void 0 !== r) t.r = r;
    t.S.n = t;
    t.i = -1;
    if (void 0 === t.n) {
      i.s = t;
      break;
    }
  }
}
function l$1(i) {
  var t = i.s,
    r = void 0;
  while (void 0 !== t) {
    var o = t.p;
    if (-1 === t.i) {
      t.S.U(t);
      if (void 0 !== o) o.n = t.n;
      if (void 0 !== t.n) t.n.p = o;
    } else r = t;
    t.S.n = t.r;
    if (void 0 !== t.r) t.r = void 0;
    t = o;
  }
  i.s = r;
}
function y(i, t) {
  u.call(this, void 0);
  this.x = i;
  this.s = void 0;
  this.g = v - 1;
  this.f = 4;
  this.W = null == t ? void 0 : t.watched;
  this.Z = null == t ? void 0 : t.unwatched;
  this.name = null == t ? void 0 : t.name;
}
y.prototype = new u();
y.prototype.h = function () {
  this.f &= -3;
  if (1 & this.f) return false;
  if (32 == (36 & this.f)) return true;
  this.f &= -5;
  if (this.g === v) return true;
  this.g = v;
  this.f |= 1;
  if (this.i > 0 && !c(this)) {
    this.f &= -2;
    return true;
  }
  var i = o;
  try {
    a(this);
    o = this;
    var t = this.x();
    if (16 & this.f || this.v !== t || 0 === this.i) {
      this.v = t;
      this.f &= -17;
      this.i++;
    }
  } catch (i) {
    this.v = i;
    this.f |= 16;
    this.i++;
  }
  o = i;
  l$1(this);
  this.f &= -2;
  return true;
};
y.prototype.S = function (i) {
  if (void 0 === this.t) {
    this.f |= 36;
    for (var t = this.s; void 0 !== t; t = t.n) t.S.S(t);
  }
  u.prototype.S.call(this, i);
};
y.prototype.U = function (i) {
  if (void 0 !== this.t) {
    u.prototype.U.call(this, i);
    if (void 0 === this.t) {
      this.f &= -33;
      for (var t = this.s; void 0 !== t; t = t.n) t.S.U(t);
    }
  }
};
y.prototype.N = function () {
  if (!(2 & this.f)) {
    this.f |= 6;
    for (var i = this.t; void 0 !== i; i = i.x) i.t.N();
  }
};
Object.defineProperty(y.prototype, "value", {
  get: function () {
    if (1 & this.f) throw new Error("Cycle detected");
    var i = e(this);
    this.h();
    if (void 0 !== i) i.i = this.i;
    if (16 & this.f) throw this.v;
    return this.v;
  }
});
function w$1(i, t) {
  return new y(i, t);
}
function _$1(i) {
  var r = i.u;
  i.u = void 0;
  if ("function" == typeof r) {
    s$1++;
    var n = o;
    o = void 0;
    try {
      r();
    } catch (t) {
      i.f &= -2;
      i.f |= 8;
      b$1(i);
      throw t;
    } finally {
      o = n;
      t();
    }
  }
}
function b$1(i) {
  for (var t = i.s; void 0 !== t; t = t.n) t.S.U(t);
  i.x = void 0;
  i.s = void 0;
  _$1(i);
}
function g$1(i) {
  if (o !== this) throw new Error("Out-of-order effect");
  l$1(this);
  o = i;
  this.f &= -2;
  if (8 & this.f) b$1(this);
  t();
}
function p$1(i, t) {
  this.x = i;
  this.u = void 0;
  this.s = void 0;
  this.o = void 0;
  this.f = 32;
  this.name = null == t ? void 0 : t.name;
}
p$1.prototype.c = function () {
  var i = this.S();
  try {
    if (8 & this.f) return;
    if (void 0 === this.x) return;
    var t = this.x();
    if ("function" == typeof t) this.u = t;
  } finally {
    i();
  }
};
p$1.prototype.S = function () {
  if (1 & this.f) throw new Error("Cycle detected");
  this.f |= 1;
  this.f &= -9;
  _$1(this);
  a(this);
  s$1++;
  var i = o;
  o = this;
  return g$1.bind(this, i);
};
p$1.prototype.N = function () {
  if (!(2 & this.f)) {
    this.f |= 2;
    this.o = h;
    h = this;
  }
};
p$1.prototype.d = function () {
  this.f |= 8;
  if (!(1 & this.f)) b$1(this);
};
p$1.prototype.dispose = function () {
  this.d();
};
function E(i, t) {
  var r = new p$1(i, t);
  try {
    r.c();
  } catch (i) {
    r.d();
    throw i;
  }
  var o = r.d.bind(r);
  o[Symbol.dispose] = o;
  return o;
}

var s,
  l,
  p = [];
E(function () {
  s = this.N;
})();
function m(i, r) {
  l$3[i] = r.bind(null, l$3[i] || function () {});
}
function _(i) {
  if (l) l();
  l = i && i.S();
}
function g(i) {
  var n = this,
    f = i.data,
    o = useSignal(f);
  o.value = f;
  var u = T(function () {
      var i = n,
        t = n.__v;
      while (t = t.__) if (t.__c) {
        t.__c.__$f |= 4;
        break;
      }
      var f = w$1(function () {
          var i = o.value.value;
          return 0 === i ? 0 : true === i ? "" : i || "";
        }),
        u = w$1(function () {
          return !Array.isArray(f.value) && !t$2(f.value);
        }),
        c = E(function () {
          this.N = F;
          if (u.value) {
            var n = f.value;
            if (i.__v && i.__v.__e && 3 === i.__v.__e.nodeType) i.__v.__e.data = n;
          }
        }),
        v = n.__$u.d;
      n.__$u.d = function () {
        c();
        v.call(this);
      };
      return [u, f];
    }, []),
    c = u[0],
    v = u[1];
  return c.value ? v.peek() : v.value;
}
g.displayName = "_st";
Object.defineProperties(u.prototype, {
  constructor: {
    configurable: true,
    value: void 0
  },
  type: {
    configurable: true,
    value: g
  },
  props: {
    configurable: true,
    get: function () {
      return {
        data: this
      };
    }
  },
  __b: {
    configurable: true,
    value: 1
  }
});
m("__b", function (i, n) {
  if ("string" == typeof n.type) {
    var r,
      t = n.props;
    for (var f in t) if ("children" !== f) {
      var o = t[f];
      if (o instanceof u) {
        if (!r) n.__np = r = {};
        r[f] = o;
        t[f] = o.peek();
      }
    }
  }
  i(n);
});
m("__r", function (i, n) {
  _();
  var r,
    t = n.__c;
  if (t) {
    t.__$f &= -2;
    if (void 0 === (r = t.__$u)) t.__$u = r = function (i) {
      var n;
      E(function () {
        n = this;
      });
      n.c = function () {
        t.__$f |= 1;
        t.setState({});
      };
      return n;
    }();
  }
  _(r);
  i(n);
});
m("__e", function (i, n, r, t) {
  _();
  i(n, r, t);
});
m("diffed", function (i, n) {
  _();
  var r;
  if ("string" == typeof n.type && (r = n.__e)) {
    var t = n.__np,
      f = n.props;
    if (t) {
      var o = r.U;
      if (o) for (var e in o) {
        var u = o[e];
        if (void 0 !== u && !(e in t)) {
          u.d();
          o[e] = void 0;
        }
      } else {
        o = {};
        r.U = o;
      }
      for (var a in t) {
        var c = o[a],
          v = t[a];
        if (void 0 === c) {
          c = b(r, a, v, f);
          o[a] = c;
        } else c.o(v, f);
      }
    }
  }
  i(n);
});
function b(i, n, r, t) {
  var f = n in i && void 0 === i.ownerSVGElement,
    o = d(r);
  return {
    o: function (i, n) {
      o.value = i;
      t = n;
    },
    d: E(function () {
      this.N = F;
      var r = o.value.value;
      if (t[n] !== r) {
        t[n] = r;
        if (f) i[n] = r;else if (r) i.setAttribute(n, r);else i.removeAttribute(n);
      }
    })
  };
}
m("unmount", function (i, n) {
  if ("string" == typeof n.type) {
    var r = n.__e;
    if (r) {
      var t = r.U;
      if (t) {
        r.U = void 0;
        for (var f in t) {
          var o = t[f];
          if (o) o.d();
        }
      }
    }
  } else {
    var e = n.__c;
    if (e) {
      var u = e.__$u;
      if (u) {
        e.__$u = void 0;
        u.d();
      }
    }
  }
  i(n);
});
m("__h", function (i, n, r, t) {
  if (t < 3 || 9 === t) n.__$f |= 2;
  i(n, r, t);
});
function useSignal(i) {
  return T(function () {
    return d(i);
  }, []);
}
var k = function (i) {
    queueMicrotask(function () {
      queueMicrotask(i);
    });
  };
function w() {
  r(function () {
    var i;
    while (i = p.shift()) s.call(i);
  });
}
function F() {
  if (1 === p.push(this)) (l$3.requestAnimationFrame || k)(w);
}

export { E, _$2 as _, d, d$1 };