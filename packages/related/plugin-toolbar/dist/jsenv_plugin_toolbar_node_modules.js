var n$1,
  u$2;
function k$1(n) {
  return n.children;
}
n$1 = {
  __e: function (n, l, u, t) {
    for (var i, f, e; l = l.__;) if ((i = l.__c) && !(1 & i.__g)) {
      i.__g |= 4;
      try {
        if ((f = i.constructor) && null != f.getDerivedStateFromError && (i.setState(f.getDerivedStateFromError(n)), e = 8 & i.__g), null != i.componentDidCatch && (i.componentDidCatch(n, t || {}), e = 8 & i.__g), e) return void (i.__g |= 2);
      } catch (l) {
        n = l;
      }
    }
    throw n;
  }
}, u$2 = function (n) {
  return null != n && null == n.constructor;
};

var t$1,
  r,
  u$1,
  i$1,
  o$1 = Object.is,
  f$1 = 0,
  c$1 = [],
  e$1 = n$1,
  a$1 = e$1.__b,
  v$1 = e$1.__r,
  l$1 = e$1.diffed,
  m$2 = e$1.__c,
  s$1 = e$1.unmount,
  p$1 = e$1.__;
function d$2(n, t) {
  e$1.__h && e$1.__h(r, n, f$1 || t), f$1 = 0;
  var u = r.__H || (r.__H = {
    __: [],
    __h: []
  });
  return n >= u.__.length && u.__.push({}), u.__[n];
}
function q$1(n, r) {
  var u = d$2(t$1++, 7);
  return C(u.__H, r) && (u.__ = n(), u.__H = r, u.__h = n), u.__;
}
function g$2() {
  for (var n; n = c$1.shift();) if (n.__P && n.__H) try {
    n.__H.__h.forEach(z), n.__H.__h.forEach(B), n.__H.__h = [];
  } catch (t) {
    n.__H.__h = [], e$1.__e(t, n.__v);
  }
}
e$1.__b = function (n) {
  r = null, a$1 && a$1(n);
}, e$1.__ = function (n, t) {
  n && t.__k && t.__k.__m && (n.__m = t.__k.__m), p$1 && p$1(n, t);
}, e$1.__r = function (n) {
  v$1 && v$1(n), t$1 = 0;
  var i = (r = n.__c).__H;
  i && (u$1 === r ? (i.__h = [], r.__h = [], i.__.forEach(function (n) {
    n.__N && (n.__ = n.__N), n.u = n.__N = void 0;
  })) : (i.__h.forEach(z), i.__h.forEach(B), i.__h = [], t$1 = 0)), u$1 = r;
}, e$1.diffed = function (n) {
  l$1 && l$1(n);
  var t = n.__c;
  t && t.__H && (t.__H.__h.length && (1 !== c$1.push(t) && i$1 === e$1.requestAnimationFrame || ((i$1 = e$1.requestAnimationFrame) || w$2)(g$2)), t.__H.__.forEach(function (n) {
    n.u && (n.__H = n.u), n.u = void 0;
  })), u$1 = r = null;
}, e$1.__c = function (n, t) {
  t.some(function (n) {
    try {
      n.__h.forEach(z), n.__h = n.__h.filter(function (n) {
        return !n.__ || B(n);
      });
    } catch (r) {
      t.some(function (n) {
        n.__h && (n.__h = []);
      }), t = [], e$1.__e(r, n.__v);
    }
  }), m$2 && m$2(n, t);
}, e$1.unmount = function (n) {
  s$1 && s$1(n);
  var t,
    r = n.__c;
  r && r.__H && (r.__H.__.forEach(function (n) {
    try {
      z(n);
    } catch (n) {
      t = n;
    }
  }), r.__H = void 0, t && e$1.__e(t, r.__v));
};
var k = "function" == typeof requestAnimationFrame;
function w$2(n) {
  var t,
    r = function () {
      clearTimeout(u), k && cancelAnimationFrame(t), setTimeout(n);
    },
    u = setTimeout(r, 35);
  k && (t = requestAnimationFrame(r));
}
function z(n) {
  var t = r,
    u = n.__c;
  "function" == typeof u && (n.__c = void 0, u()), r = t;
}
function B(n) {
  var t = r;
  n.__c = n.__(), r = t;
}
function C(n, t) {
  return !n || n.length !== t.length || t.some(function (t, r) {
    return !o$1(t, n[r]);
  });
}

const i = Symbol.for("preact-signals");
function t() {
  if (f > 1) {
    f--;
    return;
  }
  let i,
    t = false;
  while (void 0 !== s) {
    let n = s;
    s = void 0;
    e++;
    while (void 0 !== n) {
      const o = n.o;
      n.o = void 0;
      n.f &= -3;
      if (!(8 & n.f) && l(n)) try {
        n.c();
      } catch (n) {
        if (!t) {
          i = n;
          t = true;
        }
      }
      n = o;
    }
  }
  e = 0;
  f--;
  if (t) throw i;
}
function n(i) {
  if (f > 0) return i();
  f++;
  try {
    return i();
  } finally {
    t();
  }
}
let o, s;
function h$1(i) {
  const t = o;
  o = void 0;
  try {
    return i();
  } finally {
    o = t;
  }
}
let f = 0,
  e = 0,
  u = 0;
function c(i) {
  if (void 0 === o) return;
  let t = i.n;
  if (void 0 === t || t.t !== o) {
    t = {
      i: 0,
      S: i,
      p: o.s,
      n: void 0,
      t: o,
      e: void 0,
      x: void 0,
      r: t
    };
    if (void 0 !== o.s) o.s.n = t;
    o.s = t;
    i.n = t;
    if (32 & o.f) i.S(t);
    return t;
  } else if (-1 === t.i) {
    t.i = 0;
    if (void 0 !== t.n) {
      t.n.p = t.p;
      if (void 0 !== t.p) t.p.n = t.n;
      t.p = o.s;
      t.n = void 0;
      o.s.n = t;
      o.s = t;
    }
    return t;
  }
}
function d$1(i, t) {
  this.v = i;
  this.i = 0;
  this.n = void 0;
  this.t = void 0;
  this.W = null == t ? void 0 : t.watched;
  this.Z = null == t ? void 0 : t.unwatched;
  this.name = null == t ? void 0 : t.name;
}
d$1.prototype.brand = i;
d$1.prototype.h = function () {
  return true;
};
d$1.prototype.S = function (i) {
  const t = this.t;
  if (t !== i && void 0 === i.e) {
    i.x = t;
    this.t = i;
    if (void 0 !== t) t.e = i;else h$1(() => {
      var i;
      null == (i = this.W) || i.call(this);
    });
  }
};
d$1.prototype.U = function (i) {
  if (void 0 !== this.t) {
    const t = i.e,
      n = i.x;
    if (void 0 !== t) {
      t.x = n;
      i.e = void 0;
    }
    if (void 0 !== n) {
      n.e = t;
      i.x = void 0;
    }
    if (i === this.t) {
      this.t = n;
      if (void 0 === n) h$1(() => {
        var i;
        null == (i = this.Z) || i.call(this);
      });
    }
  }
};
d$1.prototype.subscribe = function (i) {
  return m$1(() => {
    const t = this.value,
      n = o;
    o = void 0;
    try {
      i(t);
    } finally {
      o = n;
    }
  }, {
    name: "sub"
  });
};
d$1.prototype.valueOf = function () {
  return this.value;
};
d$1.prototype.toString = function () {
  return this.value + "";
};
d$1.prototype.toJSON = function () {
  return this.value;
};
d$1.prototype.peek = function () {
  const i = o;
  o = void 0;
  try {
    return this.value;
  } finally {
    o = i;
  }
};
Object.defineProperty(d$1.prototype, "value", {
  get() {
    const i = c(this);
    if (void 0 !== i) i.i = this.i;
    return this.v;
  },
  set(i) {
    if (i !== this.v) {
      if (e > 100) throw new Error("Cycle detected");
      this.v = i;
      this.i++;
      u++;
      f++;
      try {
        for (let i = this.t; void 0 !== i; i = i.x) i.t.N();
      } finally {
        t();
      }
    }
  }
});
function v(i, t) {
  return new d$1(i, t);
}
function l(i) {
  for (let t = i.s; void 0 !== t; t = t.n) if (t.S.i !== t.i || !t.S.h() || t.S.i !== t.i) return true;
  return false;
}
function y$1(i) {
  for (let t = i.s; void 0 !== t; t = t.n) {
    const n = t.S.n;
    if (void 0 !== n) t.r = n;
    t.S.n = t;
    t.i = -1;
    if (void 0 === t.n) {
      i.s = t;
      break;
    }
  }
}
function a(i) {
  let t,
    n = i.s;
  while (void 0 !== n) {
    const i = n.p;
    if (-1 === n.i) {
      n.S.U(n);
      if (void 0 !== i) i.n = n.n;
      if (void 0 !== n.n) n.n.p = i;
    } else t = n;
    n.S.n = n.r;
    if (void 0 !== n.r) n.r = void 0;
    n = i;
  }
  i.s = t;
}
function w$1(i, t) {
  d$1.call(this, void 0);
  this.x = i;
  this.s = void 0;
  this.g = u - 1;
  this.f = 4;
  this.W = null == t ? void 0 : t.watched;
  this.Z = null == t ? void 0 : t.unwatched;
  this.name = null == t ? void 0 : t.name;
}
w$1.prototype = new d$1();
w$1.prototype.h = function () {
  this.f &= -3;
  if (1 & this.f) return false;
  if (32 == (36 & this.f)) return true;
  this.f &= -5;
  if (this.g === u) return true;
  this.g = u;
  this.f |= 1;
  if (this.i > 0 && !l(this)) {
    this.f &= -2;
    return true;
  }
  const i = o;
  try {
    y$1(this);
    o = this;
    const i = this.x();
    if (16 & this.f || this.v !== i || 0 === this.i) {
      this.v = i;
      this.f &= -17;
      this.i++;
    }
  } catch (i) {
    this.v = i;
    this.f |= 16;
    this.i++;
  }
  o = i;
  a(this);
  this.f &= -2;
  return true;
};
w$1.prototype.S = function (i) {
  if (void 0 === this.t) {
    this.f |= 36;
    for (let i = this.s; void 0 !== i; i = i.n) i.S.S(i);
  }
  d$1.prototype.S.call(this, i);
};
w$1.prototype.U = function (i) {
  if (void 0 !== this.t) {
    d$1.prototype.U.call(this, i);
    if (void 0 === this.t) {
      this.f &= -33;
      for (let i = this.s; void 0 !== i; i = i.n) i.S.U(i);
    }
  }
};
w$1.prototype.N = function () {
  if (!(2 & this.f)) {
    this.f |= 6;
    for (let i = this.t; void 0 !== i; i = i.x) i.t.N();
  }
};
Object.defineProperty(w$1.prototype, "value", {
  get() {
    if (1 & this.f) throw new Error("Cycle detected");
    const i = c(this);
    this.h();
    if (void 0 !== i) i.i = this.i;
    if (16 & this.f) throw this.v;
    return this.v;
  }
});
function b$1(i, t) {
  return new w$1(i, t);
}
function _$1(i) {
  const n = i.u;
  i.u = void 0;
  if ("function" == typeof n) {
    f++;
    const s = o;
    o = void 0;
    try {
      n();
    } catch (t) {
      i.f &= -2;
      i.f |= 8;
      p(i);
      throw t;
    } finally {
      o = s;
      t();
    }
  }
}
function p(i) {
  for (let t = i.s; void 0 !== t; t = t.n) t.S.U(t);
  i.x = void 0;
  i.s = void 0;
  _$1(i);
}
function g$1(i) {
  if (o !== this) throw new Error("Out-of-order effect");
  a(this);
  o = i;
  this.f &= -2;
  if (8 & this.f) p(this);
  t();
}
function S(i, t) {
  this.x = i;
  this.u = void 0;
  this.s = void 0;
  this.o = void 0;
  this.f = 32;
  this.name = null == t ? void 0 : t.name;
}
S.prototype.c = function () {
  const i = this.S();
  try {
    if (8 & this.f) return;
    if (void 0 === this.x) return;
    const t = this.x();
    if ("function" == typeof t) this.u = t;
  } finally {
    i();
  }
};
S.prototype.S = function () {
  if (1 & this.f) throw new Error("Cycle detected");
  this.f |= 1;
  this.f &= -9;
  _$1(this);
  y$1(this);
  f++;
  const i = o;
  o = this;
  return g$1.bind(this, i);
};
S.prototype.N = function () {
  if (!(2 & this.f)) {
    this.f |= 2;
    this.o = s;
    s = this;
  }
};
S.prototype.d = function () {
  this.f |= 8;
  if (!(1 & this.f)) p(this);
};
S.prototype.dispose = function () {
  this.d();
};
function m$1(i, t) {
  const n = new S(i, t);
  try {
    n.c();
  } catch (i) {
    n.d();
    throw i;
  }
  const o = n.d.bind(n);
  o[Symbol.dispose] = o;
  return o;
}

const h = "undefined" != typeof window && !!window.__PREACT_SIGNALS_DEVTOOLS__;
let d,
  m,
  _ = [];
m$1(function () {
  d = this.N;
})();
function g(t, n) {
  n$1[t] = n.bind(null, n$1[t] || (() => {}));
}
function b(t) {
  if (m) m();
  m = t && t.S();
}
function y({
  data: t
}) {
  const i = useSignal(t);
  i.value = t;
  const [e, f] = q$1(() => {
    let t = this,
      e = this.__v;
    while (e = e.__) if (e.__c) {
      e.__c.__$f |= 4;
      break;
    }
    const o = b$1(() => {
        let t = i.value.value;
        return 0 === t ? 0 : true === t ? "" : t || "";
      }),
      f = b$1(() => !Array.isArray(o.value) && !u$2(o.value)),
      r = m$1(function () {
        this.N = F;
        if (f.value) {
          const i = o.value;
          if (t.__v && t.__v.__e && 3 === t.__v.__e.nodeType) t.__v.__e.data = i;
        }
      }),
      s = this.__$u.d;
    this.__$u.d = function () {
      r();
      s.call(this);
    };
    return [f, o];
  }, []);
  return e.value ? f.peek() : f.value;
}
y.displayName = "ReactiveTextNode";
Object.defineProperties(d$1.prototype, {
  constructor: {
    configurable: true,
    value: void 0
  },
  type: {
    configurable: true,
    value: y
  },
  props: {
    configurable: true,
    get() {
      return {
        data: this
      };
    }
  },
  __b: {
    configurable: true,
    value: 1
  }
});
g("__b", (t, i) => {
  if ("string" == typeof i.type) {
    let t,
      n = i.props;
    for (let e in n) {
      if ("children" === e) continue;
      let o = n[e];
      if (o instanceof d$1) {
        if (!t) i.__np = t = {};
        t[e] = o;
        n[e] = o.peek();
      }
    }
  }
  t(i);
});
g("__r", (t, i) => {
  if (i.type !== k$1) {
    b();
    let t,
      n = i.__c;
    if (n) {
      n.__$f &= -2;
      t = n.__$u;
      if (void 0 === t) n.__$u = t = function (t, i) {
        let n;
        m$1(function () {
          n = this;
        }, {
          name: i
        });
        n.c = t;
        return n;
      }(() => {
        var i;
        if (h) null == (i = t.y) || i.call(t);
        n.__$f |= 1;
        n.setState({});
      }, "function" == typeof i.type ? i.type.displayName || i.type.name : "");
    }
    b(t);
  }
  t(i);
});
g("__e", (t, i, n, e) => {
  b();
  t(i, n, e);
});
g("diffed", (t, i) => {
  b();
  let n;
  if ("string" == typeof i.type && (n = i.__e)) {
    let t = i.__np,
      e = i.props;
    if (t) {
      let i = n.U;
      if (i) for (let n in i) {
        let e = i[n];
        if (void 0 !== e && !(n in t)) {
          e.d();
          i[n] = void 0;
        }
      } else {
        i = {};
        n.U = i;
      }
      for (let o in t) {
        let f = i[o],
          r = t[o];
        if (void 0 === f) {
          f = w(n, o, r, e);
          i[o] = f;
        } else f.o(r, e);
      }
    }
  }
  t(i);
});
function w(t, i, n, e) {
  const o = i in t && void 0 === t.ownerSVGElement,
    f = v(n);
  return {
    o: (t, i) => {
      f.value = t;
      e = i;
    },
    d: m$1(function () {
      this.N = F;
      const n = f.value.value;
      if (e[i] !== n) {
        e[i] = n;
        if (o) t[i] = n;else if (null != n && (false !== n || "-" === i[4])) t.setAttribute(i, n);else t.removeAttribute(i);
      }
    })
  };
}
g("unmount", (t, i) => {
  if ("string" == typeof i.type) {
    let t = i.__e;
    if (t) {
      const i = t.U;
      if (i) {
        t.U = void 0;
        for (let t in i) {
          let n = i[t];
          if (n) n.d();
        }
      }
    }
  } else {
    let t = i.__c;
    if (t) {
      const i = t.__$u;
      if (i) {
        t.__$u = void 0;
        i.d();
      }
    }
  }
  t(i);
});
g("__h", (t, i, n, e) => {
  if (e < 3 || 9 === e) i.__$f |= 2;
  t(i, n, e);
});
function useSignal(t, i) {
  return q$1(() => v(t, i), []);
}
const q = t => {
    queueMicrotask(() => {
      queueMicrotask(t);
    });
  };
function x() {
  n(() => {
    let t;
    while (t = _.shift()) d.call(t);
  });
}
function F() {
  if (1 === _.push(this)) (n$1.requestAnimationFrame || q)(x);
}

export { b$1 as b, m$1 as m, v };
