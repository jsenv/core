var l$2,
  t$2;
function k$1(n) {
  return n.children;
}
l$2 = {
  __e: function (n, l, u, t) {
    for (var i, r, o; l = l.__;) if ((i = l.__c) && !i.__) try {
      if ((r = i.constructor) && null != r.getDerivedStateFromError && (i.setState(r.getDerivedStateFromError(n)), o = i.__d), null != i.componentDidCatch && (i.componentDidCatch(n, t || {}), o = i.__d), o) return i.__E = i;
    } catch (l) {
      n = l;
    }
    throw n;
  }
}, t$2 = function (n) {
  return null != n && null == n.constructor;
}, "function" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout;

var t$1,
  r$1,
  u$1,
  i$1,
  o$1 = 0,
  f$1 = [],
  c$1 = l$2,
  e$1 = c$1.__b,
  a$1 = c$1.__r,
  v$2 = c$1.diffed,
  l$1 = c$1.__c,
  m = c$1.unmount,
  s$1 = c$1.__;
function p$1(n, t) {
  c$1.__h && c$1.__h(r$1, n, o$1 || t), o$1 = 0;
  var u = r$1.__H || (r$1.__H = {
    __: [],
    __h: []
  });
  return n >= u.__.length && u.__.push({}), u.__[n];
}
function d$1(n) {
  return o$1 = 1, h$2(D, n);
}
function h$2(n, u, i) {
  var o = p$1(t$1++, 2);
  if (o.t = n, !o.__c && (o.__ = [D(void 0, u), function (n) {
    var t = o.__N ? o.__N[0] : o.__[0],
      r = o.t(t, n);
    t !== r && (o.__N = [r, o.__[1]], o.__c.setState({}));
  }], o.__c = r$1, !r$1.__f)) {
    var f = function (n, t, r) {
      if (!o.__c.__H) return true;
      var u = o.__c.__H.__.filter(function (n) {
        return !!n.__c;
      });
      if (u.every(function (n) {
        return !n.__N;
      })) return !c || c.call(this, n, t, r);
      var i = o.__c.props !== n;
      return u.forEach(function (n) {
        if (n.__N) {
          var t = n.__[0];
          n.__ = n.__N, n.__N = void 0, t !== n.__[0] && (i = true);
        }
      }), c && c.call(this, n, t, r) || i;
    };
    r$1.__f = true;
    var c = r$1.shouldComponentUpdate,
      e = r$1.componentWillUpdate;
    r$1.componentWillUpdate = function (n, t, r) {
      if (this.__e) {
        var u = c;
        c = void 0, f(n, t, r), c = u;
      }
      e && e.call(this, n, t, r);
    }, r$1.shouldComponentUpdate = f;
  }
  return o.__N || o.__;
}
function T(n, r) {
  var u = p$1(t$1++, 7);
  return C(u.__H, r) && (u.__ = n(), u.__H = r, u.__h = n), u.__;
}
function j() {
  for (var n; n = f$1.shift();) if (n.__P && n.__H) try {
    n.__H.__h.forEach(z), n.__H.__h.forEach(B), n.__H.__h = [];
  } catch (t) {
    n.__H.__h = [], c$1.__e(t, n.__v);
  }
}
c$1.__b = function (n) {
  r$1 = null, e$1 && e$1(n);
}, c$1.__ = function (n, t) {
  n && t.__k && t.__k.__m && (n.__m = t.__k.__m), s$1 && s$1(n, t);
}, c$1.__r = function (n) {
  a$1 && a$1(n), t$1 = 0;
  var i = (r$1 = n.__c).__H;
  i && (u$1 === r$1 ? (i.__h = [], r$1.__h = [], i.__.forEach(function (n) {
    n.__N && (n.__ = n.__N), n.u = n.__N = void 0;
  })) : (i.__h.forEach(z), i.__h.forEach(B), i.__h = [], t$1 = 0)), u$1 = r$1;
}, c$1.diffed = function (n) {
  v$2 && v$2(n);
  var t = n.__c;
  t && t.__H && (t.__H.__h.length && (1 !== f$1.push(t) && i$1 === c$1.requestAnimationFrame || ((i$1 = c$1.requestAnimationFrame) || w$2)(j)), t.__H.__.forEach(function (n) {
    n.u && (n.__H = n.u), n.u = void 0;
  })), u$1 = r$1 = null;
}, c$1.__c = function (n, t) {
  t.some(function (n) {
    try {
      n.__h.forEach(z), n.__h = n.__h.filter(function (n) {
        return !n.__ || B(n);
      });
    } catch (r) {
      t.some(function (n) {
        n.__h && (n.__h = []);
      }), t = [], c$1.__e(r, n.__v);
    }
  }), l$1 && l$1(n, t);
}, c$1.unmount = function (n) {
  m && m(n);
  var t,
    r = n.__c;
  r && r.__H && (r.__H.__.forEach(function (n) {
    try {
      z(n);
    } catch (n) {
      t = n;
    }
  }), r.__H = void 0, t && c$1.__e(t, r.__v));
};
var k = "function" == typeof requestAnimationFrame;
function w$2(n) {
  var t,
    r = function () {
      clearTimeout(u), k && cancelAnimationFrame(t), setTimeout(n);
    },
    u = setTimeout(r, 35);
  k && (t = requestAnimationFrame(r));
}
function z(n) {
  var t = r$1,
    u = n.__c;
  "function" == typeof u && (n.__c = void 0, u()), r$1 = t;
}
function B(n) {
  var t = r$1;
  n.__c = n.__(), r$1 = t;
}
function C(n, t) {
  return !n || n.length !== t.length || t.some(function (t, r) {
    return t !== n[r];
  });
}
function D(n, t) {
  return "function" == typeof t ? t(n) : t;
}

const i = Symbol.for("preact-signals");
function t() {
  if (r > 1) {
    r--;
    return;
  }
  let i,
    t = false;
  while (void 0 !== s) {
    let o = s;
    s = void 0;
    f++;
    while (void 0 !== o) {
      const n = o.o;
      o.o = void 0;
      o.f &= -3;
      if (!(8 & o.f) && v$1(o)) try {
        o.c();
      } catch (o) {
        if (!t) {
          i = o;
          t = true;
        }
      }
      o = n;
    }
  }
  f = 0;
  r--;
  if (t) throw i;
}
function o(i) {
  if (r > 0) return i();
  r++;
  try {
    return i();
  } finally {
    t();
  }
}
let n, s;
function h$1(i) {
  const t = n;
  n = void 0;
  try {
    return i();
  } finally {
    n = t;
  }
}
let r = 0,
  f = 0,
  e = 0;
function u(i) {
  if (void 0 === n) return;
  let t = i.n;
  if (void 0 === t || t.t !== n) {
    t = {
      i: 0,
      S: i,
      p: n.s,
      n: void 0,
      t: n,
      e: void 0,
      x: void 0,
      r: t
    };
    if (void 0 !== n.s) n.s.n = t;
    n.s = t;
    i.n = t;
    if (32 & n.f) i.S(t);
    return t;
  } else if (-1 === t.i) {
    t.i = 0;
    if (void 0 !== t.n) {
      t.n.p = t.p;
      if (void 0 !== t.p) t.p.n = t.n;
      t.p = n.s;
      t.n = void 0;
      n.s.n = t;
      n.s = t;
    }
    return t;
  }
}
function c(i, t) {
  this.v = i;
  this.i = 0;
  this.n = void 0;
  this.t = void 0;
  this.W = null == t ? void 0 : t.watched;
  this.Z = null == t ? void 0 : t.unwatched;
  this.name = null == t ? void 0 : t.name;
}
c.prototype.brand = i;
c.prototype.h = function () {
  return true;
};
c.prototype.S = function (i) {
  const t = this.t;
  if (t !== i && void 0 === i.e) {
    i.x = t;
    this.t = i;
    if (void 0 !== t) t.e = i;else h$1(() => {
      var i;
      null == (i = this.W) || i.call(this);
    });
  }
};
c.prototype.U = function (i) {
  if (void 0 !== this.t) {
    const t = i.e,
      o = i.x;
    if (void 0 !== t) {
      t.x = o;
      i.e = void 0;
    }
    if (void 0 !== o) {
      o.e = t;
      i.x = void 0;
    }
    if (i === this.t) {
      this.t = o;
      if (void 0 === o) h$1(() => {
        var i;
        null == (i = this.Z) || i.call(this);
      });
    }
  }
};
c.prototype.subscribe = function (i) {
  return E(() => {
    const t = this.value,
      o = n;
    n = void 0;
    try {
      i(t);
    } finally {
      n = o;
    }
  }, {
    name: "sub"
  });
};
c.prototype.valueOf = function () {
  return this.value;
};
c.prototype.toString = function () {
  return this.value + "";
};
c.prototype.toJSON = function () {
  return this.value;
};
c.prototype.peek = function () {
  const i = n;
  n = void 0;
  try {
    return this.value;
  } finally {
    n = i;
  }
};
Object.defineProperty(c.prototype, "value", {
  get() {
    const i = u(this);
    if (void 0 !== i) i.i = this.i;
    return this.v;
  },
  set(i) {
    if (i !== this.v) {
      if (f > 100) throw new Error("Cycle detected");
      this.v = i;
      this.i++;
      e++;
      r++;
      try {
        for (let i = this.t; void 0 !== i; i = i.x) i.t.N();
      } finally {
        t();
      }
    }
  }
});
function d(i, t) {
  return new c(i, t);
}
function v$1(i) {
  for (let t = i.s; void 0 !== t; t = t.n) if (t.S.i !== t.i || !t.S.h() || t.S.i !== t.i) return true;
  return false;
}
function l(i) {
  for (let t = i.s; void 0 !== t; t = t.n) {
    const o = t.S.n;
    if (void 0 !== o) t.r = o;
    t.S.n = t;
    t.i = -1;
    if (void 0 === t.n) {
      i.s = t;
      break;
    }
  }
}
function y$1(i) {
  let t,
    o = i.s;
  while (void 0 !== o) {
    const i = o.p;
    if (-1 === o.i) {
      o.S.U(o);
      if (void 0 !== i) i.n = o.n;
      if (void 0 !== o.n) o.n.p = i;
    } else t = o;
    o.S.n = o.r;
    if (void 0 !== o.r) o.r = void 0;
    o = i;
  }
  i.s = t;
}
function a(i, t) {
  c.call(this, void 0);
  this.x = i;
  this.s = void 0;
  this.g = e - 1;
  this.f = 4;
  this.W = null == t ? void 0 : t.watched;
  this.Z = null == t ? void 0 : t.unwatched;
  this.name = null == t ? void 0 : t.name;
}
a.prototype = new c();
a.prototype.h = function () {
  this.f &= -3;
  if (1 & this.f) return false;
  if (32 == (36 & this.f)) return true;
  this.f &= -5;
  if (this.g === e) return true;
  this.g = e;
  this.f |= 1;
  if (this.i > 0 && !v$1(this)) {
    this.f &= -2;
    return true;
  }
  const i = n;
  try {
    l(this);
    n = this;
    const i = this.x();
    if (16 & this.f || this.v !== i || 0 === this.i) {
      this.v = i;
      this.f &= -17;
      this.i++;
    }
  } catch (i) {
    this.v = i;
    this.f |= 16;
    this.i++;
  }
  n = i;
  y$1(this);
  this.f &= -2;
  return true;
};
a.prototype.S = function (i) {
  if (void 0 === this.t) {
    this.f |= 36;
    for (let i = this.s; void 0 !== i; i = i.n) i.S.S(i);
  }
  c.prototype.S.call(this, i);
};
a.prototype.U = function (i) {
  if (void 0 !== this.t) {
    c.prototype.U.call(this, i);
    if (void 0 === this.t) {
      this.f &= -33;
      for (let i = this.s; void 0 !== i; i = i.n) i.S.U(i);
    }
  }
};
a.prototype.N = function () {
  if (!(2 & this.f)) {
    this.f |= 6;
    for (let i = this.t; void 0 !== i; i = i.x) i.t.N();
  }
};
Object.defineProperty(a.prototype, "value", {
  get() {
    if (1 & this.f) throw new Error("Cycle detected");
    const i = u(this);
    this.h();
    if (void 0 !== i) i.i = this.i;
    if (16 & this.f) throw this.v;
    return this.v;
  }
});
function w$1(i, t) {
  return new a(i, t);
}
function _$1(i) {
  const o = i.u;
  i.u = void 0;
  if ("function" == typeof o) {
    r++;
    const s = n;
    n = void 0;
    try {
      o();
    } catch (t) {
      i.f &= -2;
      i.f |= 8;
      b$1(i);
      throw t;
    } finally {
      n = s;
      t();
    }
  }
}
function b$1(i) {
  for (let t = i.s; void 0 !== t; t = t.n) t.S.U(t);
  i.x = void 0;
  i.s = void 0;
  _$1(i);
}
function g$1(i) {
  if (n !== this) throw new Error("Out-of-order effect");
  y$1(this);
  n = i;
  this.f &= -2;
  if (8 & this.f) b$1(this);
  t();
}
function p(i, t) {
  this.x = i;
  this.u = void 0;
  this.s = void 0;
  this.o = void 0;
  this.f = 32;
  this.name = null == t ? void 0 : t.name;
}
p.prototype.c = function () {
  const i = this.S();
  try {
    if (8 & this.f) return;
    if (void 0 === this.x) return;
    const t = this.x();
    if ("function" == typeof t) this.u = t;
  } finally {
    i();
  }
};
p.prototype.S = function () {
  if (1 & this.f) throw new Error("Cycle detected");
  this.f |= 1;
  this.f &= -9;
  _$1(this);
  l(this);
  r++;
  const i = n;
  n = this;
  return g$1.bind(this, i);
};
p.prototype.N = function () {
  if (!(2 & this.f)) {
    this.f |= 2;
    this.o = s;
    s = this;
  }
};
p.prototype.d = function () {
  this.f |= 8;
  if (!(1 & this.f)) b$1(this);
};
p.prototype.dispose = function () {
  this.d();
};
function E(i, t) {
  const o = new p(i, t);
  try {
    o.c();
  } catch (i) {
    o.d();
    throw i;
  }
  const n = o.d.bind(o);
  n[Symbol.dispose] = n;
  return n;
}

let h,
  w,
  v = [];
E(function () {
  h = this.N;
})();
function y(i, n) {
  l$2[i] = n.bind(null, l$2[i] || (() => {}));
}
function _(i) {
  if (w) w();
  w = i && i.S();
}
function g({
  data: i
}) {
  const t = useSignal(i);
  t.value = i;
  const [e, f] = T(() => {
    let i = this,
      e = this.__v;
    while (e = e.__) if (e.__c) {
      e.__c.__$f |= 4;
      break;
    }
    const o = w$1(() => {
        let i = t.value.value;
        return 0 === i ? 0 : true === i ? "" : i || "";
      }),
      f = w$1(() => !Array.isArray(o.value) && !t$2(o.value)),
      r = E(function () {
        this.N = F;
        if (f.value) {
          const t = o.value;
          if (i.__v && i.__v.__e && 3 === i.__v.__e.nodeType) i.__v.__e.data = t;
        }
      }),
      u = this.__$u.d;
    this.__$u.d = function () {
      r();
      u.call(this);
    };
    return [f, o];
  }, []);
  return e.value ? f.peek() : f.value;
}
g.displayName = "ReactiveTextNode";
Object.defineProperties(c.prototype, {
  constructor: {
    configurable: true,
    value: void 0
  },
  type: {
    configurable: true,
    value: g
  },
  props: {
    configurable: true,
    get() {
      return {
        data: this
      };
    }
  },
  __b: {
    configurable: true,
    value: 1
  }
});
y("__b", (i, t) => {
  if ("function" == typeof t.type && "undefined" != typeof window && window.__PREACT_SIGNALS_DEVTOOLS__) window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();
  if ("string" == typeof t.type) {
    let i,
      n = t.props;
    for (let e in n) {
      if ("children" === e) continue;
      let o = n[e];
      if (o instanceof c) {
        if (!i) t.__np = i = {};
        i[e] = o;
        n[e] = o.peek();
      }
    }
  }
  i(t);
});
y("__r", (i, t) => {
  if ("function" == typeof t.type && "undefined" != typeof window && window.__PREACT_SIGNALS_DEVTOOLS__) window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(t);
  if (t.type !== k$1) {
    _();
    let i,
      n = t.__c;
    if (n) {
      n.__$f &= -2;
      i = n.__$u;
      if (void 0 === i) n.__$u = i = function (i) {
        let t;
        E(function () {
          t = this;
        });
        t.c = () => {
          n.__$f |= 1;
          n.setState({});
        };
        return t;
      }();
    }
    _(i);
  }
  i(t);
});
y("__e", (i, t, n, e) => {
  if ("undefined" != typeof window && window.__PREACT_SIGNALS_DEVTOOLS__) window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();
  _();
  i(t, n, e);
});
y("diffed", (i, t) => {
  if ("function" == typeof t.type && "undefined" != typeof window && window.__PREACT_SIGNALS_DEVTOOLS__) window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();
  _();
  let n;
  if ("string" == typeof t.type && (n = t.__e)) {
    let i = t.__np,
      e = t.props;
    if (i) {
      let t = n.U;
      if (t) for (let n in t) {
        let e = t[n];
        if (void 0 !== e && !(n in i)) {
          e.d();
          t[n] = void 0;
        }
      } else {
        t = {};
        n.U = t;
      }
      for (let o in i) {
        let f = t[o],
          r = i[o];
        if (void 0 === f) {
          f = b(n, o, r, e);
          t[o] = f;
        } else f.o(r, e);
      }
    }
  }
  i(t);
});
function b(i, t, n, e) {
  const o = t in i && void 0 === i.ownerSVGElement,
    f = d(n);
  return {
    o: (i, t) => {
      f.value = i;
      e = t;
    },
    d: E(function () {
      this.N = F;
      const n = f.value.value;
      if (e[t] !== n) {
        e[t] = n;
        if (o) i[t] = n;else if (n) i.setAttribute(t, n);else i.removeAttribute(t);
      }
    })
  };
}
y("unmount", (i, t) => {
  if ("string" == typeof t.type) {
    let i = t.__e;
    if (i) {
      const t = i.U;
      if (t) {
        i.U = void 0;
        for (let i in t) {
          let n = t[i];
          if (n) n.d();
        }
      }
    }
  } else {
    let i = t.__c;
    if (i) {
      const t = i.__$u;
      if (t) {
        i.__$u = void 0;
        t.d();
      }
    }
  }
  i(t);
});
y("__h", (i, t, n, e) => {
  if (e < 3 || 9 === e) t.__$f |= 2;
  i(t, n, e);
});
function useSignal(i, t) {
  return d$1(() => d(i, t))[0];
}
const q = i => {
    queueMicrotask(() => {
      queueMicrotask(i);
    });
  };
function x() {
  o(() => {
    let i;
    while (i = v.shift()) h.call(i);
  });
}
function F() {
  if (1 === v.push(this)) (l$2.requestAnimationFrame || q)(x);
}

export { E, d, w$1 as w };
