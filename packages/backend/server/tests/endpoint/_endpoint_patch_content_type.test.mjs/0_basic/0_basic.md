# [0_basic](../../endpoint_patch_content_type.test.mjs)

```js
const routes = [
  {
    acceptedMediaTypes: ["text/plain"],
    endpoint: "PATCH /",
    fetch: async (request) => {
      const text = await request.text();
      return new Response(text.toUpperCase());
    },
  },
];
return {
  "PATCH / without content-type": await run({
    routes,
    method: "PATCH",
    path: "/",
    headers: {},
    body: `<xml></xml>`,
  }),
  "PATCH / with xml": await run({
    routes,
    method: "PATCH",
    path: "/",
    headers: {
      "content-type": "application/xml",
    },
    body: `<xml></xml>`,
  }),
  "PATCH / with text": await run({
    routes,
    method: "PATCH",
    path: "/",
    headers: {
      "content-type": "text/plain",
    },
    body: `Hello world`,
  }),
};
```

```js
{
  "PATCH / without content-type": {
    "status": 415,
    "headers": {
      "accept-patch": "text/plain",
      "content-type": "application/json",
      "date": "<X>",
      "connection": "keep-alive",
      "keep-alive": "timeout=5",
      "transfer-encoding": "chunked"
    },
    "body": '{"statusMessage":"The Content-Type header is missing. It must be declared for PATCH requests to this resource."}'
  },
  "PATCH / with xml": {
    "status": 415,
    "headers": {
      "accept-patch": "text/plain",
      "content-type": "application/json",
      "date": "<X>",
      "connection": "keep-alive",
      "keep-alive": "timeout=5",
      "transfer-encoding": "chunked"
    },
    "body": '{"statusMessage":"The media type \\"application/xml\\" specified in the Content-Type header is not supported for PATCH requests to this resource.\\n    Supported media types: text/plain"}'
  },
  "PATCH / with text": {
    "status": 200,
    "headers": {
      "content-type": "text/plain;charset=UTF-8",
      "date": "<X>",
      "connection": "keep-alive",
      "keep-alive": "timeout=5",
      "transfer-encoding": "chunked"
    },
    "body": "HELLO WORLD"
  }
}
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/tooling/snapshot">@jsenv/snapshot</a>
</sub>
