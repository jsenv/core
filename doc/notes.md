## TODO

- test launch-node
- update all test because they have to do projectFolder: ROOT_FOLDER
- once all test passes, publish a new jsenv version
- ensure jsenv inception works
- make assert use latest jsenv
- create a github page embedding a codepen to play with @dmail/assert in the browser
- create a github page embedding a runkit to play with @dmail/assert in node
- move generateImportMapForProjectNodeModules into its own jsenv-node-import-map github project to extract this logic

## To keep in mind

- retry to disable inspect-brk inside vscode

- once https://github.com/systemjs/systemjs/issues/1924 and
  https://github.com/systemjs/systemjs/pull/1925 gets fixed, update
  SYSTEMJS_RELATIVE_PATH to 'node_modules/systemjs/dist/s.js'

### How to use dependency written in commonjs

Some module now have `module` or `jsnext:main` in their `package.json` leading to files written using `import/export`. In that case `importMap.json` generated by `generate-import-map` will contain a remapping to this file and you're good.

Otherwise if you want to use a npm module called `awesome` written using `module.exports`, you can

(a) Use `import.meta.require` if you know your code is meant to be executed only on node:

```js
const awesome = import.meta.require("awesome")
```

(b) Manually convert it to `import/export`:

- Fork the github repository
- Run an automatic tool to transform `module.exports` into `import/export`. For instance https://github.com/tbranyen/babel-plugin-transform-commonjs.
- Ensure dependency still works, you may run npm test for that.
- Open a PR with the code written using `import/export` or use your fork directly.

You can reuse this strategy for dependency written in iife, amd or umd.

## Generator not supported

Because we miss a strategy to provide regeneratorRuntime and polyfill in general.

## Sourcemap broken

It's likely because `transform-async-to-promises` used together with `transform-modules-systemjs` generate bad sourcemap.
It means if you use async/await in a platform not supporting it, your sourcemap will not be able to point the original location.
