{"version":3,"sources":["../../../sourceMapTest/comment-relative/index.js"],"names":["http","require","fs","vm","server","createServer","on","request","response","sourceMapContent","readFileSync","__dirname","toString","writeHead","Buffer","byteLength","console","log","url","end","port","listen","error","concreteFilename","content","script","Script","filename","runInThisContext"],"mappings":";;AAAA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,IAAMC,KAAKD,QAAQ,IAAR,CAAX;AACA,IAAME,KAAKF,QAAQ,IAAR,CAAX;;AAEA,IAAMG,SAASJ,KAAKK,YAAL,EAAf;;AAEAD,OAAOE,EAAP,CAAU,SAAV,EAAqB,UAACC,OAAD,EAAUC,QAAV,EAAuB;AAC1C,MAAMC,mBAAmBP,GAAGQ,YAAH,CAAmBC,SAAnB,gCAAyDC,QAAzD,EAAzB;;AAEAJ,WAASK,SAAT,CAAmB,GAAnB,EAAwB;AACtB,oBAAgB,0BADM;AAEtB,sBAAkBC,OAAOC,UAAP,CAAkBN,gBAAlB;AAFI,GAAxB;AAIAO,UAAQC,GAAR,CAAY,uBAAZ,EAAqCV,QAAQW,GAA7C;AACAV,WAASW,GAAT,CAAaV,gBAAb;AACD,CATD;;AAWA,IAAMW,OAAO,IAAb;AACAhB,OAAOiB,MAAP,CAAcD,IAAd,EAAoB,WAApB,EAAiC,UAASE,KAAT,EAAgB;AAC/C,MAAIA,KAAJ,EAAW;AACT,UAAMA,KAAN;AACD,GAFD,MAEO;AACL,QAAMC,mBAAsBZ,SAAtB,mCAAN;AACA,QAAMa,UAAUtB,GAAGQ,YAAH,CAAgBa,gBAAhB,EAAkCX,QAAlC,EAAhB;;AAEA,QAAMa,SAAS,IAAItB,GAAGuB,MAAP,CAAcF,OAAd,EAAuB,EAAEG,gCAA8BP,IAA9B,sBAAF,EAAvB,CAAf;;AAEAK,WAAOG,gBAAP;AACD;AACF,CAXD","file":"index.js","sourcesContent":["const http = require(\"http\")\nconst fs = require(\"fs\")\nconst vm = require(\"vm\")\n\nconst server = http.createServer()\n\nserver.on(\"request\", (request, response) => {\n  const sourceMapContent = fs.readFileSync(`${__dirname}/compiled/file.es5.js.map`).toString()\n\n  response.writeHead(200, {\n    \"content-type\": \"application/octet-stream\",\n    \"content-length\": Buffer.byteLength(sourceMapContent),\n  })\n  console.log(\"serving source map to\", request.url)\n  response.end(sourceMapContent)\n})\n\nconst port = 8567\nserver.listen(port, \"127.0.0.1\", function(error) {\n  if (error) {\n    throw error\n  } else {\n    const concreteFilename = `${__dirname}/build/file.es5.js/file.es5.js`\n    const content = fs.readFileSync(concreteFilename).toString()\n\n    const script = new vm.Script(content, { filename: `http://127.0.0.1:${port}/compiled/file.js` })\n\n    script.runInThisContext()\n  }\n})\n"]}