{
  "version": 3,
  "file": "toolbar.main.js",
  "sources": [
    "../../helpers/babel/arrayLikeToArray/arrayLikeToArray.js",
    "../../helpers/babel/arrayWithoutHoles/arrayWithoutHoles.js",
    "../../helpers/babel/iterableToArray/iterableToArray.js",
    "../../helpers/babel/unsupportedIterableToArray/unsupportedIterableToArray.js",
    "../../helpers/babel/nonIterableSpread/nonIterableSpread.js",
    "../../helpers/babel/toConsumableArray/toConsumableArray.js",
    "../../helpers/babel/typeof/typeof.js",
    "../../node_modules/@jsenv/filesystem/src/urlIsInsideOf.js",
    "../../node_modules/@jsenv/filesystem/src/internal/getCommonPathname.js",
    "../../node_modules/@jsenv/filesystem/src/internal/pathnameToParentPathname.js",
    "../../node_modules/@jsenv/filesystem/src/urlToRelativeUrl.js",
    "../../helpers/babel/defineProperty/defineProperty.js",
    "../../helpers/babel/objectSpread2/objectSpread2.js",
    "../../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../../src/internal/browser-utils/fetchUsingXHR.js",
    "../../src/internal/browser-utils/fetch-browser.js",
    "../../src/internal/browser-utils/fetchJson.js",
    "../../src/internal/dev_server/exploring/fetchExploringJson.js",
    "../../src/internal/dev_server/toolbar/util/dom.js",
    "../../src/internal/dev_server/toolbar/util/animation.js",
    "../../src/internal/dev_server/toolbar/focus/toolbar.focus.js",
    "../../src/internal/dev_server/toolbar/util/preferences.js",
    "../../src/internal/dev_server/toolbar/tooltip/tooltip.js",
    "../../src/internal/dev_server/toolbar/settings/toolbar.settings.js",
    "../../src/internal/dev_server/toolbar/variant/variant.js",
    "../../src/internal/dev_server/toolbar/notification/toolbar.notification.js",
    "../../src/internal/dev_server/toolbar/theme/toolbar.theme.js",
    "../../src/internal/dev_server/toolbar/animation/toolbar.animation.js",
    "../../src/internal/dev_server/toolbar/util/responsive.js",
    "../../src/internal/dev_server/toolbar/execution/toolbar.execution.js",
    "../../node_modules/@jsenv/logger/src/createDetailedMessage.js",
    "../../src/internal/CONSTANTS.js",
    "../../src/internal/runtime/computeCompileIdFromGroupId.js",
    "../../src/internal/runtime/detectBrowser/util.js",
    "../../src/internal/runtime/detectBrowser/detectAndroid.js",
    "../../src/internal/runtime/detectBrowser/detectInternetExplorer.js",
    "../../src/internal/runtime/detectBrowser/detectOpera.js",
    "../../src/internal/runtime/detectBrowser/detectEdge.js",
    "../../src/internal/runtime/detectBrowser/detectFirefox.js",
    "../../src/internal/runtime/detectBrowser/detectChrome.js",
    "../../src/internal/runtime/detectBrowser/detectSafari.js",
    "../../src/internal/runtime/detectBrowser/detectElectron.js",
    "../../src/internal/runtime/detectBrowser/detectIOS.js",
    "../../src/internal/runtime/detectBrowser/detectBrowser.js",
    "../../src/internal/semantic-versioning/valueToVersion.js",
    "../../src/internal/semantic-versioning/versionCompare.js",
    "../../src/internal/semantic-versioning/versionIsBelow.js",
    "../../src/internal/semantic-versioning/findHighestVersion.js",
    "../../src/internal/runtime/resolveGroup.js",
    "../../src/internal/runtime/createBrowserRuntime/scanBrowserRuntimeFeatures.js",
    "../../src/internal/dev_server/toolbar/compilation/toolbar.compilation.js",
    "../../src/internal/dev_server/toolbar/eventsource/toolbar.eventsource.js",
    "../../src/internal/dev_server/toolbar/responsive/toolbar.responsive.js",
    "../../src/internal/dev_server/toolbar/toolbar.main.js"
  ],
  "sourcesContent": [
    "/* eslint-disable no-eq-null, eqeqeq */\nexport default function arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length\n  var arr2 = new Array(len)\n  for (var i = 0; i < len; i++) arr2[i] = arr[i]\n  return arr2\n}\n",
    "import arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\n// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr)\n}\n",
    "export default function _iterableToArray(iter) {\n  if (\n    (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null) ||\n    iter[\"@@iterator\"] != null\n  )\n    return Array.from(iter)\n}\n",
    "/* eslint-disable consistent-return */\nimport arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\nexport default function unsupportedIterableToArray(o, minLen) {\n  if (!o) return\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen)\n  var n = Object.prototype.toString.call(o).slice(8, -1)\n  if (n === \"Object\" && o.constructor) n = o.constructor.name\n  if (n === \"Map\" || n === \"Set\") return Array.from(o)\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return arrayLikeToArray(o, minLen)\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithoutHoles from \"../arrayWithoutHoles/arrayWithoutHoles.js\"\nimport iterableToArray from \"../iterableToArray/iterableToArray.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableSpread from \"../nonIterableSpread/nonIterableSpread.js\"\n\nexport default (arr) =>\n  arrayWithoutHoles(arr) ||\n  iterableToArray(arr) ||\n  unsupportedIterableToArray(arr) ||\n  nonIterableSpread()\n",
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export const urlIsInsideOf = (url, otherUrl) => {\n  const urlObject = new URL(url)\n  const otherUrlObject = new URL(otherUrl)\n\n  if (urlObject.origin !== otherUrlObject.origin) {\n    return false\n  }\n\n  const urlPathname = urlObject.pathname\n  const otherUrlPathname = otherUrlObject.pathname\n  if (urlPathname === otherUrlPathname) {\n    return false\n  }\n\n  const isInside = urlPathname.startsWith(otherUrlPathname)\n  return isInside\n}\n",
    "export const getCommonPathname = (pathname, otherPathname) => {\n  const firstDifferentCharacterIndex = findFirstDifferentCharacterIndex(\n    pathname,\n    otherPathname,\n  )\n\n  // pathname and otherpathname are exactly the same\n  if (firstDifferentCharacterIndex === -1) {\n    return pathname\n  }\n\n  const commonString = pathname.slice(0, firstDifferentCharacterIndex + 1)\n\n  // the first different char is at firstDifferentCharacterIndex\n  if (pathname.charAt(firstDifferentCharacterIndex) === \"/\") {\n    return commonString\n  }\n\n  if (otherPathname.charAt(firstDifferentCharacterIndex) === \"/\") {\n    return commonString\n  }\n\n  const firstDifferentSlashIndex = commonString.lastIndexOf(\"/\")\n  return pathname.slice(0, firstDifferentSlashIndex + 1)\n}\n\nconst findFirstDifferentCharacterIndex = (string, otherString) => {\n  const maxCommonLength = Math.min(string.length, otherString.length)\n  let i = 0\n  while (i < maxCommonLength) {\n    const char = string.charAt(i)\n    const otherChar = otherString.charAt(i)\n    if (char !== otherChar) {\n      return i\n    }\n    i++\n  }\n  if (string.length === otherString.length) {\n    return -1\n  }\n  // they differ at maxCommonLength\n  return maxCommonLength\n}\n",
    "export const pathnameToParentPathname = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex === -1) {\n    return \"/\"\n  }\n\n  return pathname.slice(0, slashLastIndex + 1)\n}\n",
    "import { getCommonPathname } from \"./internal/getCommonPathname.js\"\nimport { pathnameToParentPathname } from \"./internal/pathnameToParentPathname.js\"\n\nexport const urlToRelativeUrl = (url, baseUrl) => {\n  const urlObject = new URL(url)\n  const baseUrlObject = new URL(baseUrl)\n\n  if (urlObject.protocol !== baseUrlObject.protocol) {\n    const urlAsString = String(url)\n    return urlAsString\n  }\n\n  if (\n    urlObject.username !== baseUrlObject.username ||\n    urlObject.password !== baseUrlObject.password ||\n    urlObject.host !== baseUrlObject.host\n  ) {\n    const afterUrlScheme = String(url).slice(urlObject.protocol.length)\n    return afterUrlScheme\n  }\n\n  const { pathname, hash, search } = urlObject\n  if (pathname === \"/\") {\n    const baseUrlRessourceWithoutLeadingSlash = baseUrlObject.pathname.slice(1)\n    return baseUrlRessourceWithoutLeadingSlash\n  }\n\n  const basePathname = baseUrlObject.pathname\n  const commonPathname = getCommonPathname(pathname, basePathname)\n  if (!commonPathname) {\n    const urlAsString = String(url)\n    return urlAsString\n  }\n\n  const specificPathname = pathname.slice(commonPathname.length)\n  const baseSpecificPathname = basePathname.slice(commonPathname.length)\n  if (baseSpecificPathname.includes(\"/\")) {\n    const baseSpecificParentPathname =\n      pathnameToParentPathname(baseSpecificPathname)\n    const relativeDirectoriesNotation = baseSpecificParentPathname.replace(\n      /.*?\\//g,\n      \"../\",\n    )\n    const relativeUrl = `${relativeDirectoriesNotation}${specificPathname}${search}${hash}`\n    return relativeUrl\n  }\n\n  const relativeUrl = `${specificPathname}${search}${hash}`\n  return relativeUrl\n}\n",
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object)\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object)\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable\n      })\n    }\n    keys.push.apply(keys, symbols)\n  }\n  return keys\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {}\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key])\n      })\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\n      })\n    }\n  }\n  return target\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "export const fetchUsingXHR = async (\n  url,\n  {\n    signal,\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  signal.addEventListener(\"abort\", () => {\n    xhr.abort()\n    const abortError = new Error(\"aborted\")\n    abortError.name = \"AbortError\"\n    failure(abortError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl =\n    \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    `error during xhr request on ${url}.\n--- error stack ---\n${error.stack}`,\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return (\n        value && viewClasses.includes(Object.prototype.toString.call(value))\n      )\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { fetchUsingXHR } from \"./fetchUsingXHR.js\"\n\nconst fetchNative = async (url, { mode = \"cors\", ...options } = {}) => {\n  const response = await window.fetch(url, {\n    mode,\n    ...options,\n  })\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" &&\n  typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { fetchUrl } from \"./fetch-browser.js\"\n\nexport const fetchJson = async (url, options = {}) => {\n  const response = await fetchUrl(url, options)\n  const object = await response.json()\n  return object\n}\n",
    "import { fetchJson } from \"../../browser-utils/fetchJson.js\"\n\nexport const fetchExploringJson = async ({ signal } = {}) => {\n  try {\n    const exploringInfo = await fetchJson(\"/.jsenv/exploring.json\", {\n      signal,\n    })\n    return exploringInfo\n  } catch (e) {\n    if (signal && signal.aborted && e.name === \"AbortError\") {\n      throw e\n    }\n    throw new Error(\n      `Cannot communicate with exploring server due to a network error\n--- error stack ---\n${e.stack}`,\n    )\n  }\n}\n",
    "export const updateIframeOverflowOnParentWindow = () => {\n  const aTooltipIsOpened =\n    document.querySelector(\"[data-tooltip-visible]\") ||\n    document.querySelector(\"[data-tooltip-auto-visible]\")\n  const settingsAreOpened = document.querySelector(\"#settings[data-active]\")\n\n  if (aTooltipIsOpened || settingsAreOpened) {\n    enableIframeOverflowOnParentWindow()\n  } else {\n    disableIframeOverflowOnParentWindow()\n  }\n}\n\nlet iframeOverflowEnabled = false\nconst enableIframeOverflowOnParentWindow = () => {\n  if (iframeOverflowEnabled) return\n  iframeOverflowEnabled = true\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"100%\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nconst disableIframeOverflowOnParentWindow = () => {\n  if (!iframeOverflowEnabled) return\n  iframeOverflowEnabled = false\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"40px\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nexport const getToolbarIframe = () => {\n  const iframes = Array.from(window.parent.document.querySelectorAll(\"iframe\"))\n  return iframes.find((iframe) => iframe.contentWindow === window)\n}\n\nexport const forceHideElement = (element) => {\n  element.setAttribute(\"data-force-hide\", \"\")\n}\n\nexport const removeForceHideElement = (element) => {\n  element.removeAttribute(\"data-force-hide\")\n}\n\nexport const setStyles = (element, styles) => {\n  const elementStyle = element.style\n  const restoreStyles = Object.keys(styles).map((styleName) => {\n    let restore\n    if (styleName in elementStyle) {\n      const currentStyle = elementStyle[styleName]\n      restore = () => {\n        elementStyle[styleName] = currentStyle\n      }\n    } else {\n      restore = () => {\n        delete elementStyle[styleName]\n      }\n    }\n\n    elementStyle[styleName] = styles[styleName]\n\n    return restore\n  })\n  return () => {\n    restoreStyles.forEach((restore) => restore())\n  }\n}\n\nexport const setAttributes = (element, attributes) => {\n  Object.keys(attributes).forEach((name) => {\n    element.setAttribute(name, attributes[name])\n  })\n}\n\nexport const getDocumentScroll = () => {\n  return {\n    x: document.documentElement.scrollLeft,\n    y: document.documentElement.scrollTop,\n  }\n}\n\nexport const toolbarSectionIsActive = (element) => {\n  return element.hasAttribute(\"data-active\")\n}\n\nexport const activateToolbarSection = (element) => {\n  element.setAttribute(\"data-active\", \"\")\n}\n\nexport const deactivateToolbarSection = (element) => {\n  element.removeAttribute(\"data-active\")\n}\n",
    "import { setStyles } from \"./dom.js\"\n\nconst animateFallback = () => {\n  return Promise.resolve()\n}\n\nconst animateNative = (node, keyframes, { signal, ...options } = {}) => {\n  const animation = node.animate(keyframes, options)\n  if (signal) {\n    signal.addEventListener(\"abort\", () => {\n      animation.cancel()\n    })\n  }\n  return new Promise((resolve) => {\n    animation.onfinish = resolve\n  })\n}\n\nexport const canUseAnimation = () =>\n  typeof HTMLElement.prototype.animate === \"function\"\n\nexport const animateElement = canUseAnimation()\n  ? animateNative\n  : animateFallback\n\nexport const fadeIn = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 0,\n      },\n      {\n        opacity: 1,\n      },\n    ],\n    options,\n  )\n\nexport const fadeOut = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 1,\n      },\n      {\n        opacity: 0,\n      },\n    ],\n    options,\n  )\n\nexport const move = (fromNode, toNode, options) => {\n  const fromComputedStyle = window.getComputedStyle(fromNode)\n  const toComputedStyle = window.getComputedStyle(toNode)\n  // get positions of input in toolbar and aElement\n  const fromPosition = fromNode.getBoundingClientRect()\n  const toPosition = toNode.getBoundingClientRect()\n\n  // we'll do the animation in a div preventing overflow and pointer events\n  const div = document.createElement(\"div\")\n  div.style.position = \"absolute\"\n  div.style.left = 0\n  div.style.top = 0\n  div.style.width = `${document.documentElement.scrollWidth}px`\n  div.style.height = `${document.documentElement.scrollHeight}px`\n  div.style.overflow = \"hidden\"\n  div.style.pointerEvents = \"none\"\n\n  const documentScroll = {\n    left: window.pageXOffset || document.documentElement.scrollLeft,\n    top: window.pageYOffset || document.documentElement.scrollTop,\n  }\n\n  // clone node and style it\n  const copy = fromNode.cloneNode(true)\n  copy.style.position = \"absolute\"\n  copy.style.left = `${documentScroll.left + fromPosition.left}px`\n  copy.style.top = `${documentScroll.top + fromPosition.top}px`\n  copy.style.maxWidth = `${fromPosition.right - fromPosition.left}px`\n  copy.style.overflow = toComputedStyle.overflow\n  copy.style.textOverflow = toComputedStyle.textOverflow\n  div.appendChild(copy)\n  document.body.appendChild(div)\n\n  const left =\n    toPosition.left -\n    fromPosition.left -\n    (parseInt(fromComputedStyle.paddingLeft) || 0)\n  const top =\n    toPosition.top -\n    fromPosition.top -\n    (parseInt(fromComputedStyle.paddingTop) || 0)\n  // define final position of new element and the duration\n  const translate = `translate(${left}px, ${top}px)`\n\n  // animate new element\n  return animateElement(\n    copy,\n    [\n      {\n        transform: \"translate(0px, 0px)\",\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n        fontSize: fromComputedStyle.fontSize,\n        height: `${fromPosition.bottom - fromPosition.top}px`,\n        width: \"100%\",\n      },\n      {\n        offset: 0.9,\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n      },\n      {\n        transform: translate,\n        backgroundColor: toComputedStyle.backgroundColor,\n        color: toComputedStyle.color,\n        fontSize: toComputedStyle.fontSize,\n        height: `${toPosition.bottom - toPosition.top}px`,\n        width: toComputedStyle.width,\n      },\n    ],\n    options,\n  ).then(() => {\n    div.parentNode.removeChild(div)\n  })\n}\n\n// the whole point of this toolbar animation wass to flight a visual imperfection when it's done by css transition.\n// This imperfection is a white line sometimes flickering at the bottom of the page.\n// It got fixed by removing the usage of calc(100vh - 40px)\n// It was hapenning in chrome, safari but not inside Firefox\n// I assume it's because Firefox does not read parent element min-height while\n// chrome use it to compute min-height: 100%\nexport const createToolbarAnimation = () => {\n  const collapsedState = {\n    \"#page\": { paddingBottom: 0 },\n    \"footer\": { height: 0 },\n    \"#toolbar\": { visibility: \"hidden\" },\n  }\n  const expandedState = {\n    \"#page\": { paddingBottom: \"40px\" },\n    \"footer\": { height: \"40px\" },\n    \"#toolbar\": { visibility: \"visible\" },\n  }\n  const expandTransition = transit(collapsedState, expandedState, {\n    duration: 300,\n  })\n\n  const expand = () => {\n    expandTransition.play()\n  }\n\n  const collapse = () => {\n    expandTransition.reverse()\n  }\n\n  return { expand, collapse }\n}\n\nexport const transit = (\n  fromState,\n  toState,\n  { commitStyles = true, fill = \"both\", duration = 300 } = {},\n) => {\n  const steps = []\n  Object.keys(fromState).forEach((selector) => {\n    const fromStyles = {}\n    const toStyles = {}\n    const element = document.querySelector(selector)\n\n    const keyframes = []\n    const fromProperties = fromState[selector]\n    const toProperties = toState[selector]\n    Object.keys(fromProperties).forEach((propertyName) => {\n      const from = fromProperties[propertyName]\n      const to = toProperties[propertyName]\n      fromStyles[propertyName] = from\n      toStyles[propertyName] = to\n    })\n    keyframes.push(fromStyles, toStyles)\n\n    let animation\n    if (canUseAnimation()) {\n      const effect = new KeyframeEffect(element, keyframes, { fill, duration })\n      animation = new Animation(effect)\n    } else {\n      animation = {\n        playbackRate: 1,\n        play: () => {\n          animation.onfinish()\n        },\n        reverse: () => {\n          animation.playbackRate = -1\n          animation.onfinish()\n        },\n        finish: () => {},\n        onfinish: () => {},\n      }\n    }\n\n    steps.push({\n      element,\n      animation,\n      fromStyles,\n      toStyles,\n    })\n  })\n\n  const play = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, toStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, toStyles)\n            }\n            resolve()\n          }\n          if (animation.playbackRate === -1) {\n            animation.reverse()\n          } else {\n            animation.play()\n          }\n        })\n      }),\n    )\n  }\n\n  const reverse = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, fromStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, fromStyles)\n            }\n            resolve()\n          }\n          animation.reverse()\n        })\n      }),\n    )\n  }\n\n  const finish = async () => {\n    steps.forEach(({ animation }) => {\n      animation.finish()\n    })\n  }\n\n  return { play, reverse, finish }\n}\n\nexport const startJavaScriptAnimation = ({\n  duration = 300,\n  timingFunction = (t) => t,\n  onProgress = () => {},\n  onCancel = () => {},\n  onComplete = () => {},\n}) => {\n  if (isNaN(duration)) {\n    // console.warn(`duration must be a number, received ${duration}`)\n    return () => {}\n  }\n  duration = parseInt(duration, 10)\n  const startMs = performance.now()\n  let currentRequestAnimationFrameId\n  let done = false\n  let rawProgress = 0\n  let progress = 0\n  const handler = () => {\n    currentRequestAnimationFrameId = null\n    const nowMs = performance.now()\n    rawProgress = Math.min((nowMs - startMs) / duration, 1)\n    progress = timingFunction(rawProgress)\n    done = rawProgress === 1\n    onProgress({\n      done,\n      rawProgress,\n      progress,\n    })\n    if (done) {\n      onComplete()\n    } else {\n      currentRequestAnimationFrameId = window.requestAnimationFrame(handler)\n    }\n  }\n  handler()\n  const stop = () => {\n    if (currentRequestAnimationFrameId) {\n      window.cancelAnimationFrame(currentRequestAnimationFrameId)\n      currentRequestAnimationFrameId = null\n    }\n    if (!done) {\n      done = true\n      onCancel({\n        rawProgress,\n        progress,\n      })\n    }\n  }\n  return stop\n}\n",
    "// handle data-last-interaction attr on html (focusring)\nwindow.addEventListener(\"mousedown\", (mousedownEvent) => {\n  if (mousedownEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"mouse\")\n})\nwindow.addEventListener(\"touchstart\", (touchstartEvent) => {\n  if (touchstartEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"mouse\")\n})\nwindow.addEventListener(\"keydown\", (keydownEvent) => {\n  if (keydownEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"keyboard\")\n})\n",
    "export const createPreference = (name) => {\n  return {\n    has: () => localStorage.hasOwnProperty(name),\n    get: () =>\n      localStorage.hasOwnProperty(name)\n        ? JSON.parse(localStorage.getItem(name))\n        : undefined,\n    set: (value) => localStorage.setItem(name, JSON.stringify(value)),\n  }\n}\n",
    "import { updateIframeOverflowOnParentWindow } from \"../util/dom.js\"\n\nexport const toggleTooltip = (element) => {\n  if (element.hasAttribute(\"data-tooltip-visible\")) {\n    hideTooltip(element)\n  } else {\n    showTooltip(element)\n  }\n}\n\nexport const hideTooltip = (element) => {\n  element.removeAttribute(\"data-tooltip-visible\")\n  element.removeAttribute(\"data-tooltip-auto-visible\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const showTooltip = (element) => {\n  element.setAttribute(\"data-tooltip-visible\", \"\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const autoShowTooltip = (element) => {\n  element.setAttribute(\"data-tooltip-auto-visible\", \"\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const removeAutoShowTooltip = (element) => {\n  element.removeAttribute(\"data-tooltip-auto-visible\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const hideAllTooltip = () => {\n  const elementsWithTooltip = Array.from(\n    document.querySelectorAll(\"[data-tooltip-visible]\"),\n  )\n  elementsWithTooltip.forEach((elementWithTooltip) => {\n    hideTooltip(elementWithTooltip)\n  })\n}\n",
    "import {\n  toolbarSectionIsActive,\n  deactivateToolbarSection,\n  activateToolbarSection,\n  updateIframeOverflowOnParentWindow,\n} from \"../util/dom.js\"\n\nexport const renderToolbarSettings = () => {\n  document.querySelector(\"#settings-button\").onclick = toggleSettings\n  document.querySelector(\"#button-close-settings\").onclick = toggleSettings\n}\n\nconst toggleSettings = () => {\n  if (settingsAreVisible()) {\n    hideSettings()\n  } else {\n    showSettings()\n  }\n}\n\nexport const settingsAreVisible = () => {\n  return toolbarSectionIsActive(document.querySelector(`#settings`))\n}\n\nexport const hideSettings = () => {\n  deactivateToolbarSection(document.querySelector(`#settings`))\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const showSettings = () => {\n  activateToolbarSection(document.querySelector(`#settings`))\n  updateIframeOverflowOnParentWindow()\n}\n",
    "export const enableVariant = (rootNode, variables) => {\n  const nodesNotMatching = Array.from(\n    rootNode.querySelectorAll(`[${attributeIndicatingACondition}]`),\n  )\n  nodesNotMatching.forEach((nodeNotMatching) => {\n    const conditionAttributeValue = nodeNotMatching.getAttribute(\n      attributeIndicatingACondition,\n    )\n    const matches = testCondition(conditionAttributeValue, variables)\n    if (matches) {\n      renameAttribute(\n        nodeNotMatching,\n        attributeIndicatingACondition,\n        attributeIndicatingAMatch,\n      )\n    }\n  })\n\n  const nodesMatching = Array.from(\n    rootNode.querySelectorAll(`[${attributeIndicatingAMatch}]`),\n  )\n  nodesMatching.forEach((nodeMatching) => {\n    const conditionAttributeValue = nodeMatching.getAttribute(\n      attributeIndicatingAMatch,\n    )\n    const matches = testCondition(conditionAttributeValue, variables)\n    if (!matches) {\n      renameAttribute(\n        nodeMatching,\n        attributeIndicatingAMatch,\n        attributeIndicatingACondition,\n      )\n    }\n  })\n}\n\nconst testCondition = (conditionAttributeValue, variables) => {\n  const condition = parseCondition(conditionAttributeValue)\n  return Object.keys(variables).some((key) => {\n    if (condition.key !== key) {\n      return false\n    }\n    // the condition do not specify a value, any value is ok\n    if (condition.value === undefined) {\n      return true\n    }\n    if (condition.value === variables[key]) {\n      return true\n    }\n    return false\n  })\n}\n\nconst parseCondition = (conditionAttributeValue) => {\n  const colonIndex = conditionAttributeValue.indexOf(\":\")\n  if (colonIndex === -1) {\n    return {\n      key: conditionAttributeValue,\n      value: undefined,\n    }\n  }\n  return {\n    key: conditionAttributeValue.slice(0, colonIndex),\n    value: conditionAttributeValue.slice(colonIndex + 1),\n  }\n}\n\nconst attributeIndicatingACondition = `data-when`\nconst attributeIndicatingAMatch = `data-when-active`\n\nconst renameAttribute = (node, name, newName) => {\n  node.setAttribute(newName, node.getAttribute(name))\n  node.removeAttribute(name)\n}\n",
    "import { createPreference } from \"../util/preferences.js\"\nimport { enableVariant } from \"../variant/variant.js\"\n\nconst notificationAvailable = typeof window.Notification === \"function\"\nconst notificationPreference = createPreference(\"notification\")\n\nconst arrayOfOpenedNotifications = []\nexport const renderToolbarNotification = () => {\n  const notifCheckbox = document.querySelector(\"#toggle-notifs\")\n  if (!notificationAvailable) {\n    const notifSetting = document.querySelector(\".settings-notification\")\n    notifSetting.setAttribute(\"data-disabled\", \"true\")\n    notifSetting.setAttribute(\n      \"title\",\n      `Notification not available in the browser`,\n    )\n    notifCheckbox.disabled = true\n    return\n  }\n\n  const updatePermission = () => {\n    if (Notification.permission === \"denied\") {\n      const notifSetting = document.querySelector(\".settings-notification\")\n      notifSetting.setAttribute(\"data-disabled\", \"true\")\n      notifSetting.setAttribute(\"title\", `Notification denied`)\n      notifCheckbox.disabled = true\n      return\n    }\n\n    notifCheckbox.checked = getNotificationPreference()\n    notifCheckbox.onchange = () => {\n      setNotificationPreference(notifCheckbox.checked)\n      if (!notifCheckbox.checked) {\n        // slice because arrayOfOpenedNotifications can be mutated while looping\n        arrayOfOpenedNotifications.slice().forEach((notification) => {\n          notification.close()\n        })\n      }\n    }\n    const notifPermission = Notification.permission\n    enableVariant(document.querySelector(\".notification-text\"), {\n      notif_permission: notifPermission === \"granted\" ? \"yes\" : \"no\",\n    })\n    if (notifPermission === \"default\") {\n      document.querySelector(\"a.request_notification_permission\").onclick =\n        () => {\n          requestPermission().then(() => {\n            updatePermission()\n          })\n        }\n    }\n  }\n  updatePermission()\n}\n\nexport const notifyExecutionResult = (\n  executedFileRelativeUrl,\n  execution,\n  previousExecution,\n) => {\n  const notificationEnabled = getNotificationPreference()\n  if (!notificationEnabled) return\n\n  const notificationOptions = {\n    lang: \"en\",\n    icon: getFaviconHref(),\n    clickToFocus: true,\n    clickToClose: true,\n  }\n\n  if (execution.status === \"errored\") {\n    if (previousExecution) {\n      if (previousExecution.status === \"completed\") {\n        notify(\"Broken\", {\n          ...notificationOptions,\n          body: `${executedFileRelativeUrl} execution now failing.`,\n        })\n      } else {\n        notify(\"Still failing\", {\n          ...notificationOptions,\n          body: `${executedFileRelativeUrl} execution still failing.`,\n        })\n      }\n    } else {\n      notify(\"Failing\", {\n        ...notificationOptions,\n        body: `${executedFileRelativeUrl} execution failed.`,\n      })\n    }\n  } else if (previousExecution && previousExecution.status === \"errored\") {\n    notify(\"Fixed\", {\n      ...notificationOptions,\n      body: `${executedFileRelativeUrl} execution fixed.`,\n    })\n  }\n}\n\nconst getNotificationPreference = () =>\n  notificationPreference.has() ? notificationPreference.get() : true\n\nconst setNotificationPreference = (value) => notificationPreference.set(value)\n\nconst getFaviconHref = () => {\n  const link = document.querySelector('link[rel=\"icon\"]')\n  return link ? link.href : undefined\n}\n\nlet permission = \"default\"\n\nconst notify = notificationAvailable\n  ? async (\n      title,\n      { clickToFocus = false, clickToClose = false, ...options } = {},\n    ) => {\n      if (permission !== \"granted\") {\n        return null\n      }\n\n      const notification = new Notification(title, options)\n      arrayOfOpenedNotifications.push(notification)\n      notification.onclick = () => {\n        // but if the user navigated inbetween\n        // focusing window will show something else\n        // in that case it could be great to do something\n        // maybe like showing a message saying this execution\n        // is no longer visible\n        // we could also navigauate to this file execution but\n        // there is no guarantee re-executing the file would give same output\n        // and it would also trigger an other notification\n        if (clickToFocus) window.focus()\n        if (clickToClose) notification.close()\n      }\n      notification.onclose = () => {\n        const index = arrayOfOpenedNotifications.indexOf(notification)\n        if (index > -1) {\n          arrayOfOpenedNotifications.splice(index, 1)\n        }\n      }\n      return notification\n    }\n  : () => {}\n\nlet requestPromise\nconst requestPermission = notificationAvailable\n  ? async () => {\n      if (requestPromise) return requestPromise\n      requestPromise = Notification.requestPermission()\n      permission = await requestPromise\n      requestPromise = undefined\n      return permission\n    }\n  : () => Promise.resolve(\"default\")\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst DARK_THEME = \"dark\"\nconst LIGHT_THEME = \"light\"\nconst themePreference = createPreference(\"theme\")\n\nexport const renderToolbarTheme = () => {\n  const theme = getThemePreference()\n  const checkbox = document.querySelector(\"#checkbox-dark-theme\")\n  checkbox.checked = theme === DARK_THEME\n  setTheme(theme)\n  checkbox.onchange = () => {\n    if (checkbox.checked) {\n      setThemePreference(DARK_THEME)\n      setTheme(DARK_THEME)\n    } else {\n      setThemePreference(LIGHT_THEME)\n      setTheme(LIGHT_THEME)\n    }\n  }\n}\n\nconst getThemePreference = () => {\n  return themePreference.has() ? themePreference.get() : DARK_THEME\n}\n\nconst setThemePreference = (value) => {\n  themePreference.set(value)\n  setTheme(value)\n}\n\nconst setTheme = (theme) => {\n  document.querySelector(\"html\").setAttribute(\"data-theme\", theme)\n}\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst animationPreference = createPreference(\"animation\")\n\nexport const renderToolbarAnimation = () => {\n  const animCheckbox = document.querySelector(\"#toggle-anims\")\n  animCheckbox.checked = getAnimationPreference()\n  animCheckbox.onchange = () => {\n    setAnimationPreference(animCheckbox.checked)\n    onPreferenceChange(animCheckbox.checked)\n  }\n  onPreferenceChange()\n\n  // enable toolbar transition only after first render\n  setTimeout(() => {\n    document.querySelector(\"#toolbar\").setAttribute(\"data-animate\", \"\")\n  })\n}\n\nconst onPreferenceChange = (value = getAnimationPreference()) => {\n  if (value) {\n    enableAnimation()\n  } else {\n    disableAnimation()\n  }\n}\n\nconst getAnimationPreference = () =>\n  animationPreference.has() ? animationPreference.get() : true\n\nconst setAnimationPreference = (value) => animationPreference.set(value)\n\nconst enableAnimation = () => {\n  document.documentElement.removeAttribute(\"data-animation-disabled\")\n}\n\nconst disableAnimation = () => {\n  document.documentElement.setAttribute(\"data-animation-disabled\", \"\")\n}\n",
    "export const createHorizontalBreakpoint = (breakpointValue) => {\n  return createBreakpoint(windowWidthMeasure, breakpointValue)\n}\n\nconst createMeasure = ({ compute, register }) => {\n  let currentValue = compute()\n\n  const get = () => compute()\n\n  const changed = createSignal()\n\n  let unregister = () => {}\n  if (register) {\n    unregister = register(() => {\n      const value = compute()\n      if (value !== currentValue) {\n        const previousValue = value\n        currentValue = value\n        changed.notify(value, previousValue)\n      }\n    })\n  }\n\n  return { get, changed, unregister }\n}\n\nconst createSignal = () => {\n  const callbackArray = []\n\n  const listen = (callback) => {\n    callbackArray.push(callback)\n    return () => {\n      const index = callbackArray.indexOf(callback)\n      if (index > -1) {\n        callbackArray.splice(index, 1)\n      }\n    }\n  }\n\n  const notify = (...args) => {\n    callbackArray.slice().forEach((callback) => {\n      callback(...args)\n    })\n  }\n\n  return { listen, notify }\n}\n\nconst windowWidthMeasure = createMeasure({\n  name: \"window-width\",\n  compute: () => window.innerWidth,\n  register: (onchange) => {\n    window.addEventListener(\"resize\", onchange)\n    window.addEventListener(\"orientationchange\", onchange)\n    return () => {\n      window.removeEventListener(\"resize\", onchange)\n      window.removeEventListener(\"orientationchange\", onchange)\n    }\n  },\n})\n\nconst createBreakpoint = (measure, breakpointValue) => {\n  const getBreakpointState = () => {\n    const value = measure.get()\n\n    if (value < breakpointValue) {\n      return \"below\"\n    }\n    if (value > breakpointValue) {\n      return \"above\"\n    }\n    return \"equals\"\n  }\n\n  let currentBreakpointState = getBreakpointState()\n\n  const isAbove = () => {\n    return measure.get() > breakpointValue\n  }\n\n  const isBelow = () => {\n    return measure.get() < breakpointValue\n  }\n\n  const breakpointChanged = createSignal()\n\n  measure.changed.listen(() => {\n    const breakpointState = getBreakpointState()\n    if (breakpointState !== currentBreakpointState) {\n      const breakpointStatePrevious = currentBreakpointState\n      currentBreakpointState = breakpointState\n      breakpointChanged.notify(breakpointState, breakpointStatePrevious)\n    }\n  })\n\n  return {\n    isAbove,\n    isBelow,\n    changed: breakpointChanged,\n  }\n}\n\n// const windowScrollTop = createMeasure({\n//   name: \"window-scroll-top\",\n//   compute: () => window.scrollTop,\n//   register: (onchange) => {\n//     window.addEventListener(\"scroll\", onchange)\n//     return () => {\n//       window.removeEventListener(\"scroll\", onchange)\n//     }\n//   },\n// })\n",
    "import { removeForceHideElement, activateToolbarSection } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\nimport { createHorizontalBreakpoint } from \"../util/responsive.js\"\nimport { toggleTooltip } from \"../tooltip/tooltip.js\"\nimport { notifyExecutionResult } from \"../notification/toolbar.notification.js\"\n\nconst WINDOW_MEDIUM_WIDTH = 570\n\nexport const renderExecutionInToolbar = ({ executedFileRelativeUrl }) => {\n  // reset file execution indicator ui\n  applyExecutionIndicator()\n  removeForceHideElement(document.querySelector(\"#execution-indicator\"))\n\n  // apply responsive design on fileInput if needed + add listener on resize screen\n  const input = document.querySelector(\"#file-input\")\n  const fileWidthBreakpoint = createHorizontalBreakpoint(WINDOW_MEDIUM_WIDTH)\n  const handleFileWidthBreakpoint = () => {\n    resizeInput(input, fileWidthBreakpoint)\n  }\n  handleFileWidthBreakpoint()\n  fileWidthBreakpoint.changed.listen(handleFileWidthBreakpoint)\n  input.value = executedFileRelativeUrl\n  resizeInput(input, fileWidthBreakpoint)\n\n  activateToolbarSection(document.querySelector(\"#file\"))\n  removeForceHideElement(document.querySelector(\"#file\"))\n\n  window.parent.__jsenv__.executionResultPromise.then(\n    ({ status, startTime, endTime }) => {\n      const execution = { status, startTime, endTime }\n      applyExecutionIndicator(execution)\n\n      const executionStorageKey = executedFileRelativeUrl\n      const previousExecution = sessionStorage.hasOwnProperty(\n        executionStorageKey,\n      )\n        ? JSON.parse(sessionStorage.getItem(executionStorageKey))\n        : undefined\n      notifyExecutionResult(\n        executedFileRelativeUrl,\n        execution,\n        previousExecution,\n      )\n\n      sessionStorage.setItem(executedFileRelativeUrl, JSON.stringify(execution))\n    },\n  )\n}\n\nconst applyExecutionIndicator = ({\n  status = \"running\",\n  startTime,\n  endTime,\n} = {}) => {\n  const executionIndicator = document.querySelector(\"#execution-indicator\")\n  enableVariant(executionIndicator, { execution: status })\n  const variantNode = executionIndicator.querySelector(\"[data-when-active]\")\n\n  variantNode.querySelector(\"button\").onclick = () =>\n    toggleTooltip(executionIndicator)\n  variantNode.querySelector(\".tooltip\").textContent = computeText({\n    status,\n    startTime,\n    endTime,\n  })\n}\n\nconst computeText = ({ status, startTime, endTime }) => {\n  if (status === \"completed\") {\n    return `Execution completed in ${endTime - startTime}ms`\n  }\n\n  if (status === \"errored\") {\n    return `Execution failed in ${endTime - startTime}ms`\n  }\n\n  if (status === \"running\") {\n    return \"Executing...\"\n  }\n\n  return \"\"\n}\n\nconst resizeInput = (input, fileWidthBreakpoint) => {\n  const size = fileWidthBreakpoint.isBelow() ? 20 : 40\n  if (input.value.length > size) {\n    input.style.width = `${size}ch`\n  } else {\n    input.style.width = `${input.value.length}ch`\n  }\n}\n",
    "export const createDetailedMessage = (message, details = {}) => {\n  let string = `${message}`\n\n  Object.keys(details).forEach((key) => {\n    const value = details[key]\n    string += `\n--- ${key} ---\n${\n  Array.isArray(value)\n    ? value.join(`\n`)\n    : value\n}`\n  })\n\n  return string\n}\n",
    "export const COMPILE_ID_BEST = \"best\"\n\nexport const COMPILE_ID_OTHERWISE = \"otherwise\"\n\nexport const COMPILE_ID_BUILD_GLOBAL = \"build-global\"\n\nexport const COMPILE_ID_BUILD_GLOBAL_FILES = \"build-global-files\"\n\nexport const COMPILE_ID_BUILD_COMMONJS = \"build-commonjs\"\n\nexport const COMPILE_ID_BUILD_COMMONJS_FILES = \"build-commonjs-files\"\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { COMPILE_ID_OTHERWISE } from \"../CONSTANTS.js\"\n\nexport const computeCompileIdFromGroupId = ({ groupId, groupMap }) => {\n  if (typeof groupId === \"undefined\") {\n    if (COMPILE_ID_OTHERWISE in groupMap) {\n      return COMPILE_ID_OTHERWISE\n    }\n\n    const keys = Object.keys(groupMap)\n    if (keys.length === 1) {\n      return keys[0]\n    }\n\n    throw new Error(createUnexpectedGroupIdMessage({ groupMap }))\n  }\n\n  if (groupId in groupMap === false) {\n    throw new Error(createUnexpectedGroupIdMessage({ groupId, groupMap }))\n  }\n\n  return groupId\n}\n\nconst createUnexpectedGroupIdMessage = ({ compileId, groupMap }) =>\n  createDetailedMessage(`unexpected groupId.`, {\n    [\"expected compiled id\"]: Object.keys(groupMap),\n    [\"received compile id\"]: compileId,\n  })\n",
    "export const firstMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 0 ? match[1] || undefined : undefined\n}\n\nexport const secondMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 1 ? match[2] || undefined : undefined\n}\n\nexport const userAgentToVersion = (userAgent) => {\n  return firstMatch(/version\\/(\\d+(\\.?_?\\d+)+)/i, userAgent) || undefined\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectAndroid = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/(android)/i.test(userAgent)) {\n    return {\n      name: \"android\",\n      version: firstMatch(/Android (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectInternetExplorer = () =>\n  userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/msie|trident/i.test(userAgent)) {\n    return {\n      name: \"ie\",\n      version: firstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch, userAgentToVersion } from \"./util.js\"\n\nexport const detectOpera = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  // opera below 13\n  if (/opera/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        userAgentToVersion(userAgent) ||\n        firstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  // opera above 13\n  if (/opr\\/|opios/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        firstMatch(/(?:opr|opios)[\\s/](\\S+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  return null\n}\n",
    "import { secondMatch } from \"./util.js\"\n\nexport const detectEdge = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/edg([ea]|ios)/i.test(userAgent)) {\n    return {\n      name: \"edge\",\n      version: secondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectFirefox = () =>\n  userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/firefox|iceweasel|fxios/i.test(userAgent)) {\n    return {\n      name: \"firefox\",\n      version: firstMatch(\n        /(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,\n        userAgent,\n      ),\n    }\n  }\n  return null\n}\n",
    "import { userAgentToVersion, firstMatch } from \"./util.js\"\n\nexport const detectChrome = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/chromium/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version:\n        firstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  if (/chrome|crios|crmo/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version: firstMatch(\n        /(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,\n        userAgent,\n      ),\n    }\n  }\n\n  return null\n}\n",
    "import { userAgentToVersion } from \"./util.js\"\n\nexport const detectSafari = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/safari|applewebkit/i.test(userAgent)) {\n    return {\n      name: \"safari\",\n      version: userAgentToVersion(userAgent),\n    }\n  }\n  return null\n}\n",
    "export const detectElectron = () => null // TODO\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectIOS = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/iPhone;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  if (/iPad;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "// https://github.com/Ahmdrza/detect-browser/blob/26254f85cf92795655a983bfd759d85f3de850c6/detect-browser.js#L1\n// https://github.com/lancedikson/bowser/blob/master/src/parser-browsers.js#L1\n\nimport { detectAndroid } from \"./detectAndroid.js\"\nimport { detectInternetExplorer } from \"./detectInternetExplorer.js\"\nimport { detectOpera } from \"./detectOpera.js\"\nimport { detectEdge } from \"./detectEdge.js\"\nimport { detectFirefox } from \"./detectFirefox.js\"\nimport { detectChrome } from \"./detectChrome.js\"\nimport { detectSafari } from \"./detectSafari.js\"\nimport { detectElectron } from \"./detectElectron.js\"\nimport { detectIOS } from \"./detectIOS.js\"\n\nconst detectorCompose = (detectors) => () => {\n  let i = 0\n  while (i < detectors.length) {\n    const detector = detectors[i]\n    i++\n    const result = detector()\n    if (result) {\n      return result\n    }\n  }\n  return null\n}\n\nconst detector = detectorCompose([\n  detectOpera,\n  detectInternetExplorer,\n  detectEdge,\n  detectFirefox,\n  detectChrome,\n  detectSafari,\n  detectElectron,\n  detectIOS,\n  detectAndroid,\n])\n\nexport const detectBrowser = () => {\n  const { name = \"other\", version = \"unknown\" } = detector() || {}\n\n  return {\n    name: normalizeName(name),\n    version: normalizeVersion(version),\n  }\n}\n\nconst normalizeName = (name) => {\n  return name.toLowerCase()\n}\n\nconst normalizeVersion = (version) => {\n  if (version.indexOf(\".\") > -1) {\n    const parts = version.split(\".\")\n    // remove extraneous .\n    return parts.slice(0, 3).join(\".\")\n  }\n\n  if (version.indexOf(\"_\") > -1) {\n    const parts = version.split(\"_\")\n    // remove extraneous _\n    return parts.slice(0, 3).join(\"_\")\n  }\n\n  return version\n}\n",
    "export const valueToVersion = (value) => {\n  if (typeof value === \"number\") {\n    return numberToVersion(value)\n  }\n\n  if (typeof value === \"string\") {\n    return stringToVersion(value)\n  }\n\n  throw new TypeError(`version must be a number or a string, got ${value}`)\n}\n\nconst numberToVersion = (number) => {\n  return {\n    major: number,\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst stringToVersion = (string) => {\n  if (string.indexOf(\".\") > -1) {\n    const parts = string.split(\".\")\n    return {\n      major: Number(parts[0]),\n      minor: parts[1] ? Number(parts[1]) : 0,\n      patch: parts[2] ? Number(parts[2]) : 0,\n    }\n  }\n\n  if (isNaN(string)) {\n    return {\n      major: 0,\n      minor: 0,\n      patch: 0,\n    }\n  }\n\n  return {\n    major: Number(string),\n    minor: 0,\n    patch: 0,\n  }\n}\n",
    "import { valueToVersion } from \"./valueToVersion.js\"\n\nexport const versionCompare = (versionA, versionB) => {\n  const semanticVersionA = valueToVersion(versionA)\n  const semanticVersionB = valueToVersion(versionB)\n\n  const majorDiff = semanticVersionA.major - semanticVersionB.major\n  if (majorDiff > 0) {\n    return majorDiff\n  }\n  if (majorDiff < 0) {\n    return majorDiff\n  }\n\n  const minorDiff = semanticVersionA.minor - semanticVersionB.minor\n  if (minorDiff > 0) {\n    return minorDiff\n  }\n  if (minorDiff < 0) {\n    return minorDiff\n  }\n\n  const patchDiff = semanticVersionA.patch - semanticVersionB.patch\n  if (patchDiff > 0) {\n    return patchDiff\n  }\n  if (patchDiff < 0) {\n    return patchDiff\n  }\n\n  return 0\n}\n",
    "import { versionCompare } from \"./versionCompare.js\"\n\nexport const versionIsBelow = (versionSupposedBelow, versionSupposedAbove) => {\n  return versionCompare(versionSupposedBelow, versionSupposedAbove) < 0\n}\n",
    "import { versionIsBelow } from \"./versionIsBelow.js\"\n\nexport const findHighestVersion = (...values) => {\n  if (values.length === 0) throw new Error(`missing argument`)\n\n  return values.reduce((highestVersion, value) => {\n    if (versionIsBelow(highestVersion, value)) {\n      return value\n    }\n    return highestVersion\n  })\n}\n",
    "import { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const resolveGroup = ({ name, version }, groupMap) => {\n  return Object.keys(groupMap).find((compileIdCandidate) => {\n    const { minRuntimeVersions } = groupMap[compileIdCandidate]\n    const versionForGroup = minRuntimeVersions[name]\n    if (!versionForGroup) {\n      return false\n    }\n    const highestVersion = findHighestVersion(version, versionForGroup)\n    return highestVersion === version\n  })\n}\n",
    "import { fetchJson } from \"../../browser-utils/fetchJson.js\"\nimport { computeCompileIdFromGroupId } from \"../computeCompileIdFromGroupId.js\"\nimport { detectBrowser } from \"../detectBrowser/detectBrowser.js\"\nimport { resolveGroup } from \"../resolveGroup.js\"\n\nexport const scanBrowserRuntimeFeatures = async ({\n  coverageHandledFromOutside = false,\n  failFastOnFeatureDetection = false,\n} = {}) => {\n  const {\n    outDirectoryRelativeUrl,\n    inlineImportMapIntoHTML,\n    customCompilerPatterns,\n    compileServerGroupMap,\n  } = await fetchJson(\"/.jsenv/__compile_server_meta__.json\")\n\n  const browser = detectBrowser()\n  const compileId = computeCompileIdFromGroupId({\n    groupId: resolveGroup(browser, compileServerGroupMap),\n    groupMap: compileServerGroupMap,\n  })\n  const groupInfo = compileServerGroupMap[compileId]\n\n  const featuresReport = {\n    importmap: undefined,\n    dynamicImport: undefined,\n    topLevelAwait: undefined,\n    jsonImportAssertions: undefined,\n    cssImportAssertions: undefined,\n    newStylesheet: undefined,\n  }\n  await detectSupportedFeatures({\n    featuresReport,\n    failFastOnFeatureDetection,\n    inlineImportMapIntoHTML,\n  })\n  const pluginRequiredNameArray = await pluginRequiredNamesFromGroupInfo(\n    groupInfo,\n    {\n      featuresReport,\n      coverageHandledFromOutside,\n    },\n  )\n\n  const canAvoidCompilation =\n    customCompilerPatterns.length === 0 &&\n    pluginRequiredNameArray.length === 0 &&\n    featuresReport.importmap &&\n    featuresReport.dynamicImport &&\n    featuresReport.topLevelAwait\n\n  return {\n    canAvoidCompilation,\n    featuresReport,\n    customCompilerPatterns,\n    pluginRequiredNameArray,\n    inlineImportMapIntoHTML,\n    outDirectoryRelativeUrl,\n    compileId,\n    browser,\n  }\n}\n\nconst pluginRequiredNamesFromGroupInfo = async (\n  groupInfo,\n  { featuresReport, coverageHandledFromOutside },\n) => {\n  const { pluginRequiredNameArray } = groupInfo\n  const requiredPluginNames = pluginRequiredNameArray.slice()\n  const markPluginAsSupported = (name) => {\n    const index = requiredPluginNames.indexOf(name)\n    if (index > -1) {\n      requiredPluginNames.splice(index, 1)\n    }\n  }\n\n  // When instrumentation CAN be handed by playwright\n  // https://playwright.dev/docs/api/class-chromiumcoverage#chromiumcoveragestartjscoverageoptions\n  // coverageHandledFromOutside is true and \"transform-instrument\" becomes non mandatory\n  if (coverageHandledFromOutside) {\n    markPluginAsSupported(\"transform-instrument\")\n  }\n\n  if (pluginRequiredNameArray.includes(\"transform-import-assertions\")) {\n    const jsonImportAssertions = await supportsJsonImportAssertions()\n    featuresReport.jsonImportAssertions = jsonImportAssertions\n\n    const cssImportAssertions = await supportsCssImportAssertions()\n    featuresReport.cssImportAssertions = cssImportAssertions\n\n    if (jsonImportAssertions && cssImportAssertions) {\n      markPluginAsSupported(\"transform-import-assertions\")\n    }\n  }\n\n  if (pluginRequiredNameArray.includes(\"new-stylesheet-as-jsenv-import\")) {\n    const newStylesheet = supportsNewStylesheet()\n    featuresReport.newStylesheet = newStylesheet\n    markPluginAsSupported(\"new-stylesheet-as-jsenv-import\")\n  }\n\n  return requiredPluginNames\n}\n\nconst detectSupportedFeatures = async ({\n  featuresReport,\n  failFastOnFeatureDetection,\n  inlineImportMapIntoHTML,\n}) => {\n  // start testing importmap support first and not in paralell\n  // so that there is not module script loaded beore importmap is injected\n  // it would log an error in chrome console and return undefined\n  const importmap = await supportsImportmap({\n    // chrome supports inline but not remote importmap\n    // https://github.com/WICG/import-maps/issues/235\n\n    // at this stage we won't know if the html file will use\n    // an importmap or not and if that importmap is inline or specified with an src\n    // so we should test if browser support local and remote importmap.\n    // But there exploring server can inline importmap by transforming html\n    // and in that case we can test only the local importmap support\n    // so we test importmap support and the remote one\n    remote: !inlineImportMapIntoHTML,\n  })\n  featuresReport.importmap = importmap\n  if (!importmap && failFastOnFeatureDetection) {\n    return\n  }\n\n  const dynamicImport = await supportsDynamicImport()\n  featuresReport.dynamicImport = dynamicImport\n  if (!dynamicImport && failFastOnFeatureDetection) {\n    return\n  }\n\n  const topLevelAwait = await supportsTopLevelAwait()\n  featuresReport.topLevelAwait = topLevelAwait\n  if (!topLevelAwait && failFastOnFeatureDetection) {\n    return\n  }\n}\n\nconst supportsImportmap = async ({ remote = true } = {}) => {\n  const specifier = asBase64Url(`export default false`)\n  const importMap = {\n    imports: {\n      [specifier]: asBase64Url(`export default true`),\n    },\n  }\n  const importmapScript = document.createElement(\"script\")\n  const importmapString = JSON.stringify(importMap, null, \"  \")\n  importmapScript.type = \"importmap\"\n  if (remote) {\n    importmapScript.src = `data:application/json;base64,${window.btoa(\n      importmapString,\n    )}`\n  } else {\n    importmapScript.textContent = importmapString\n  }\n  document.body.appendChild(importmapScript)\n\n  try {\n    await executeWithScriptModuleInjection(\n      `import supported from \"${specifier}\"; window.__jsenv_runtime_test_importmap__ = supported`,\n    )\n    document.body.removeChild(importmapScript)\n    return window.__jsenv_runtime_test_importmap__\n  } catch (e) {\n    document.body.removeChild(importmapScript)\n    return false\n  }\n}\n\nconst supportsDynamicImport = async () => {\n  const moduleSource = asBase64Url(`export default 42`)\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_dynamic_import__ = import(${JSON.stringify(\n        moduleSource,\n      )})`,\n    )\n    const namespace = await window.__jsenv_runtime_test_dynamic_import__\n    return namespace.default === 42\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsNewStylesheet = () => {\n  try {\n    // eslint-disable-next-line no-new\n    new CSSStyleSheet()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsTopLevelAwait = async () => {\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_top_level_await__ = await Promise.resolve(42)`,\n    )\n    return window.__jsenv_runtime_test_top_level_await__ === 42\n  } catch (e) {\n    return false\n  }\n}\n\n// to execute in a browser devtools\n// const featuresReport = {}\n// await detectSupportedFeatures({ featuresReport, inlineImportMapIntoHTML: true })\n// console.log(featuresReport)\n\nconst supportsJsonImportAssertions = async () => {\n  const jsonBase64Url = asBase64Url(\"42\", \"application/json\")\n  const moduleSource = asBase64Url(\n    `import data from \"${jsonBase64Url}\" assert { type: \"json\" }\nexport default data`,\n  )\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_json_import_assertion__ = import(${JSON.stringify(\n        moduleSource,\n      )})`,\n    )\n    const namespace = await window.__jsenv_runtime_test_json_import_assertion__\n    return namespace.default === 42\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsCssImportAssertions = async () => {\n  const cssBase64Url = asBase64Url(\"p { color: red; }\", \"text/css\")\n  const moduleSource = asBase64Url(\n    `import css from \"${cssBase64Url}\" assert { type: \"css\" }\nexport default css`,\n  )\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_css_import_assertion__ = import(${JSON.stringify(\n        moduleSource,\n      )})`,\n    )\n    const namespace = await window.__jsenv_runtime_test_css_import_assertion__\n    return namespace.default instanceof CSSStyleSheet\n  } catch (e) {\n    return false\n  }\n}\n\nconst executeWithScriptModuleInjection = (code) => {\n  const scriptModule = document.createElement(\"script\")\n  scriptModule.type = \"module\"\n\n  const loadPromise = new Promise((resolve, reject) => {\n    scriptModule.onload = () => {\n      document.body.removeChild(scriptModule)\n      resolve()\n    }\n    scriptModule.onerror = () => {\n      document.body.removeChild(scriptModule)\n      reject()\n    }\n    document.body.appendChild(scriptModule)\n  })\n\n  scriptModule.src = asBase64Url(code)\n\n  return loadPromise\n}\n\nconst asBase64Url = (text, mimeType = \"application/javascript\") => {\n  return `data:${mimeType};base64,${window.btoa(text)}`\n}\n\n// const cssImportAssertions = await supportsCssImportAssertions()\n// console.log({ cssImportAssertions })\n",
    "import { scanBrowserRuntimeFeatures } from \"../../../runtime/createBrowserRuntime/scanBrowserRuntimeFeatures.js\"\nimport { removeForceHideElement } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\n\nexport const renderCompilationInToolbar = ({ compileGroup }) => {\n  const browserSupportRootNode = document.querySelector(\"#browser_support\")\n  const filesCompilationRootNode = document.querySelector(\"#files_compilation\")\n\n  removeForceHideElement(browserSupportRootNode)\n  removeForceHideElement(filesCompilationRootNode)\n\n  scanBrowserRuntimeFeatures().then(\n    ({\n      canAvoidCompilation,\n      featuresReport,\n      customCompilerPatterns,\n      pluginRequiredNameArray,\n      inlineImportMapIntoHTML,\n      outDirectoryRelativeUrl,\n      compileId,\n    }) => {\n      const browserSupport = canAvoidCompilation\n        ? inlineImportMapIntoHTML\n          ? \"partial\"\n          : \"full\"\n        : \"no\"\n      enableVariant(browserSupportRootNode, {\n        browserSupport,\n      })\n      if (browserSupport === \"no\") {\n        browserSupportRootNode.querySelector(\n          `a.browser_support_read_more_link`,\n        ).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files needs to be compiled to be executable in this browser because: ${getBrowserSupportMessage(\n              {\n                missingOnly: true,\n                featuresReport,\n                customCompilerPatterns,\n                pluginRequiredNameArray,\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      } else if (browserSupport === \"partial\") {\n        browserSupportRootNode.querySelector(\n          `a.browser_support_read_more_link`,\n        ).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files (except html) can be executed directly in this browser because: ${getBrowserSupportMessage(\n              {\n                featuresReport,\n                customCompilerPatterns,\n                pluginRequiredNameArray,\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      } else if (browserSupport === \"full\") {\n        browserSupportRootNode.querySelector(\n          `a.browser_support_read_more_link`,\n        ).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files can be executed directly in this browser because: ${getBrowserSupportMessage(\n              {\n                featuresReport,\n                customCompilerPatterns,\n                pluginRequiredNameArray,\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      }\n\n      const filesCompilation = compileGroup.compileId\n        ? \"yes\"\n        : inlineImportMapIntoHTML\n        ? \"html_only\"\n        : \"no\"\n      enableVariant(filesCompilationRootNode, {\n        filesCompilation,\n        compiled: compileGroup.compileId ? \"yes\" : \"no\",\n      })\n      filesCompilationRootNode.querySelector(\"a.go_to_source_link\").onclick =\n        () => {\n          window.parent.location = `/${compileGroup.fileRelativeUrl}`\n        }\n      filesCompilationRootNode.querySelector(\"a.go_to_compiled_link\").onclick =\n        () => {\n          window.parent.location = `/${outDirectoryRelativeUrl}${compileId}/${compileGroup.fileRelativeUrl}`\n        }\n\n      const shouldCompile =\n        filesCompilation !== \"yes\" && browserSupport === \"no\"\n\n      if (shouldCompile) {\n        document\n          .querySelector(\".files_compilation_text\")\n          .setAttribute(\"data-warning\", \"\")\n        document\n          .querySelector(\".browser_support_text\")\n          .setAttribute(\"data-warning\", \"\")\n        document\n          .querySelector(\"#settings-button\")\n          .setAttribute(\"data-warning\", \"\")\n      } else {\n        document\n          .querySelector(\".files_compilation_text\")\n          .removeAttribute(\"data-warning\")\n        document\n          .querySelector(\".browser_support_text\")\n          .removeAttribute(\"data-warning\")\n        document\n          .querySelector(\"#settings-button\")\n          .removeAttribute(\"data-warning\")\n      }\n    },\n  )\n}\n\nconst getBrowserSupportMessage = ({\n  missingOnly,\n  featuresReport,\n  customCompilerPatterns,\n  pluginRequiredNameArray,\n  inlineImportMapIntoHTML,\n}) => {\n  const parts = []\n\n  if (featuresReport.importmap) {\n    if (!missingOnly) {\n      if (inlineImportMapIntoHTML) {\n        parts.push(`importmaps are supported (only when inlined in html files)`)\n      } else {\n        parts.push(`importmaps are supported`)\n      }\n    }\n  } else {\n    parts.push(`importmaps are not supported`)\n  }\n\n  if (featuresReport.dynamicImport) {\n    if (!missingOnly) {\n      parts.push(`dynamic imports are supported`)\n    }\n  } else {\n    parts.push(`dynamic imports are not supported`)\n  }\n\n  if (featuresReport.topLevelAwait) {\n    if (!missingOnly) {\n      parts.push(`top level await is supported`)\n    }\n  } else {\n    parts.push(`top level await is not supported`)\n  }\n\n  const pluginRequiredCount = pluginRequiredNameArray.length\n  if (pluginRequiredCount === 0) {\n    if (!missingOnly) {\n      parts.push(`all plugins are natively supported`)\n    }\n  } else {\n    parts.push(\n      `${pluginRequiredCount} plugins are mandatory: ${pluginRequiredNameArray}`,\n    )\n  }\n\n  const customCompilerCount = customCompilerPatterns.length\n  if (customCompilerCount === 0) {\n    // no need to talk about something unused\n  } else {\n    parts.push(\n      `${customCompilerCount} custom compilers enabled: ${customCompilerPatterns}`,\n    )\n  }\n\n  return `\n- ${parts.join(`\n- `)}`\n}\n",
    "import { removeForceHideElement } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\nimport {\n  toggleTooltip,\n  removeAutoShowTooltip,\n  autoShowTooltip,\n} from \"../tooltip/tooltip.js\"\n\nlet livereloadingAvailableOnServer = false\nconst parentEventSourceClient = window.parent.__jsenv_event_source_client__\n\nexport const initToolbarEventSource = ({ livereloading }) => {\n  removeForceHideElement(document.querySelector(\"#eventsource-indicator\"))\n  livereloadingAvailableOnServer = livereloading\n  if (!livereloadingAvailableOnServer) {\n    disableLivereloadSetting()\n  }\n  parentEventSourceClient.setConnectionStatusChangeCallback(() => {\n    updateEventSourceIndicator()\n  })\n  const livereloadCheckbox = document.querySelector(\"#toggle-livereload\")\n  livereloadCheckbox.checked = parentEventSourceClient.isLivereloadEnabled()\n  livereloadCheckbox.onchange = () => {\n    parentEventSourceClient.setLivereloadPreference(livereloadCheckbox.checked)\n    updateEventSourceIndicator()\n  }\n  updateEventSourceIndicator()\n}\n\nconst updateEventSourceIndicator = () => {\n  const eventSourceIndicator = document.querySelector(\"#eventsource-indicator\")\n  const fileChanges = parentEventSourceClient.getFileChanges()\n  const changeCount = Object.keys(fileChanges).length\n  const eventSourceConnectionState =\n    parentEventSourceClient.getConnectionStatus()\n  enableVariant(eventSourceIndicator, {\n    eventsource: eventSourceConnectionState,\n    livereload: parentEventSourceClient.isLivereloadEnabled() ? \"on\" : \"off\",\n    changes: changeCount > 0 ? \"yes\" : \"no\",\n  })\n\n  const variantNode = document.querySelector(\n    \"#eventsource-indicator > [data-when-active]\",\n  )\n  variantNode.querySelector(\"button\").onclick = () => {\n    toggleTooltip(eventSourceIndicator)\n  }\n\n  if (eventSourceConnectionState === \"connecting\") {\n    variantNode.querySelector(\"a\").onclick = () => {\n      parentEventSourceClient.disconnect()\n    }\n  } else if (eventSourceConnectionState === \"connected\") {\n    removeAutoShowTooltip(eventSourceIndicator)\n    if (changeCount) {\n      const changeLink = variantNode.querySelector(\".eventsource-changes-link\")\n      changeLink.innerHTML = changeCount\n      changeLink.onclick = () => {\n        console.log(JSON.stringify(fileChanges, null, \"  \"), fileChanges)\n        // eslint-disable-next-line no-alert\n        window.parent.alert(JSON.stringify(fileChanges, null, \"  \"))\n      }\n      variantNode.querySelector(\".eventsource-reload-link\").onclick = () => {\n        parentEventSourceClient.reloadIfNeeded()\n      }\n    }\n  } else if (eventSourceConnectionState === \"disconnected\") {\n    autoShowTooltip(eventSourceIndicator)\n    variantNode.querySelector(\"a\").onclick = () => {\n      parentEventSourceClient.connect()\n    }\n  }\n}\n\nconst disableLivereloadSetting = () => {\n  document\n    .querySelector(\".settings-livereload\")\n    .setAttribute(\"data-disabled\", \"true\")\n  document\n    .querySelector(\".settings-livereload\")\n    .setAttribute(\"title\", `Livereload not available: disabled by server`)\n  document.querySelector(\"#toggle-livereload\").disabled = true\n}\n",
    "import {\n  forceHideElement,\n  removeForceHideElement,\n  deactivateToolbarSection,\n} from \"../util/dom.js\"\nimport { createHorizontalBreakpoint } from \"../util/responsive.js\"\nimport { hideTooltip } from \"../tooltip/tooltip.js\"\n\nconst WINDOW_SMALL_WIDTH = 420\n\nexport const makeToolbarResponsive = () => {\n  // apply responsive design on toolbar icons if needed + add listener on resize screen\n  // ideally we should listen breakpoint once, for now restore toolbar\n  const overflowMenuBreakpoint = createHorizontalBreakpoint(WINDOW_SMALL_WIDTH)\n  const handleOverflowMenuBreakpoint = () => {\n    responsiveToolbar(overflowMenuBreakpoint)\n  }\n  handleOverflowMenuBreakpoint()\n  overflowMenuBreakpoint.changed.listen(handleOverflowMenuBreakpoint)\n\n  // overflow menu\n  document.querySelector(\"#overflow-menu-button\").onclick = () =>\n    toggleOverflowMenu()\n}\n\nconst responsiveToolbar = (overflowMenuBreakpoint) => {\n  // close all tooltips in case opened\n  hideTooltip(document.querySelector(\"#eventsource-indicator\"))\n  hideTooltip(document.querySelector(\"#execution-indicator\"))\n  // close settings box in case opened\n  deactivateToolbarSection(document.querySelector(\"#settings\"))\n\n  if (overflowMenuBreakpoint.isBelow()) {\n    enableOverflow()\n  } else {\n    disableOverflow()\n  }\n}\n\nlet moves = []\n\nconst enableOverflow = () => {\n  // move elements from toolbar to overflow menu\n  const responsiveToolbarElements = document.querySelectorAll(\n    \"[data-responsive-toolbar-element]\",\n  )\n  const overflowMenu = document.querySelector(\"#overflow-menu\")\n\n  // keep a placeholder element to know where to move them back\n  moves = Array.from(responsiveToolbarElements).map((element) => {\n    const placeholder = document.createElement(\"div\")\n    placeholder.style.display = \"none\"\n    placeholder.setAttribute(\"data-placeholder\", \"\")\n    element.parentNode.replaceChild(placeholder, element)\n    overflowMenu.appendChild(element)\n    return { element, placeholder }\n  })\n\n  document\n    .querySelector(\"#toolbar\")\n    .setAttribute(\"data-overflow-menu-enabled\", \"\")\n  removeForceHideElement(document.querySelector(\"#overflow-menu-button\"))\n}\n\nconst disableOverflow = () => {\n  // close overflow menu in case it's open & unselect toggleOverflowMenu button in case it's selected\n  hideOverflowMenu()\n  deactivateToolbarSection(document.querySelector(\"#overflow-menu\"))\n  moves.forEach(({ element, placeholder }) => {\n    placeholder.parentNode.replaceChild(element, placeholder)\n  })\n  moves = []\n\n  document\n    .querySelector(\"#toolbar\")\n    .removeAttribute(\"data-overflow-menu-enabled\")\n  forceHideElement(document.querySelector(\"#overflow-menu-button\"))\n}\n\nconst toggleOverflowMenu = () => {\n  if (overflowMenuIsVisible()) {\n    hideOverflowMenu()\n  } else {\n    showOverflowMenu()\n  }\n}\n\nconst overflowMenuIsVisible = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  return toolbar.hasAttribute(\"data-overflow-menu-visible\")\n}\n\nconst showOverflowMenu = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  document.querySelector(\"#overflow-menu\").setAttribute(\"data-animate\", \"\")\n  toolbar.setAttribute(\"data-overflow-menu-visible\", \"\")\n}\n\nconst hideOverflowMenu = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  toolbar.removeAttribute(\"data-overflow-menu-visible\")\n  document.querySelector(\"#overflow-menu\").removeAttribute(\"data-animate\")\n}\n",
    "import { urlIsInsideOf } from \"@jsenv/filesystem/src/urlIsInsideOf.js\"\nimport { urlToRelativeUrl } from \"@jsenv/filesystem/src/urlToRelativeUrl.js\"\n\nimport { fetchExploringJson } from \"../exploring/fetchExploringJson.js\"\nimport { startJavaScriptAnimation } from \"../toolbar/util/animation.js\"\nimport \"./focus/toolbar.focus.js\"\nimport {\n  getToolbarIframe,\n  deactivateToolbarSection,\n  setStyles,\n} from \"./util/dom.js\"\nimport { createPreference } from \"./util/preferences.js\"\nimport { hideTooltip, hideAllTooltip } from \"./tooltip/tooltip.js\"\nimport {\n  renderToolbarSettings,\n  hideSettings,\n} from \"./settings/toolbar.settings.js\"\nimport { renderToolbarNotification } from \"./notification/toolbar.notification.js\"\nimport { renderToolbarTheme } from \"./theme/toolbar.theme.js\"\nimport { renderToolbarAnimation } from \"./animation/toolbar.animation.js\"\nimport { renderExecutionInToolbar } from \"./execution/toolbar.execution.js\"\nimport { renderCompilationInToolbar } from \"./compilation/toolbar.compilation.js\"\nimport { initToolbarEventSource } from \"./eventsource/toolbar.eventsource.js\"\nimport { makeToolbarResponsive } from \"./responsive/toolbar.responsive.js\"\n\nconst toolbarVisibilityPreference = createPreference(\"toolbar\")\n\nconst renderToolbar = async () => {\n  const executedFileCompiledUrl = window.parent.location.href\n  const compileServerOrigin = window.parent.location.origin\n  // this should not block the whole toolbar rendering + interactivity\n  const exploringConfig = await fetchExploringJson()\n  const { outDirectoryRelativeUrl, livereloading } = exploringConfig\n  const compileGroup = getCompileGroup({\n    executedFileCompiledUrl,\n    outDirectoryRelativeUrl,\n    compileServerOrigin,\n  })\n  const executedFileRelativeUrl = compileGroup.fileRelativeUrl\n\n  const toolbarOverlay = document.querySelector(\"#toolbar-overlay\")\n  toolbarOverlay.onclick = () => {\n    hideAllTooltip()\n    hideSettings()\n  }\n\n  const toolbarVisible = toolbarVisibilityPreference.has()\n    ? toolbarVisibilityPreference.get()\n    : true\n\n  if (toolbarVisible) {\n    showToolbar({ animate: false })\n  } else {\n    hideToolbar({ animate: false })\n  }\n\n  renderToolbarNotification()\n  makeToolbarResponsive()\n  renderToolbarSettings()\n  renderToolbarAnimation()\n  renderToolbarTheme()\n  renderExecutionInToolbar({ executedFileRelativeUrl })\n  renderCompilationInToolbar({ compileGroup })\n  // this might become active but we need to detect this somehow\n  deactivateToolbarSection(document.querySelector(\"#file-list-link\"))\n  initToolbarEventSource({\n    executedFileRelativeUrl,\n    livereloading,\n  })\n\n  // if user click enter or space quickly while closing toolbar\n  // it will cancel the closing\n  // that's why I used toggleToolbar and not hideToolbar\n  document.querySelector(\"#button-close-toolbar\").onclick = () =>\n    toogleToolbar()\n}\n\nconst toogleToolbar = () => {\n  if (toolbarIsVisible()) {\n    hideToolbar()\n  } else {\n    showToolbar()\n  }\n}\n\nconst toolbarIsVisible = () =>\n  document.documentElement.hasAttribute(\"data-toolbar-visible\")\n\nlet hideToolbar = () => {\n  // toolbar hidden by default, nothing to do to hide it by default\n  sendEventToParent(\"toolbar-visibility-change\", false)\n}\n\n// (by the way it might be cool to have the toolbar auto show when)\n// it has something to say (being disconnected from livereload server)\nconst showToolbar = ({ animate = true } = {}) => {\n  toolbarVisibilityPreference.set(true)\n  if (animate) {\n    document.documentElement.setAttribute(\"data-toolbar-animation\", \"\")\n  } else {\n    document.documentElement.removeAttribute(\"data-toolbar-animation\")\n  }\n  document.documentElement.setAttribute(\"data-toolbar-visible\", \"\")\n\n  sendEventToParent(\"toolbar-visibility-change\", true)\n\n  const toolbarIframe = getToolbarIframe()\n  const toolbarIframeParent = toolbarIframe.parentNode\n  const parentWindow = window.parent\n  const parentDocumentElement =\n    parentWindow.document.compatMode === \"CSS1Compat\"\n      ? parentWindow.document.documentElement\n      : parentWindow.document.body\n\n  const scrollYMax =\n    parentDocumentElement.scrollHeight - parentWindow.innerHeight\n  const scrollY = parentDocumentElement.scrollTop\n  const scrollYRemaining = scrollYMax - scrollY\n\n  setStyles(toolbarIframeParent, {\n    \"transition-property\": \"padding-bottom\",\n    \"transition-duration\": \"300ms\",\n  })\n  // maybe we should use js animation here because we would not conflict with css\n  const restoreToolbarIframeParentStyles = setStyles(toolbarIframeParent, {\n    \"scroll-padding-bottom\": \"40px\", // same here we should add 40px\n    \"padding-bottom\": \"40px\", // if there is already one we should add 40px\n  })\n  const restoreToolbarIframeStyles = setStyles(toolbarIframe, {\n    height: \"40px\",\n    visibility: \"visible\",\n  })\n\n  if (scrollYRemaining < 40 && scrollYMax > 0) {\n    const scrollEnd = scrollY + 40\n    startJavaScriptAnimation({\n      duration: 300,\n      onProgress: ({ progress }) => {\n        const value = scrollY + (scrollEnd - scrollY) * progress\n        parentDocumentElement.scrollTop = value\n      },\n    })\n  }\n\n  hideToolbar = () => {\n    restoreToolbarIframeParentStyles()\n    restoreToolbarIframeStyles()\n\n    hideTooltip(document.querySelector(\"#eventsource-indicator\"))\n    hideTooltip(document.querySelector(\"#execution-indicator\"))\n    toolbarVisibilityPreference.set(false)\n    if (animate) {\n      document.documentElement.setAttribute(\"data-toolbar-animation\", \"\")\n    } else {\n      document.documentElement.removeAttribute(\"data-toolbar-animation\")\n    }\n    document.documentElement.removeAttribute(\"data-toolbar-visible\")\n    sendEventToParent(\"toolbar-visibility-change\", false)\n  }\n}\n\nconst getCompileGroup = ({\n  executedFileCompiledUrl,\n  outDirectoryRelativeUrl,\n  compileServerOrigin,\n}) => {\n  const outDirectoryServerUrl = String(\n    new URL(outDirectoryRelativeUrl, compileServerOrigin),\n  )\n  if (urlIsInsideOf(executedFileCompiledUrl, outDirectoryServerUrl)) {\n    const afterCompileDirectory = urlToRelativeUrl(\n      executedFileCompiledUrl,\n      outDirectoryServerUrl,\n    )\n    const slashIndex = afterCompileDirectory.indexOf(\"/\")\n    const fileRelativeUrl = afterCompileDirectory.slice(slashIndex + 1)\n    return {\n      fileRelativeUrl,\n      outDirectoryRelativeUrl,\n      compileId: afterCompileDirectory.slice(0, slashIndex),\n    }\n  }\n  return {\n    fileRelativeUrl: new URL(executedFileCompiledUrl).pathname.slice(1),\n    outDirectoryRelativeUrl,\n    compileId: null,\n  }\n}\n\nconst addExternalCommandCallback = (command, callback) => {\n  const messageEventCallback = (messageEvent) => {\n    const { data } = messageEvent\n    if (typeof data !== \"object\") {\n      return\n    }\n    const { __jsenv__ } = data\n    if (!__jsenv__) {\n      return\n    }\n\n    if (__jsenv__.command !== command) {\n      return\n    }\n\n    callback(...__jsenv__.args)\n  }\n\n  window.addEventListener(\"message\", messageEventCallback)\n  return () => {\n    window.removeEventListener(\"message\", messageEventCallback)\n  }\n}\n\nconst sendEventToParent = (name, data) => {\n  window.parent.postMessage(\n    {\n      __jsenv__: {\n        event: name,\n        data,\n      },\n    },\n    \"*\",\n  )\n}\n\naddExternalCommandCallback(\"renderToolbar\", () => {\n  renderToolbar()\n})\naddExternalCommandCallback(\"showToolbar\", () => {\n  showToolbar()\n})\naddExternalCommandCallback(\"hideToolbar\", () => {\n  hideToolbar()\n})\n\nwindow.toolbar = {\n  render: renderToolbar,\n  show: showToolbar,\n  hide: () => hideToolbar(),\n}\n"
  ],
  "names": [
    "arrayLikeToArray",
    "arr",
    "len",
    "length",
    "arr2",
    "Array",
    "i",
    "isArray",
    "_iterableToArray",
    "iter",
    "Symbol",
    "iterator",
    "from",
    "unsupportedIterableToArray",
    "o",
    "minLen",
    "n",
    "Object",
    "prototype",
    "toString",
    "call",
    "slice",
    "constructor",
    "name",
    "test",
    "TypeError",
    "arrayWithoutHoles",
    "iterableToArray",
    "nonIterableSpread",
    "nativeTypeOf",
    "obj",
    "customTypeOf",
    "urlIsInsideOf",
    "url",
    "otherUrl",
    "urlObject",
    "URL",
    "otherUrlObject",
    "origin",
    "urlPathname",
    "pathname",
    "otherUrlPathname",
    "isInside",
    "startsWith",
    "getCommonPathname",
    "otherPathname",
    "firstDifferentCharacterIndex",
    "findFirstDifferentCharacterIndex",
    "commonString",
    "charAt",
    "firstDifferentSlashIndex",
    "lastIndexOf",
    "string",
    "otherString",
    "maxCommonLength",
    "Math",
    "min",
    "char",
    "otherChar",
    "pathnameToParentPathname",
    "slashLastIndex",
    "urlToRelativeUrl",
    "baseUrl",
    "baseUrlObject",
    "protocol",
    "urlAsString",
    "String",
    "username",
    "password",
    "host",
    "afterUrlScheme",
    "hash",
    "search",
    "baseUrlRessourceWithoutLeadingSlash",
    "basePathname",
    "commonPathname",
    "specificPathname",
    "baseSpecificPathname",
    "includes",
    "baseSpecificParentPathname",
    "relativeDirectoriesNotation",
    "replace",
    "relativeUrl",
    "key",
    "value",
    "defineProperty",
    "enumerable",
    "configurable",
    "writable",
    "ownKeys",
    "object",
    "enumerableOnly",
    "keys",
    "getOwnPropertySymbols",
    "symbols",
    "filter",
    "sym",
    "getOwnPropertyDescriptor",
    "push",
    "apply",
    "_objectSpread2",
    "target",
    "arguments",
    "source",
    "forEach",
    "getOwnPropertyDescriptors",
    "defineProperties",
    "excluded",
    "sourceKeys",
    "indexOf",
    "objectWithoutPropertiesLoose",
    "sourceSymbolKeys",
    "propertyIsEnumerable",
    "then",
    "direct",
    "Promise",
    "resolve",
    "f",
    "args",
    "e",
    "reject",
    "body",
    "result",
    "fetchUsingXHR",
    "signal",
    "method",
    "credentials",
    "headers",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "XMLHttpRequest",
    "failure",
    "error",
    "settled",
    "cleanup",
    "ontimeout",
    "onerror",
    "onload",
    "onreadystatechange",
    "Error",
    "createRequestError",
    "addEventListener",
    "abort",
    "abortError",
    "readyState",
    "open",
    "setRequestHeader",
    "withCredentials",
    "computeWithCredentials",
    "hasBlob",
    "responseType",
    "send",
    "responseUrl",
    "responseURL",
    "responseStatus",
    "status",
    "responseStatusText",
    "statusText",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "response",
    "responseText",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "text",
    "blobToText",
    "arrayBufferToText",
    "buffer",
    "json",
    "JSON",
    "parse",
    "blob",
    "Blob",
    "cloneBuffer",
    "arrayBuffer",
    "blobToArrayBuffer",
    "formData",
    "hasFormData",
    "textToFormData",
    "canUseBlob",
    "window",
    "FileReader",
    "FormData",
    "hasArrayBuffer",
    "ArrayBuffer",
    "hasSearchParams",
    "URLSearchParams",
    "stack",
    "promise",
    "res",
    "rej",
    "originSameAsGlobalOrigin",
    "location",
    "globalOrigin",
    "hrefToOrigin",
    "isPrototypeOf",
    "isDataView",
    "isArrayBufferView",
    "headerMap",
    "headersString",
    "getAllResponseHeaders",
    "lines",
    "trim",
    "split",
    "line",
    "parts",
    "shift",
    "join",
    "toLowerCase",
    "href",
    "scheme",
    "hrefToScheme",
    "secondProtocolSlashIndex",
    "pathnameSlashIndex",
    "colonIndex",
    "DataView",
    "isView",
    "viewClasses",
    "form",
    "bytes",
    "append",
    "decodeURIComponent",
    "reader",
    "fileReaderReady",
    "readAsArrayBuffer",
    "readAsText",
    "view",
    "Uint8Array",
    "chars",
    "fromCharCode",
    "byteLength",
    "set",
    "_await",
    "fetchNative",
    "mode",
    "options",
    "fetch",
    "responseToHeaders",
    "_async",
    "fetchUrl",
    "AbortController",
    "fetchJson",
    "recover",
    "fetchExploringJson",
    "aborted",
    "updateIframeOverflowOnParentWindow",
    "aTooltipIsOpened",
    "document",
    "querySelector",
    "settingsAreOpened",
    "enableIframeOverflowOnParentWindow",
    "disableIframeOverflowOnParentWindow",
    "iframeOverflowEnabled",
    "iframe",
    "getToolbarIframe",
    "transitionDuration",
    "style",
    "setStyles",
    "setTimeout",
    "iframes",
    "parent",
    "querySelectorAll",
    "find",
    "contentWindow",
    "forceHideElement",
    "element",
    "setAttribute",
    "removeForceHideElement",
    "removeAttribute",
    "styles",
    "elementStyle",
    "restoreStyles",
    "map",
    "styleName",
    "restore",
    "currentStyle",
    "toolbarSectionIsActive",
    "hasAttribute",
    "activateToolbarSection",
    "deactivateToolbarSection",
    "startJavaScriptAnimation",
    "duration",
    "timingFunction",
    "t",
    "onProgress",
    "onCancel",
    "onComplete",
    "isNaN",
    "parseInt",
    "startMs",
    "performance",
    "now",
    "currentRequestAnimationFrameId",
    "done",
    "rawProgress",
    "progress",
    "handler",
    "nowMs",
    "requestAnimationFrame",
    "stop",
    "cancelAnimationFrame",
    "mousedownEvent",
    "defaultPrevented",
    "documentElement",
    "touchstartEvent",
    "keydownEvent",
    "createPreference",
    "has",
    "localStorage",
    "hasOwnProperty",
    "get",
    "getItem",
    "undefined",
    "setItem",
    "stringify",
    "toggleTooltip",
    "hideTooltip",
    "showTooltip",
    "autoShowTooltip",
    "removeAutoShowTooltip",
    "hideAllTooltip",
    "elementsWithTooltip",
    "elementWithTooltip",
    "renderToolbarSettings",
    "onclick",
    "toggleSettings",
    "settingsAreVisible",
    "hideSettings",
    "showSettings",
    "enableVariant",
    "rootNode",
    "variables",
    "nodesNotMatching",
    "attributeIndicatingACondition",
    "nodeNotMatching",
    "conditionAttributeValue",
    "getAttribute",
    "matches",
    "testCondition",
    "renameAttribute",
    "attributeIndicatingAMatch",
    "nodesMatching",
    "nodeMatching",
    "condition",
    "parseCondition",
    "some",
    "node",
    "newName",
    "notificationAvailable",
    "Notification",
    "notificationPreference",
    "arrayOfOpenedNotifications",
    "renderToolbarNotification",
    "notifCheckbox",
    "notifSetting",
    "disabled",
    "updatePermission",
    "permission",
    "checked",
    "getNotificationPreference",
    "onchange",
    "setNotificationPreference",
    "notification",
    "close",
    "notifPermission",
    "notif_permission",
    "requestPermission",
    "notifyExecutionResult",
    "executedFileRelativeUrl",
    "execution",
    "previousExecution",
    "notificationEnabled",
    "notificationOptions",
    "lang",
    "icon",
    "getFaviconHref",
    "clickToFocus",
    "clickToClose",
    "notify",
    "link",
    "title",
    "focus",
    "onclose",
    "index",
    "splice",
    "requestPromise",
    "DARK_THEME",
    "LIGHT_THEME",
    "themePreference",
    "renderToolbarTheme",
    "theme",
    "getThemePreference",
    "checkbox",
    "setTheme",
    "setThemePreference",
    "animationPreference",
    "renderToolbarAnimation",
    "animCheckbox",
    "getAnimationPreference",
    "setAnimationPreference",
    "onPreferenceChange",
    "enableAnimation",
    "disableAnimation",
    "createHorizontalBreakpoint",
    "breakpointValue",
    "createBreakpoint",
    "windowWidthMeasure",
    "createMeasure",
    "compute",
    "register",
    "currentValue",
    "changed",
    "createSignal",
    "unregister",
    "previousValue",
    "callbackArray",
    "listen",
    "callback",
    "innerWidth",
    "removeEventListener",
    "measure",
    "getBreakpointState",
    "currentBreakpointState",
    "isAbove",
    "isBelow",
    "breakpointChanged",
    "breakpointState",
    "breakpointStatePrevious",
    "WINDOW_MEDIUM_WIDTH",
    "renderExecutionInToolbar",
    "applyExecutionIndicator",
    "input",
    "fileWidthBreakpoint",
    "handleFileWidthBreakpoint",
    "resizeInput",
    "__jsenv__",
    "executionResultPromise",
    "startTime",
    "endTime",
    "executionStorageKey",
    "sessionStorage",
    "executionIndicator",
    "variantNode",
    "textContent",
    "computeText",
    "size",
    "width",
    "createDetailedMessage",
    "message",
    "details",
    "COMPILE_ID_OTHERWISE",
    "computeCompileIdFromGroupId",
    "groupId",
    "groupMap",
    "createUnexpectedGroupIdMessage",
    "compileId",
    "firstMatch",
    "regexp",
    "match",
    "secondMatch",
    "userAgentToVersion",
    "userAgent",
    "detectAndroid",
    "navigatorToBrowser",
    "navigator",
    "appVersion",
    "version",
    "detectInternetExplorer",
    "userAgentToBrowser",
    "detectOpera",
    "detectEdge",
    "detectFirefox",
    "detectChrome",
    "detectSafari",
    "detectElectron",
    "detectIOS",
    "detectorCompose",
    "detectors",
    "detector",
    "detectBrowser",
    "normalizeName",
    "normalizeVersion",
    "valueToVersion",
    "numberToVersion",
    "stringToVersion",
    "number",
    "major",
    "minor",
    "patch",
    "Number",
    "versionCompare",
    "versionA",
    "versionB",
    "semanticVersionA",
    "semanticVersionB",
    "majorDiff",
    "minorDiff",
    "patchDiff",
    "versionIsBelow",
    "versionSupposedBelow",
    "versionSupposedAbove",
    "findHighestVersion",
    "values",
    "reduce",
    "highestVersion",
    "resolveGroup",
    "compileIdCandidate",
    "minRuntimeVersions",
    "versionForGroup",
    "scanBrowserRuntimeFeatures",
    "coverageHandledFromOutside",
    "failFastOnFeatureDetection",
    "outDirectoryRelativeUrl",
    "inlineImportMapIntoHTML",
    "customCompilerPatterns",
    "compileServerGroupMap",
    "browser",
    "groupInfo",
    "featuresReport",
    "importmap",
    "dynamicImport",
    "topLevelAwait",
    "jsonImportAssertions",
    "cssImportAssertions",
    "newStylesheet",
    "detectSupportedFeatures",
    "pluginRequiredNamesFromGroupInfo",
    "pluginRequiredNameArray",
    "canAvoidCompilation",
    "requiredPluginNames",
    "markPluginAsSupported",
    "supportsJsonImportAssertions",
    "supportsCssImportAssertions",
    "supportsNewStylesheet",
    "supportsImportmap",
    "remote",
    "supportsDynamicImport",
    "supportsTopLevelAwait",
    "specifier",
    "asBase64Url",
    "importMap",
    "imports",
    "importmapScript",
    "createElement",
    "importmapString",
    "type",
    "src",
    "btoa",
    "appendChild",
    "executeWithScriptModuleInjection",
    "removeChild",
    "__jsenv_runtime_test_importmap__",
    "moduleSource",
    "__jsenv_runtime_test_dynamic_import__",
    "namespace",
    "default",
    "CSSStyleSheet",
    "__jsenv_runtime_test_top_level_await__",
    "jsonBase64Url",
    "__jsenv_runtime_test_json_import_assertion__",
    "cssBase64Url",
    "__jsenv_runtime_test_css_import_assertion__",
    "code",
    "scriptModule",
    "loadPromise",
    "mimeType",
    "renderCompilationInToolbar",
    "compileGroup",
    "browserSupportRootNode",
    "filesCompilationRootNode",
    "browserSupport",
    "alert",
    "getBrowserSupportMessage",
    "missingOnly",
    "filesCompilation",
    "compiled",
    "fileRelativeUrl",
    "shouldCompile",
    "pluginRequiredCount",
    "customCompilerCount",
    "livereloadingAvailableOnServer",
    "parentEventSourceClient",
    "__jsenv_event_source_client__",
    "initToolbarEventSource",
    "livereloading",
    "disableLivereloadSetting",
    "setConnectionStatusChangeCallback",
    "updateEventSourceIndicator",
    "livereloadCheckbox",
    "isLivereloadEnabled",
    "setLivereloadPreference",
    "eventSourceIndicator",
    "fileChanges",
    "getFileChanges",
    "changeCount",
    "eventSourceConnectionState",
    "getConnectionStatus",
    "eventsource",
    "livereload",
    "changes",
    "disconnect",
    "changeLink",
    "innerHTML",
    "console",
    "log",
    "reloadIfNeeded",
    "connect",
    "WINDOW_SMALL_WIDTH",
    "makeToolbarResponsive",
    "overflowMenuBreakpoint",
    "handleOverflowMenuBreakpoint",
    "responsiveToolbar",
    "toggleOverflowMenu",
    "enableOverflow",
    "disableOverflow",
    "moves",
    "responsiveToolbarElements",
    "overflowMenu",
    "placeholder",
    "display",
    "parentNode",
    "replaceChild",
    "hideOverflowMenu",
    "overflowMenuIsVisible",
    "showOverflowMenu",
    "toolbar",
    "_call",
    "toolbarVisibilityPreference",
    "renderToolbar",
    "executedFileCompiledUrl",
    "compileServerOrigin",
    "exploringConfig",
    "getCompileGroup",
    "toolbarOverlay",
    "toolbarVisible",
    "showToolbar",
    "animate",
    "hideToolbar",
    "toogleToolbar",
    "toolbarIsVisible",
    "sendEventToParent",
    "toolbarIframe",
    "toolbarIframeParent",
    "parentWindow",
    "parentDocumentElement",
    "compatMode",
    "scrollYMax",
    "scrollHeight",
    "innerHeight",
    "scrollY",
    "scrollTop",
    "scrollYRemaining",
    "restoreToolbarIframeParentStyles",
    "restoreToolbarIframeStyles",
    "height",
    "visibility",
    "scrollEnd",
    "outDirectoryServerUrl",
    "afterCompileDirectory",
    "slashIndex",
    "addExternalCommandCallback",
    "command",
    "messageEventCallback",
    "messageEvent",
    "data",
    "postMessage",
    "event",
    "render",
    "show",
    "hide"
  ],
  "mappings": "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"
}