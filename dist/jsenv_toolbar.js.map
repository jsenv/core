{
  "version": 3,
  "file": "jsenv_toolbar.js",
  "sources": [
    "../node_modules/@jsenv/filesystem/src/urlIsInsideOf.js",
    "../node_modules/@jsenv/filesystem/src/internal/getCommonPathname.js",
    "../node_modules/@jsenv/filesystem/src/internal/pathnameToParentPathname.js",
    "../node_modules/@jsenv/filesystem/src/urlToRelativeUrl.js",
    "../helpers/babel/defineProperty/defineProperty.js",
    "../node_modules/@jsenv/logger/src/createDetailedMessage.js",
    "../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../node_modules/@jsenv/cancellation/src/createCancellationToken.js",
    "../helpers/babel/typeof/typeof.js",
    "../node_modules/@jsenv/cancellation/src/cancelError.js",
    "../helpers/babel/arrayLikeToArray/arrayLikeToArray.js",
    "../helpers/babel/unsupportedIterableToArray/unsupportedIterableToArray.js",
    "../helpers/babel/objectSpread2/objectSpread2.js",
    "../src/internal/browser-utils/fetchUsingXHR.js",
    "../src/internal/browser-utils/fetch-browser.js",
    "../src/internal/browser-utils/fetchJson.js",
    "../src/internal/exploring/fetchExploringJson.js",
    "../src/internal/toolbar/util/dom.js",
    "../src/internal/toolbar/util/animation.js",
    "../src/internal/toolbar/focus/toolbar.focus.js",
    "../src/internal/toolbar/backtolist/toolbar.backtolist.js",
    "../src/internal/toolbar/util/preferences.js",
    "../src/internal/toolbar/tooltip/tooltip.js",
    "../src/internal/toolbar/settings/toolbar.settings.js",
    "../src/internal/toolbar/notification/toolbar.notification.js",
    "../src/internal/toolbar/theme/toolbar.theme.js",
    "../src/internal/toolbar/animation/toolbar.animation.js",
    "../src/internal/toolbar/variant/variant.js",
    "../src/internal/toolbar/util/responsive.js",
    "../src/internal/toolbar/execution/toolbar.execution.js",
    "../helpers/babel/arrayWithHoles/arrayWithHoles.js",
    "../helpers/babel/iterableToArrayLimit/iterableToArrayLimit.js",
    "../helpers/babel/nonIterableRest/nonIterableRest.js",
    "../helpers/babel/slicedToArray/slicedToArray.js",
    "../src/internal/CONSTANTS.js",
    "../src/internal/runtime/computeCompileIdFromGroupId.js",
    "../src/internal/runtime/detectBrowser/util.js",
    "../src/internal/runtime/detectBrowser/detectAndroid.js",
    "../src/internal/runtime/detectBrowser/detectInternetExplorer.js",
    "../src/internal/runtime/detectBrowser/detectOpera.js",
    "../src/internal/runtime/detectBrowser/detectEdge.js",
    "../src/internal/runtime/detectBrowser/detectFirefox.js",
    "../src/internal/runtime/detectBrowser/detectChrome.js",
    "../src/internal/runtime/detectBrowser/detectSafari.js",
    "../src/internal/runtime/detectBrowser/detectElectron.js",
    "../src/internal/runtime/detectBrowser/detectIOS.js",
    "../src/internal/runtime/detectBrowser/detectBrowser.js",
    "../src/internal/semantic-versioning/valueToVersion.js",
    "../src/internal/semantic-versioning/versionCompare.js",
    "../src/internal/semantic-versioning/versionIsBelow.js",
    "../src/internal/semantic-versioning/findHighestVersion.js",
    "../src/internal/runtime/resolveGroup.js",
    "../src/internal/runtime/resolveBrowserGroup.js",
    "../src/internal/runtime/createBrowserRuntime/scanBrowserRuntimeFeatures.js",
    "../src/internal/toolbar/compilation/toolbar.compilation.js",
    "../src/internal/toolbar/util/util.js",
    "../src/internal/toolbar/eventsource/connectEventSource.js",
    "../src/internal/toolbar/eventsource/connectCompileServerEventSource.js",
    "../src/internal/toolbar/eventsource/toolbar.eventsource.js",
    "../src/internal/toolbar/responsive/toolbar.responsive.js",
    "../src/internal/toolbar/toolbar.main.js"
  ],
  "sourcesContent": [
    "export const urlIsInsideOf = (url, otherUrl) => {\n  const urlObject = new URL(url)\n  const otherUrlObject = new URL(otherUrl)\n\n  if (urlObject.origin !== otherUrlObject.origin) {\n    return false\n  }\n\n  const urlPathname = urlObject.pathname\n  const otherUrlPathname = otherUrlObject.pathname\n  if (urlPathname === otherUrlPathname) {\n    return false\n  }\n\n  const isInside = urlPathname.startsWith(otherUrlPathname)\n  return isInside\n}\n",
    "export const getCommonPathname = (pathname, otherPathname) => {\n  const firstDifferentCharacterIndex = findFirstDifferentCharacterIndex(pathname, otherPathname)\n\n  // pathname and otherpathname are exactly the same\n  if (firstDifferentCharacterIndex === -1) {\n    return pathname\n  }\n\n  const commonString = pathname.slice(0, firstDifferentCharacterIndex + 1)\n\n  // the first different char is at firstDifferentCharacterIndex\n  if (pathname.charAt(firstDifferentCharacterIndex) === \"/\") {\n    return commonString\n  }\n\n  if (otherPathname.charAt(firstDifferentCharacterIndex) === \"/\") {\n    return commonString\n  }\n\n  const firstDifferentSlashIndex = commonString.lastIndexOf(\"/\")\n  return pathname.slice(0, firstDifferentSlashIndex + 1)\n}\n\nconst findFirstDifferentCharacterIndex = (string, otherString) => {\n  const maxCommonLength = Math.min(string.length, otherString.length)\n  let i = 0\n  while (i < maxCommonLength) {\n    const char = string.charAt(i)\n    const otherChar = otherString.charAt(i)\n    if (char !== otherChar) {\n      return i\n    }\n    i++\n  }\n  if (string.length === otherString.length) {\n    return -1\n  }\n  // they differ at maxCommonLength\n  return maxCommonLength\n}\n",
    "export const pathnameToParentPathname = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex === -1) {\n    return \"/\"\n  }\n\n  return pathname.slice(0, slashLastIndex + 1)\n}\n",
    "import { getCommonPathname } from \"./internal/getCommonPathname.js\"\nimport { pathnameToParentPathname } from \"./internal/pathnameToParentPathname.js\"\n\nexport const urlToRelativeUrl = (url, baseUrl) => {\n  const urlObject = new URL(url)\n  const baseUrlObject = new URL(baseUrl)\n\n  if (urlObject.protocol !== baseUrlObject.protocol) {\n    const urlAsString = String(url)\n    return urlAsString\n  }\n\n  if (\n    urlObject.username !== baseUrlObject.username ||\n    urlObject.password !== baseUrlObject.password ||\n    urlObject.host !== baseUrlObject.host\n  ) {\n    const afterUrlScheme = String(url).slice(urlObject.protocol.length)\n    return afterUrlScheme\n  }\n\n  const { pathname, hash, search } = urlObject\n  if (pathname === \"/\") {\n    const baseUrlRessourceWithoutLeadingSlash = baseUrlObject.pathname.slice(1)\n    return baseUrlRessourceWithoutLeadingSlash\n  }\n\n  const basePathname = baseUrlObject.pathname\n  const commonPathname = getCommonPathname(pathname, basePathname)\n  if (!commonPathname) {\n    const urlAsString = String(url)\n    return urlAsString\n  }\n\n  const specificPathname = pathname.slice(commonPathname.length)\n  const baseSpecificPathname = basePathname.slice(commonPathname.length)\n  if (baseSpecificPathname.includes(\"/\")) {\n    const baseSpecificParentPathname = pathnameToParentPathname(baseSpecificPathname)\n    const relativeDirectoriesNotation = baseSpecificParentPathname.replace(/.*?\\//g, \"../\")\n    const relativeUrl = `${relativeDirectoriesNotation}${specificPathname}${search}${hash}`\n    return relativeUrl\n  }\n\n  const relativeUrl = `${specificPathname}${search}${hash}`\n  return relativeUrl\n}\n",
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "export const createDetailedMessage = (message, details = {}) => {\n  let string = `${message}`\n\n  Object.keys(details).forEach((key) => {\n    const value = details[key]\n    string += `\n--- ${key} ---\n${\n  Array.isArray(value)\n    ? value.join(`\n`)\n    : value\n}`\n  })\n\n  return string\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "export const createCancellationToken = () => {\n  const register = (callback) => {\n    if (typeof callback !== \"function\") {\n      throw new Error(`callback must be a function, got ${callback}`)\n    }\n\n    return {\n      callback,\n      unregister: () => {},\n    }\n  }\n\n  const throwIfRequested = () => undefined\n\n  return {\n    register,\n    cancellationRequested: false,\n    throwIfRequested,\n  }\n}\n",
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export const createCancelError = (reason) => {\n  const cancelError = new Error(`canceled because ${reason}`)\n  cancelError.name = \"CANCEL_ERROR\"\n  cancelError.reason = reason\n  return cancelError\n}\n\nexport const isCancelError = (value) => {\n  return value && typeof value === \"object\" && value.name === \"CANCEL_ERROR\"\n}\n\nexport const errorToCancelReason = (error) => {\n  if (!isCancelError(error)) return \"\"\n  return error.reason\n}\n",
    "/* eslint-disable no-eq-null, eqeqeq */\nexport default function arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length\n  var arr2 = new Array(len)\n  for (var i = 0; i < len; i++) arr2[i] = arr[i]\n  return arr2\n}\n",
    "/* eslint-disable consistent-return */\nimport arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\nexport default function unsupportedIterableToArray(o, minLen) {\n  if (!o) return\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen)\n  var n = Object.prototype.toString.call(o).slice(8, -1)\n  if (n === \"Object\" && o.constructor) n = o.constructor.name\n  if (n === \"Map\" || n === \"Set\") return Array.from(o)\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return arrayLikeToArray(o, minLen)\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object)\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object)\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable\n      })\n    }\n    keys.push.apply(keys, symbols)\n  }\n  return keys\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {}\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key])\n      })\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\n      })\n    }\n  }\n  return target\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { createDetailedMessage } from \"@jsenv/logger\"\n// ideally we should do some window.fetch detection (ensuring it has cancellation) and accordingly\n// fallback to this polyfill (or even use an existing polyfill would be better)\n// https://github.com/github/fetch/blob/master/fetch.js\n\nexport const fetchUsingXHR = async (\n  url,\n  {\n    cancellationToken = createCancellationToken(),\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  cancellationToken.register((cancelError) => {\n    xhr.abort()\n    failure(cancelError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl =\n    \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    createDetailedMessage(`error during xhr request on ${url}.`, {\n      [\"error stack\"]: error.stack,\n    }),\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return (\n        value && viewClasses.includes(Object.prototype.toString.call(value))\n      )\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { fetchUsingXHR } from \"./fetchUsingXHR.js\"\n\nconst fetchNative = async (\n  url,\n  {\n    cancellationToken = createCancellationToken(),\n    mode = \"cors\",\n    ...options\n  } = {},\n) => {\n  const abortController = new AbortController()\n\n  let cancelError\n  cancellationToken.register((reason) => {\n    cancelError = reason\n    abortController.abort(reason)\n  })\n\n  let response\n  try {\n    response = await window.fetch(url, {\n      signal: abortController.signal,\n      mode,\n      ...options,\n    })\n  } catch (e) {\n    if (cancelError && e.name === \"AbortError\") {\n      throw cancelError\n    }\n    throw e\n  }\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" &&\n  typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { fetchUrl } from \"./fetch-browser.js\"\n\nexport const fetchJson = async (url, options = {}) => {\n  const response = await fetchUrl(url, options)\n  const object = await response.json()\n  return object\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { isCancelError } from \"@jsenv/cancellation/main.browser.js\"\n\nimport { fetchJson } from \"../browser-utils/fetchJson.js\"\n\nexport const fetchExploringJson = async ({ cancellationToken } = {}) => {\n  try {\n    const exploringInfo = await fetchJson(\"/.jsenv/exploring.json\", {\n      cancellationToken,\n    })\n    return exploringInfo\n  } catch (e) {\n    if (isCancelError(e)) {\n      throw e\n    }\n    throw new Error(\n      createDetailedMessage(\n        `Cannot communicate with exploring server due to a network error`,\n        {\n          [\"error stack\"]: e.stack,\n        },\n      ),\n    )\n  }\n}\n",
    "export const updateIframeOverflowOnParentWindow = () => {\n  const aTooltipIsOpened =\n    document.querySelector(\"[data-tooltip-visible]\") ||\n    document.querySelector(\"[data-tooltip-auto-visible]\")\n  const settingsAreOpened = document.querySelector(\"#settings[data-active]\")\n\n  if (aTooltipIsOpened || settingsAreOpened) {\n    enableIframeOverflowOnParentWindow()\n  } else {\n    disableIframeOverflowOnParentWindow()\n  }\n}\n\nlet iframeOverflowEnabled = false\nconst enableIframeOverflowOnParentWindow = () => {\n  if (iframeOverflowEnabled) return\n  iframeOverflowEnabled = true\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"100%\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nconst disableIframeOverflowOnParentWindow = () => {\n  if (!iframeOverflowEnabled) return\n  iframeOverflowEnabled = false\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"40px\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nexport const getToolbarIframe = () => {\n  const iframes = Array.from(window.parent.document.querySelectorAll(\"iframe\"))\n  return iframes.find((iframe) => iframe.contentWindow === window)\n}\n\nexport const forceHideElement = (element) => {\n  element.setAttribute(\"data-force-hide\", \"\")\n}\n\nexport const removeForceHideElement = (element) => {\n  element.removeAttribute(\"data-force-hide\")\n}\n\nexport const setStyles = (element, styles) => {\n  const elementStyle = element.style\n  const restoreStyles = Object.keys(styles).map((styleName) => {\n    let restore\n    if (styleName in elementStyle) {\n      const currentStyle = elementStyle[styleName]\n      restore = () => {\n        elementStyle[styleName] = currentStyle\n      }\n    } else {\n      restore = () => {\n        delete elementStyle[styleName]\n      }\n    }\n\n    elementStyle[styleName] = styles[styleName]\n\n    return restore\n  })\n  return () => {\n    restoreStyles.forEach((restore) => restore())\n  }\n}\n\nexport const setAttributes = (element, attributes) => {\n  Object.keys(attributes).forEach((name) => {\n    element.setAttribute(name, attributes[name])\n  })\n}\n\nexport const getDocumentScroll = () => {\n  return {\n    x: document.documentElement.scrollLeft,\n    y: document.documentElement.scrollTop,\n  }\n}\n\nexport const toolbarSectionIsActive = (element) => {\n  return element.hasAttribute(\"data-active\")\n}\n\nexport const activateToolbarSection = (element) => {\n  element.setAttribute(\"data-active\", \"\")\n}\n\nexport const deactivateToolbarSection = (element) => {\n  element.removeAttribute(\"data-active\")\n}\n",
    "import { setStyles } from \"./dom.js\"\n\nconst animateFallback = () => {\n  return Promise.resolve()\n}\n\nconst animateNative = (\n  node,\n  keyframes,\n  { cancellationToken, ...options } = {},\n) => {\n  const animation = node.animate(keyframes, options)\n  if (cancellationToken) {\n    cancellationToken.register(() => {\n      animation.cancel()\n    })\n  }\n  return new Promise((resolve) => {\n    animation.onfinish = resolve\n  })\n}\n\nexport const canUseAnimation = () =>\n  typeof HTMLElement.prototype.animate === \"function\"\n\nexport const animateElement = canUseAnimation()\n  ? animateNative\n  : animateFallback\n\nexport const fadeIn = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 0,\n      },\n      {\n        opacity: 1,\n      },\n    ],\n    options,\n  )\n\nexport const fadeOut = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 1,\n      },\n      {\n        opacity: 0,\n      },\n    ],\n    options,\n  )\n\nexport const move = (fromNode, toNode, options) => {\n  const fromComputedStyle = window.getComputedStyle(fromNode)\n  const toComputedStyle = window.getComputedStyle(toNode)\n  // get positions of input in toolbar and aElement\n  const fromPosition = fromNode.getBoundingClientRect()\n  const toPosition = toNode.getBoundingClientRect()\n\n  // we'll do the animation in a div preventing overflow and pointer events\n  const div = document.createElement(\"div\")\n  div.style.position = \"absolute\"\n  div.style.left = 0\n  div.style.top = 0\n  div.style.width = `${document.documentElement.scrollWidth}px`\n  div.style.height = `${document.documentElement.scrollHeight}px`\n  div.style.overflow = \"hidden\"\n  div.style.pointerEvents = \"none\"\n\n  const documentScroll = {\n    left: window.pageXOffset || document.documentElement.scrollLeft,\n    top: window.pageYOffset || document.documentElement.scrollTop,\n  }\n\n  // clone node and style it\n  const copy = fromNode.cloneNode(true)\n  copy.style.position = \"absolute\"\n  copy.style.left = `${documentScroll.left + fromPosition.left}px`\n  copy.style.top = `${documentScroll.top + fromPosition.top}px`\n  copy.style.maxWidth = `${fromPosition.right - fromPosition.left}px`\n  copy.style.overflow = toComputedStyle.overflow\n  copy.style.textOverflow = toComputedStyle.textOverflow\n  div.appendChild(copy)\n  document.body.appendChild(div)\n\n  const left =\n    toPosition.left -\n    fromPosition.left -\n    (parseInt(fromComputedStyle.paddingLeft) || 0)\n  const top =\n    toPosition.top -\n    fromPosition.top -\n    (parseInt(fromComputedStyle.paddingTop) || 0)\n  // define final position of new element and the duration\n  const translate = `translate(${left}px, ${top}px)`\n\n  // animate new element\n  return animateElement(\n    copy,\n    [\n      {\n        transform: \"translate(0px, 0px)\",\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n        fontSize: fromComputedStyle.fontSize,\n        height: `${fromPosition.bottom - fromPosition.top}px`,\n        width: \"100%\",\n      },\n      {\n        offset: 0.9,\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n      },\n      {\n        transform: translate,\n        backgroundColor: toComputedStyle.backgroundColor,\n        color: toComputedStyle.color,\n        fontSize: toComputedStyle.fontSize,\n        height: `${toPosition.bottom - toPosition.top}px`,\n        width: toComputedStyle.width,\n      },\n    ],\n    options,\n  ).then(() => {\n    div.parentNode.removeChild(div)\n  })\n}\n\n// the whole point of this toolbar animation wass to flight a visual imperfection when it's done by css transition.\n// This imperfection is a white line sometimes flickering at the bottom of the page.\n// It got fixed by removing the usage of calc(100vh - 40px)\n// It was hapenning in chrome, safari but not inside Firefox\n// I assume it's because Firefox does not read parent element min-height while\n// chrome use it to compute min-height: 100%\nexport const createToolbarAnimation = () => {\n  const collapsedState = {\n    \"#page\": { paddingBottom: 0 },\n    \"footer\": { height: 0 },\n    \"#toolbar\": { visibility: \"hidden\" },\n  }\n  const expandedState = {\n    \"#page\": { paddingBottom: \"40px\" },\n    \"footer\": { height: \"40px\" },\n    \"#toolbar\": { visibility: \"visible\" },\n  }\n  const expandTransition = transit(collapsedState, expandedState, {\n    duration: 300,\n  })\n\n  const expand = () => {\n    expandTransition.play()\n  }\n\n  const collapse = () => {\n    expandTransition.reverse()\n  }\n\n  return { expand, collapse }\n}\n\nexport const transit = (\n  fromState,\n  toState,\n  { commitStyles = true, fill = \"both\", duration = 300 } = {},\n) => {\n  const steps = []\n  Object.keys(fromState).forEach((selector) => {\n    const fromStyles = {}\n    const toStyles = {}\n    const element = document.querySelector(selector)\n\n    const keyframes = []\n    const fromProperties = fromState[selector]\n    const toProperties = toState[selector]\n    Object.keys(fromProperties).forEach((propertyName) => {\n      const from = fromProperties[propertyName]\n      const to = toProperties[propertyName]\n      fromStyles[propertyName] = from\n      toStyles[propertyName] = to\n    })\n    keyframes.push(fromStyles, toStyles)\n\n    let animation\n    if (canUseAnimation()) {\n      const effect = new KeyframeEffect(element, keyframes, { fill, duration })\n      animation = new Animation(effect)\n    } else {\n      animation = {\n        playbackRate: 1,\n        play: () => {\n          animation.onfinish()\n        },\n        reverse: () => {\n          animation.playbackRate = -1\n          animation.onfinish()\n        },\n        finish: () => {},\n        onfinish: () => {},\n      }\n    }\n\n    steps.push({\n      element,\n      animation,\n      fromStyles,\n      toStyles,\n    })\n  })\n\n  const play = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, toStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, toStyles)\n            }\n            resolve()\n          }\n          if (animation.playbackRate === -1) {\n            animation.reverse()\n          } else {\n            animation.play()\n          }\n        })\n      }),\n    )\n  }\n\n  const reverse = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, fromStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, fromStyles)\n            }\n            resolve()\n          }\n          animation.reverse()\n        })\n      }),\n    )\n  }\n\n  const finish = async () => {\n    steps.forEach(({ animation }) => {\n      animation.finish()\n    })\n  }\n\n  return { play, reverse, finish }\n}\n\nexport const startJavaScriptAnimation = ({\n  duration = 300,\n  timingFunction = (t) => t,\n  onProgress = () => {},\n  onCancel = () => {},\n  onComplete = () => {},\n}) => {\n  if (isNaN(duration)) {\n    // console.warn(`duration must be a number, received ${duration}`)\n    return () => {}\n  }\n  duration = parseInt(duration, 10)\n  const startMs = performance.now()\n  let currentRequestAnimationFrameId\n  let done = false\n  let rawProgress = 0\n  let progress = 0\n  const handler = () => {\n    currentRequestAnimationFrameId = null\n    const nowMs = performance.now()\n    rawProgress = Math.min((nowMs - startMs) / duration, 1)\n    progress = timingFunction(rawProgress)\n    done = rawProgress === 1\n    onProgress({\n      done,\n      rawProgress,\n      progress,\n    })\n    if (done) {\n      onComplete()\n    } else {\n      currentRequestAnimationFrameId = window.requestAnimationFrame(handler)\n    }\n  }\n  handler()\n  const stop = () => {\n    if (currentRequestAnimationFrameId) {\n      window.cancelAnimationFrame(currentRequestAnimationFrameId)\n      currentRequestAnimationFrameId = null\n    }\n    if (!done) {\n      done = true\n      onCancel({\n        rawProgress,\n        progress,\n      })\n    }\n  }\n  return stop\n}\n",
    "// handle data-last-interaction attr on html (focusring)\nwindow.addEventListener(\"mousedown\", (mousedownEvent) => {\n  if (mousedownEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"mouse\")\n})\nwindow.addEventListener(\"touchstart\", (touchstartEvent) => {\n  if (touchstartEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"mouse\")\n})\nwindow.addEventListener(\"keydown\", (keydownEvent) => {\n  if (keydownEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"keyboard\")\n})\n",
    "export const renderBackToListInToolbar = ({\n  outDirectoryRelativeUrl,\n  exploringHtmlFileRelativeUrl,\n}) => {\n  const exploringHtmlFileUrl = `/${outDirectoryRelativeUrl}otherwise/${exploringHtmlFileRelativeUrl}`\n\n  document.querySelector(\"#file-list-link a\").href = exploringHtmlFileUrl\n  document.querySelector(\"#file-list-link a\").onclick = (clickEvent) => {\n    if (clickEvent.defaultPrevented) {\n      return\n    }\n\n    if (isClickToOpenTab(clickEvent)) {\n      return\n    }\n\n    window.parent.location.href = exploringHtmlFileUrl\n  }\n}\n\nconst isClickToOpenTab = (clickEvent) => {\n  if (clickEvent.button !== 0) {\n    // Chrome < 55 fires a click event when the middle mouse button is pressed\n    return true\n  }\n  if (clickEvent.metaKey) {\n    return true\n  }\n  if (clickEvent.ctrlKey) {\n    return true\n  }\n  return false\n}\n",
    "export const createPreference = (name) => {\n  return {\n    has: () => localStorage.hasOwnProperty(name),\n    get: () =>\n      localStorage.hasOwnProperty(name)\n        ? JSON.parse(localStorage.getItem(name))\n        : undefined,\n    set: (value) => localStorage.setItem(name, JSON.stringify(value)),\n  }\n}\n",
    "import { updateIframeOverflowOnParentWindow } from \"../util/dom.js\"\n\nexport const toggleTooltip = (element) => {\n  if (element.hasAttribute(\"data-tooltip-visible\")) {\n    hideTooltip(element)\n  } else {\n    showTooltip(element)\n  }\n}\n\nexport const hideTooltip = (element) => {\n  element.removeAttribute(\"data-tooltip-visible\")\n  element.removeAttribute(\"data-tooltip-auto-visible\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const showTooltip = (element) => {\n  element.setAttribute(\"data-tooltip-visible\", \"\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const autoShowTooltip = (element) => {\n  element.setAttribute(\"data-tooltip-auto-visible\", \"\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const removeAutoShowTooltip = (element) => {\n  element.removeAttribute(\"data-tooltip-auto-visible\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const hideAllTooltip = () => {\n  const elementsWithTooltip = Array.from(\n    document.querySelectorAll(\"[data-tooltip-visible]\"),\n  )\n  elementsWithTooltip.forEach((elementWithTooltip) => {\n    hideTooltip(elementWithTooltip)\n  })\n}\n",
    "import {\n  toolbarSectionIsActive,\n  deactivateToolbarSection,\n  activateToolbarSection,\n  updateIframeOverflowOnParentWindow,\n} from \"../util/dom.js\"\n\nexport const renderToolbarSettings = () => {\n  document.querySelector(\"#settings-button\").onclick = toggleSettings\n  document.querySelector(\"#button-close-settings\").onclick = toggleSettings\n}\n\nconst toggleSettings = () => {\n  if (settingsAreVisible()) {\n    hideSettings()\n  } else {\n    showSettings()\n  }\n}\n\nexport const settingsAreVisible = () => {\n  return toolbarSectionIsActive(document.querySelector(`#settings`))\n}\n\nexport const hideSettings = () => {\n  deactivateToolbarSection(document.querySelector(`#settings`))\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const showSettings = () => {\n  activateToolbarSection(document.querySelector(`#settings`))\n  updateIframeOverflowOnParentWindow()\n}\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst notificationPreference = createPreference(\"notification\")\n\nconst arrayOfOpenedNotifications = []\nexport const renderToolbarNotification = () => {\n  const notifCheckbox = document.querySelector(\"#toggle-notifs\")\n  notifCheckbox.checked = getNotificationPreference()\n  notifCheckbox.onchange = () => {\n    setNotificationPreference(notifCheckbox.checked)\n    if (notifCheckbox.checked) {\n      // request permission early\n      // especially useful on firefox where you can request permission\n      // only inside a user generated event such as this onchange handler\n      requestPermission()\n    } else {\n      // slice because arrayOfOpenedNotifications can be mutated while looping\n      arrayOfOpenedNotifications.slice().forEach((notification) => {\n        notification.close()\n      })\n    }\n  }\n}\n\nexport const notifyExecutionResult = (\n  executedFileRelativeUrl,\n  execution,\n  previousExecution,\n) => {\n  const notificationEnabled = getNotificationPreference()\n  if (!notificationEnabled) return\n\n  const notificationOptions = {\n    lang: \"en\",\n    icon: getFaviconHref(),\n    clickToFocus: true,\n    clickToClose: true,\n  }\n\n  if (execution.status === \"errored\") {\n    if (previousExecution) {\n      if (previousExecution.status === \"completed\") {\n        notify(\"Broken\", {\n          ...notificationOptions,\n          body: `${executedFileRelativeUrl} execution now failing.`,\n        })\n      } else {\n        notify(\"Still failing\", {\n          ...notificationOptions,\n          body: `${executedFileRelativeUrl} execution still failing.`,\n        })\n      }\n    } else {\n      notify(\"Failing\", {\n        ...notificationOptions,\n        body: `${executedFileRelativeUrl} execution failed.`,\n      })\n    }\n  } else if (previousExecution && previousExecution.status === \"errored\") {\n    notify(\"Fixed\", {\n      ...notificationOptions,\n      body: `${executedFileRelativeUrl} execution fixed.`,\n    })\n  }\n}\n\nconst notificationAvailable = typeof window.Notification === \"function\"\n\nconst getNotificationPreference = () =>\n  notificationPreference.has() ? notificationPreference.get() : true\n\nconst setNotificationPreference = (value) => notificationPreference.set(value)\n\nconst getFaviconHref = () => {\n  const link = document.querySelector('link[rel=\"icon\"]')\n  return link ? link.href : undefined\n}\n\nconst notify = notificationAvailable\n  ? async (\n      title,\n      { clickToFocus = false, clickToClose = false, ...options } = {},\n    ) => {\n      const permission = await requestPermission()\n      if (permission === \"granted\") {\n        const notification = new Notification(title, options)\n        arrayOfOpenedNotifications.push(notification)\n        notification.onclick = () => {\n          // but if the user navigated inbetween\n          // focusing window will show something else\n          // in that case it could be great to do something\n          // maybe like showing a message saying this execution\n          // is no longer visible\n          // we could also navigauate to this file execution but\n          // there is no guarantee re-executing the file would give same output\n          // and it would also trigger an other notification\n          if (clickToFocus) window.focus()\n          if (clickToClose) notification.close()\n        }\n        notification.onclose = () => {\n          const index = arrayOfOpenedNotifications.indexOf(notification)\n          if (index > -1) {\n            arrayOfOpenedNotifications.splice(index, 1)\n          }\n        }\n        return notification\n      }\n      return null\n    }\n  : () => {}\n\nlet permissionPromise\nconst requestPermission = notificationAvailable\n  ? async () => {\n      if (permissionPromise) return permissionPromise\n      permissionPromise = Notification.requestPermission()\n      const permission = await permissionPromise\n      permissionPromise = undefined\n      return permission\n    }\n  : () => Promise.resolve(\"denied\")\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst DARK_THEME = \"dark\"\nconst LIGHT_THEME = \"light\"\nconst themePreference = createPreference(\"theme\")\n\nexport const renderToolbarTheme = () => {\n  const theme = getThemePreference()\n  const checkbox = document.querySelector(\"#checkbox-dark-theme\")\n  checkbox.checked = theme === DARK_THEME\n  setTheme(theme)\n  checkbox.onchange = () => {\n    if (checkbox.checked) {\n      setThemePreference(DARK_THEME)\n      setTheme(DARK_THEME)\n    } else {\n      setThemePreference(LIGHT_THEME)\n      setTheme(LIGHT_THEME)\n    }\n  }\n}\n\nconst getThemePreference = () => {\n  return themePreference.has() ? themePreference.get() : DARK_THEME\n}\n\nconst setThemePreference = (value) => {\n  themePreference.set(value)\n  setTheme(value)\n}\n\nconst setTheme = (theme) => {\n  document.querySelector(\"html\").setAttribute(\"data-theme\", theme)\n}\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst animationPreference = createPreference(\"animation\")\n\nexport const renderToolbarAnimation = () => {\n  const animCheckbox = document.querySelector(\"#toggle-anims\")\n  animCheckbox.checked = getAnimationPreference()\n  animCheckbox.onchange = () => {\n    setAnimationPreference(animCheckbox.checked)\n    onPreferenceChange(animCheckbox.checked)\n  }\n  onPreferenceChange()\n\n  // enable toolbar transition only after first render\n  setTimeout(() => {\n    document.querySelector(\"#toolbar\").setAttribute(\"data-animate\", \"\")\n  })\n}\n\nconst onPreferenceChange = (value = getAnimationPreference()) => {\n  if (value) {\n    enableAnimation()\n  } else {\n    disableAnimation()\n  }\n}\n\nconst getAnimationPreference = () =>\n  animationPreference.has() ? animationPreference.get() : true\n\nconst setAnimationPreference = (value) => animationPreference.set(value)\n\nconst enableAnimation = () => {\n  document.documentElement.removeAttribute(\"data-animation-disabled\")\n}\n\nconst disableAnimation = () => {\n  document.documentElement.setAttribute(\"data-animation-disabled\", \"\")\n}\n",
    "export const enableVariant = (rootNode, variables) => {\n  const nodesNotMatching = Array.from(\n    rootNode.querySelectorAll(`[${attributeIndicatingACondition}]`),\n  )\n  nodesNotMatching.forEach((nodeNotMatching) => {\n    const conditionAttributeValue = nodeNotMatching.getAttribute(\n      attributeIndicatingACondition,\n    )\n    const matches = testCondition(conditionAttributeValue, variables)\n    if (matches) {\n      renameAttribute(\n        nodeNotMatching,\n        attributeIndicatingACondition,\n        attributeIndicatingAMatch,\n      )\n    }\n  })\n\n  const nodesMatching = Array.from(\n    rootNode.querySelectorAll(`[${attributeIndicatingAMatch}]`),\n  )\n  nodesMatching.forEach((nodeMatching) => {\n    const conditionAttributeValue = nodeMatching.getAttribute(\n      attributeIndicatingAMatch,\n    )\n    const matches = testCondition(conditionAttributeValue, variables)\n    if (!matches) {\n      renameAttribute(\n        nodeMatching,\n        attributeIndicatingAMatch,\n        attributeIndicatingACondition,\n      )\n    }\n  })\n}\n\nconst testCondition = (conditionAttributeValue, variables) => {\n  const condition = parseCondition(conditionAttributeValue)\n  return Object.keys(variables).some((key) => {\n    if (condition.key !== key) {\n      return false\n    }\n    // the condition do not specify a value, any value is ok\n    if (condition.value === undefined) {\n      return true\n    }\n    if (condition.value === variables[key]) {\n      return true\n    }\n    return false\n  })\n}\n\nconst parseCondition = (conditionAttributeValue) => {\n  const colonIndex = conditionAttributeValue.indexOf(\":\")\n  if (colonIndex === -1) {\n    return {\n      key: conditionAttributeValue,\n      value: undefined,\n    }\n  }\n  return {\n    key: conditionAttributeValue.slice(0, colonIndex),\n    value: conditionAttributeValue.slice(colonIndex + 1),\n  }\n}\n\nconst attributeIndicatingACondition = `data-when`\nconst attributeIndicatingAMatch = `data-when-active`\n\nconst renameAttribute = (node, name, newName) => {\n  node.setAttribute(newName, node.getAttribute(name))\n  node.removeAttribute(name)\n}\n",
    "export const createHorizontalBreakpoint = (breakpointValue) => {\n  return createBreakpoint(windowWidthMeasure, breakpointValue)\n}\n\nconst createMeasure = ({ compute, register }) => {\n  let currentValue = compute()\n\n  const get = () => compute()\n\n  const changed = createSignal()\n\n  let unregister = () => {}\n  if (register) {\n    unregister = register(() => {\n      const value = compute()\n      if (value !== currentValue) {\n        const previousValue = value\n        currentValue = value\n        changed.notify(value, previousValue)\n      }\n    })\n  }\n\n  return { get, changed, unregister }\n}\n\nconst createSignal = () => {\n  const callbackArray = []\n\n  const listen = (callback) => {\n    callbackArray.push(callback)\n    return () => {\n      const index = callbackArray.indexOf(callback)\n      if (index > -1) {\n        callbackArray.splice(index, 1)\n      }\n    }\n  }\n\n  const notify = (...args) => {\n    callbackArray.slice().forEach((callback) => {\n      callback(...args)\n    })\n  }\n\n  return { listen, notify }\n}\n\nconst windowWidthMeasure = createMeasure({\n  name: \"window-width\",\n  compute: () => window.innerWidth,\n  register: (onchange) => {\n    window.addEventListener(\"resize\", onchange)\n    window.addEventListener(\"orientationchange\", onchange)\n    return () => {\n      window.removeEventListener(\"resize\", onchange)\n      window.removeEventListener(\"orientationchange\", onchange)\n    }\n  },\n})\n\nconst createBreakpoint = (measure, breakpointValue) => {\n  const getBreakpointState = () => {\n    const value = measure.get()\n\n    if (value < breakpointValue) {\n      return \"below\"\n    }\n    if (value > breakpointValue) {\n      return \"above\"\n    }\n    return \"equals\"\n  }\n\n  let currentBreakpointState = getBreakpointState()\n\n  const isAbove = () => {\n    return measure.get() > breakpointValue\n  }\n\n  const isBelow = () => {\n    return measure.get() < breakpointValue\n  }\n\n  const breakpointChanged = createSignal()\n\n  measure.changed.listen(() => {\n    const breakpointState = getBreakpointState()\n    if (breakpointState !== currentBreakpointState) {\n      const breakpointStatePrevious = currentBreakpointState\n      currentBreakpointState = breakpointState\n      breakpointChanged.notify(breakpointState, breakpointStatePrevious)\n    }\n  })\n\n  return {\n    isAbove,\n    isBelow,\n    changed: breakpointChanged,\n  }\n}\n\n// const windowScrollTop = createMeasure({\n//   name: \"window-scroll-top\",\n//   compute: () => window.scrollTop,\n//   register: (onchange) => {\n//     window.addEventListener(\"scroll\", onchange)\n//     return () => {\n//       window.removeEventListener(\"scroll\", onchange)\n//     }\n//   },\n// })\n",
    "import { removeForceHideElement, activateToolbarSection } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\nimport { createHorizontalBreakpoint } from \"../util/responsive.js\"\nimport { toggleTooltip } from \"../tooltip/tooltip.js\"\nimport { notifyExecutionResult } from \"../notification/toolbar.notification.js\"\n\nconst WINDOW_MEDIUM_WIDTH = 570\n\nexport const renderExecutionInToolbar = ({ executedFileRelativeUrl }) => {\n  // reset file execution indicator ui\n  applyExecutionIndicator()\n  removeForceHideElement(document.querySelector(\"#execution-indicator\"))\n\n  // apply responsive design on fileInput if needed + add listener on resize screen\n  const input = document.querySelector(\"#file-input\")\n  const fileWidthBreakpoint = createHorizontalBreakpoint(WINDOW_MEDIUM_WIDTH)\n  const handleFileWidthBreakpoint = () => {\n    resizeInput(input, fileWidthBreakpoint)\n  }\n  handleFileWidthBreakpoint()\n  fileWidthBreakpoint.changed.listen(handleFileWidthBreakpoint)\n  input.value = executedFileRelativeUrl\n  resizeInput(input, fileWidthBreakpoint)\n\n  activateToolbarSection(document.querySelector(\"#file\"))\n  removeForceHideElement(document.querySelector(\"#file\"))\n\n  window.parent.__jsenv__.executionResultPromise.then(\n    ({ status, startTime, endTime }) => {\n      const execution = { status, startTime, endTime }\n      applyExecutionIndicator(execution)\n\n      const executionStorageKey = executedFileRelativeUrl\n      const previousExecution = sessionStorage.hasOwnProperty(\n        executionStorageKey,\n      )\n        ? JSON.parse(sessionStorage.getItem(executionStorageKey))\n        : undefined\n      notifyExecutionResult(\n        executedFileRelativeUrl,\n        execution,\n        previousExecution,\n      )\n\n      sessionStorage.setItem(executedFileRelativeUrl, JSON.stringify(execution))\n    },\n  )\n}\n\nconst applyExecutionIndicator = ({\n  status = \"running\",\n  startTime,\n  endTime,\n} = {}) => {\n  const executionIndicator = document.querySelector(\"#execution-indicator\")\n  enableVariant(executionIndicator, { execution: status })\n  const variantNode = executionIndicator.querySelector(\"[data-when-active]\")\n\n  variantNode.querySelector(\"button\").onclick = () =>\n    toggleTooltip(executionIndicator)\n  variantNode.querySelector(\".tooltip\").textContent = computeText({\n    status,\n    startTime,\n    endTime,\n  })\n}\n\nconst computeText = ({ status, startTime, endTime }) => {\n  if (status === \"completed\") {\n    return `Execution completed in ${endTime - startTime}ms`\n  }\n\n  if (status === \"errored\") {\n    return `Execution failed in ${endTime - startTime}ms`\n  }\n\n  return \"\"\n}\n\nconst resizeInput = (input, fileWidthBreakpoint) => {\n  const size = fileWidthBreakpoint.isBelow() ? 20 : 40\n  if (input.value.length > size) {\n    input.style.width = `${size}ch`\n  } else {\n    input.style.width = `${input.value.length}ch`\n  }\n}\n",
    "// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arr\n}\n",
    "export default function _iterableToArrayLimit(arr, i) {\n  // this is an expanded form of \\`for...of\\` that properly supports abrupt completions of\n  // iterators etc. variable names have been minimised to reduce the size of this massive\n  // helper. sometimes spec compliance is annoying :(\n  //\n  // _n = _iteratorNormalCompletion\n  // _d = _didIteratorError\n  // _e = _iteratorError\n  // _i = _iterator\n  // _s = _step\n  var _i =\n    arr == null\n      ? null\n      : (typeof Symbol !== \"undefined\" && arr[Symbol.iterator]) || arr[\"@@iterator\"]\n  if (_i == null) return\n  var _arr = []\n  var _n = true\n  var _d = false\n  var _s, _e\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value)\n      if (i && _arr.length === i) break\n    }\n  } catch (err) {\n    _d = true\n    _e = err\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]()\n    } finally {\n      if (_d) throw _e\n    }\n  }\n  return _arr\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithHoles from \"../arrayWithHoles/arrayWithHoles.js\"\nimport iterableToArrayLimit from \"../iterableToArrayLimit/iterableToArrayLimit.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableRest from \"../nonIterableRest/nonIterableRest.js\"\n\nexport default (arr, i) =>\n  arrayWithHoles(arr) ||\n  iterableToArrayLimit(arr, i) ||\n  unsupportedIterableToArray(arr, i) ||\n  nonIterableRest()\n",
    "export const COMPILE_ID_BEST = \"best\"\n\nexport const COMPILE_ID_OTHERWISE = \"otherwise\"\n\nexport const COMPILE_ID_BUILD_GLOBAL = \"build-global\"\n\nexport const COMPILE_ID_BUILD_GLOBAL_FILES = \"build-global-files\"\n\nexport const COMPILE_ID_BUILD_COMMONJS = \"build-commonjs\"\n\nexport const COMPILE_ID_BUILD_COMMONJS_FILES = \"build-commonjs-files\"\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { COMPILE_ID_OTHERWISE } from \"../CONSTANTS.js\"\n\nexport const computeCompileIdFromGroupId = ({ groupId, groupMap }) => {\n  if (typeof groupId === \"undefined\") {\n    if (COMPILE_ID_OTHERWISE in groupMap) {\n      return COMPILE_ID_OTHERWISE\n    }\n\n    const keys = Object.keys(groupMap)\n    if (keys.length === 1) {\n      return keys[0]\n    }\n\n    throw new Error(createUnexpectedGroupIdMessage({ groupMap }))\n  }\n\n  if (groupId in groupMap === false) {\n    throw new Error(createUnexpectedGroupIdMessage({ groupId, groupMap }))\n  }\n\n  return groupId\n}\n\nconst createUnexpectedGroupIdMessage = ({ compileId, groupMap }) =>\n  createDetailedMessage(`unexpected groupId.`, {\n    [\"expected compiled id\"]: Object.keys(groupMap),\n    [\"received compile id\"]: compileId,\n  })\n",
    "export const firstMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 0 ? match[1] || undefined : undefined\n}\n\nexport const secondMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 1 ? match[2] || undefined : undefined\n}\n\nexport const userAgentToVersion = (userAgent) => {\n  return firstMatch(/version\\/(\\d+(\\.?_?\\d+)+)/i, userAgent) || undefined\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectAndroid = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/(android)/i.test(userAgent)) {\n    return {\n      name: \"android\",\n      version: firstMatch(/Android (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectInternetExplorer = () =>\n  userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/msie|trident/i.test(userAgent)) {\n    return {\n      name: \"ie\",\n      version: firstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch, userAgentToVersion } from \"./util.js\"\n\nexport const detectOpera = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  // opera below 13\n  if (/opera/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        userAgentToVersion(userAgent) ||\n        firstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  // opera above 13\n  if (/opr\\/|opios/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        firstMatch(/(?:opr|opios)[\\s/](\\S+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  return null\n}\n",
    "import { secondMatch } from \"./util.js\"\n\nexport const detectEdge = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/edg([ea]|ios)/i.test(userAgent)) {\n    return {\n      name: \"edge\",\n      version: secondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectFirefox = () =>\n  userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/firefox|iceweasel|fxios/i.test(userAgent)) {\n    return {\n      name: \"firefox\",\n      version: firstMatch(\n        /(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,\n        userAgent,\n      ),\n    }\n  }\n  return null\n}\n",
    "import { userAgentToVersion, firstMatch } from \"./util.js\"\n\nexport const detectChrome = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/chromium/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version:\n        firstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  if (/chrome|crios|crmo/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version: firstMatch(\n        /(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,\n        userAgent,\n      ),\n    }\n  }\n\n  return null\n}\n",
    "import { userAgentToVersion } from \"./util.js\"\n\nexport const detectSafari = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/safari|applewebkit/i.test(userAgent)) {\n    return {\n      name: \"safari\",\n      version: userAgentToVersion(userAgent),\n    }\n  }\n  return null\n}\n",
    "export const detectElectron = () => null // TODO\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectIOS = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/iPhone;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  if (/iPad;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "// https://github.com/Ahmdrza/detect-browser/blob/26254f85cf92795655a983bfd759d85f3de850c6/detect-browser.js#L1\n// https://github.com/lancedikson/bowser/blob/master/src/parser-browsers.js#L1\n\nimport { detectAndroid } from \"./detectAndroid.js\"\nimport { detectInternetExplorer } from \"./detectInternetExplorer.js\"\nimport { detectOpera } from \"./detectOpera.js\"\nimport { detectEdge } from \"./detectEdge.js\"\nimport { detectFirefox } from \"./detectFirefox.js\"\nimport { detectChrome } from \"./detectChrome.js\"\nimport { detectSafari } from \"./detectSafari.js\"\nimport { detectElectron } from \"./detectElectron.js\"\nimport { detectIOS } from \"./detectIOS.js\"\n\nconst detectorCompose = (detectors) => () => {\n  let i = 0\n  while (i < detectors.length) {\n    const detector = detectors[i]\n    i++\n    const result = detector()\n    if (result) {\n      return result\n    }\n  }\n  return null\n}\n\nconst detector = detectorCompose([\n  detectOpera,\n  detectInternetExplorer,\n  detectEdge,\n  detectFirefox,\n  detectChrome,\n  detectSafari,\n  detectElectron,\n  detectIOS,\n  detectAndroid,\n])\n\nexport const detectBrowser = () => {\n  const { name = \"other\", version = \"unknown\" } = detector() || {}\n\n  return {\n    name: normalizeName(name),\n    version: normalizeVersion(version),\n  }\n}\n\nconst normalizeName = (name) => {\n  return name.toLowerCase()\n}\n\nconst normalizeVersion = (version) => {\n  if (version.indexOf(\".\") > -1) {\n    const parts = version.split(\".\")\n    // remove extraneous .\n    return parts.slice(0, 3).join(\".\")\n  }\n\n  if (version.indexOf(\"_\") > -1) {\n    const parts = version.split(\"_\")\n    // remove extraneous _\n    return parts.slice(0, 3).join(\"_\")\n  }\n\n  return version\n}\n",
    "export const valueToVersion = (value) => {\n  if (typeof value === \"number\") {\n    return numberToVersion(value)\n  }\n\n  if (typeof value === \"string\") {\n    return stringToVersion(value)\n  }\n\n  throw new TypeError(`version must be a number or a string, got ${value}`)\n}\n\nconst numberToVersion = (number) => {\n  return {\n    major: number,\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst stringToVersion = (string) => {\n  if (string.indexOf(\".\") > -1) {\n    const parts = string.split(\".\")\n    return {\n      major: Number(parts[0]),\n      minor: parts[1] ? Number(parts[1]) : 0,\n      patch: parts[2] ? Number(parts[2]) : 0,\n    }\n  }\n\n  if (isNaN(string)) {\n    return {\n      major: 0,\n      minor: 0,\n      patch: 0,\n    }\n  }\n\n  return {\n    major: Number(string),\n    minor: 0,\n    patch: 0,\n  }\n}\n",
    "import { valueToVersion } from \"./valueToVersion.js\"\n\nexport const versionCompare = (versionA, versionB) => {\n  const semanticVersionA = valueToVersion(versionA)\n  const semanticVersionB = valueToVersion(versionB)\n\n  const majorDiff = semanticVersionA.major - semanticVersionB.major\n  if (majorDiff > 0) {\n    return majorDiff\n  }\n  if (majorDiff < 0) {\n    return majorDiff\n  }\n\n  const minorDiff = semanticVersionA.minor - semanticVersionB.minor\n  if (minorDiff > 0) {\n    return minorDiff\n  }\n  if (minorDiff < 0) {\n    return minorDiff\n  }\n\n  const patchDiff = semanticVersionA.patch - semanticVersionB.patch\n  if (patchDiff > 0) {\n    return patchDiff\n  }\n  if (patchDiff < 0) {\n    return patchDiff\n  }\n\n  return 0\n}\n",
    "import { versionCompare } from \"./versionCompare.js\"\n\nexport const versionIsBelow = (versionSupposedBelow, versionSupposedAbove) => {\n  return versionCompare(versionSupposedBelow, versionSupposedAbove) < 0\n}\n",
    "import { versionIsBelow } from \"./versionIsBelow.js\"\n\nexport const findHighestVersion = (...values) => {\n  if (values.length === 0) throw new Error(`missing argument`)\n\n  return values.reduce((highestVersion, value) => {\n    if (versionIsBelow(highestVersion, value)) {\n      return value\n    }\n    return highestVersion\n  })\n}\n",
    "import { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const resolveGroup = ({ name, version }, groupMap) => {\n  return Object.keys(groupMap).find((compileIdCandidate) => {\n    const { minRuntimeVersions } = groupMap[compileIdCandidate]\n    if (name in minRuntimeVersions === false) {\n      return false\n    }\n    const versionForGroup = minRuntimeVersions[name]\n\n    const highestVersion = findHighestVersion(version, versionForGroup)\n    return highestVersion === version\n  })\n}\n",
    "import { detectBrowser } from \"./detectBrowser/detectBrowser.js\"\nimport { resolveGroup } from \"./resolveGroup.js\"\n\nexport const resolveBrowserGroup = (groupMap) =>\n  resolveGroup(detectBrowser(), groupMap)\n",
    "import { fetchJson } from \"../../browser-utils/fetchJson.js\"\nimport { computeCompileIdFromGroupId } from \"../computeCompileIdFromGroupId.js\"\nimport { resolveBrowserGroup } from \"../resolveBrowserGroup.js\"\n\nexport const scanBrowserRuntimeFeatures = async ({\n  coverageInstrumentationRequired = true,\n  failFastOnFeatureDetection = false,\n} = {}) => {\n  const { outDirectoryRelativeUrl } = await fetchJson(\n    \"/.jsenv/compile-meta.json\",\n  )\n  const groupMapUrl = `/${outDirectoryRelativeUrl}groupMap.json`\n  const envFileUrl = `/${outDirectoryRelativeUrl}env.json`\n  const [groupMap, envJson] = await Promise.all([\n    fetchJson(groupMapUrl),\n    fetchJson(envFileUrl),\n  ])\n\n  const compileId = computeCompileIdFromGroupId({\n    groupId: resolveBrowserGroup(groupMap),\n    groupMap,\n  })\n  const groupInfo = groupMap[compileId]\n  const { inlineImportMapIntoHTML, customCompilerPatterns } = envJson\n\n  const featuresReport = {\n    babelPluginRequiredNames: babelPluginRequiredNamesFromGroupInfo(groupInfo, {\n      coverageInstrumentationRequired,\n    }),\n    ...(await getFeaturesReport({\n      failFastOnFeatureDetection,\n      groupInfo,\n      inlineImportMapIntoHTML,\n      customCompilerPatterns,\n      coverageInstrumentationRequired,\n    })),\n    customCompilerPatterns,\n  }\n\n  const canAvoidCompilation =\n    featuresReport.customCompilerPatterns.length === 0 &&\n    featuresReport.jsenvPluginRequiredNames.length === 0 &&\n    featuresReport.babelPluginRequiredNames.length === 0 &&\n    featuresReport.importmapSupported &&\n    featuresReport.dynamicImportSupported &&\n    featuresReport.topLevelAwaitSupported\n\n  return {\n    featuresReport,\n    canAvoidCompilation,\n    inlineImportMapIntoHTML,\n    outDirectoryRelativeUrl,\n    compileId,\n  }\n}\n\nconst getFeaturesReport = async ({\n  failFastOnFeatureDetection,\n  groupInfo,\n  inlineImportMapIntoHTML,\n}) => {\n  const featuresReport = {\n    jsenvPluginRequiredNames: [],\n    importmapSupported: undefined,\n    dynamicImportSupported: undefined,\n    topLevelAwaitSupported: undefined,\n  }\n\n  const jsenvPluginRequiredNames = groupInfo.jsenvPluginRequiredNameArray\n  featuresReport.jsenvPluginRequiredNames = jsenvPluginRequiredNames\n  if (jsenvPluginRequiredNames.length > 0 && failFastOnFeatureDetection) {\n    return featuresReport\n  }\n\n  // start testing importmap support first and not in paralell\n  // so that there is not module script loaded beore importmap is injected\n  // it would log an error in chrome console and return undefined\n  const importmapSupported = await supportsImportmap({\n    // chrome supports inline but not remote importmap\n    // https://github.com/WICG/import-maps/issues/235\n\n    // at this stage we won't know if the html file will use\n    // an importmap or not and if that importmap is inline or specified with an src\n    // so we should test if browser support local and remote importmap.\n    // But there exploring server can inline importmap by transforming html\n    // and in that case we can test only the local importmap support\n    // so we test importmap support and the remote one\n    remote: !inlineImportMapIntoHTML,\n  })\n  featuresReport.importmapSupported = importmapSupported\n  if (!importmapSupported && failFastOnFeatureDetection) {\n    return featuresReport\n  }\n\n  const dynamicImportSupported = await supportsDynamicImport()\n  featuresReport.dynamicImportSupported = dynamicImportSupported\n  if (!dynamicImportSupported && failFastOnFeatureDetection) {\n    return featuresReport\n  }\n\n  const topLevelAwaitSupported = await supportsTopLevelAwait()\n  featuresReport.topLevelAwaitSupported = topLevelAwaitSupported\n  return featuresReport\n}\n\nconst babelPluginRequiredNamesFromGroupInfo = (\n  groupInfo,\n  { coverageInstrumentationRequired },\n) => {\n  const { babelPluginRequiredNameArray } = groupInfo\n\n  const babelPluginRequiredNames = babelPluginRequiredNameArray.slice()\n\n  // When instrumentation CAN be handed by playwright\n  // https://playwright.dev/docs/api/class-chromiumcoverage#chromiumcoveragestartjscoverageoptions\n  // coverageInstrumentationRequired is false and \"transform-instrument\" becomes non mandatory\n  const transformInstrumentIndex = babelPluginRequiredNames.indexOf(\n    \"transform-instrument\",\n  )\n  if (transformInstrumentIndex > -1 && !coverageInstrumentationRequired) {\n    babelPluginRequiredNames.splice(transformInstrumentIndex, 1)\n  }\n\n  return babelPluginRequiredNames\n}\n\nconst supportsImportmap = async ({ remote = true } = {}) => {\n  const specifier = jsToTextUrl(`export default false`)\n\n  const importMap = {\n    imports: {\n      [specifier]: jsToTextUrl(`export default true`),\n    },\n  }\n\n  const importmapScript = document.createElement(\"script\")\n  const importmapString = JSON.stringify(importMap, null, \"  \")\n  importmapScript.type = \"importmap\"\n  if (remote) {\n    importmapScript.src = `data:application/json;base64,${window.btoa(\n      importmapString,\n    )}`\n  } else {\n    importmapScript.textContent = importmapString\n  }\n\n  document.body.appendChild(importmapScript)\n\n  const scriptModule = document.createElement(\"script\")\n  scriptModule.type = \"module\"\n  scriptModule.src = jsToTextUrl(\n    `import supported from \"${specifier}\"; window.__importmap_supported = supported`,\n  )\n\n  return new Promise((resolve, reject) => {\n    scriptModule.onload = () => {\n      const supported = window.__importmap_supported\n      delete window.__importmap_supported\n      document.body.removeChild(scriptModule)\n      document.body.removeChild(importmapScript)\n      resolve(supported)\n    }\n    scriptModule.onerror = () => {\n      document.body.removeChild(scriptModule)\n      document.body.removeChild(importmapScript)\n      reject()\n    }\n    document.body.appendChild(scriptModule)\n  })\n}\n\nconst jsToTextUrl = (js) => {\n  return `data:text/javascript;base64,${window.btoa(js)}`\n}\n\nconst supportsDynamicImport = async () => {\n  const moduleSource = jsToTextUrl(`export default 42`)\n  try {\n    const namespace = await import(moduleSource)\n    return namespace.default === 42\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsTopLevelAwait = async () => {\n  const moduleSource = jsToTextUrl(`export default await Promise.resolve(42)`)\n  try {\n    const namespace = await import(moduleSource)\n    return namespace.default === 42\n  } catch (e) {\n    return false\n  }\n}\n",
    "import { scanBrowserRuntimeFeatures } from \"../../runtime/createBrowserRuntime/scanBrowserRuntimeFeatures.js\"\nimport { removeForceHideElement } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\n\nexport const renderCompilationInToolbar = ({ compileGroup }) => {\n  const browserSupportRootNode = document.querySelector(\"#browser_support\")\n  const filesCompilationRootNode = document.querySelector(\"#files_compilation\")\n\n  removeForceHideElement(browserSupportRootNode)\n  removeForceHideElement(filesCompilationRootNode)\n\n  scanBrowserRuntimeFeatures().then(\n    ({\n      featuresReport,\n      canAvoidCompilation,\n      inlineImportMapIntoHTML,\n      outDirectoryRelativeUrl,\n      compileId,\n    }) => {\n      const browserSupport = canAvoidCompilation\n        ? inlineImportMapIntoHTML\n          ? \"partial\"\n          : \"full\"\n        : \"no\"\n      enableVariant(browserSupportRootNode, {\n        browserSupport,\n      })\n      if (browserSupport === \"no\") {\n        browserSupportRootNode.querySelector(\n          `a.browser_support_read_more_link`,\n        ).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files needs to be compiled to be executable in this browser because: ${getBrowserSupportMessage(\n              {\n                missingOnly: true,\n                featuresReport,\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      } else if (browserSupport === \"partial\") {\n        browserSupportRootNode.querySelector(\n          `a.browser_support_read_more_link`,\n        ).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files (except html) can be executed directly in this browser because: ${getBrowserSupportMessage(\n              {\n                featuresReport,\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      } else if (browserSupport === \"full\") {\n        browserSupportRootNode.querySelector(\n          `a.browser_support_read_more_link`,\n        ).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files can be executed directly in this browser because: ${getBrowserSupportMessage(\n              {\n                featuresReport,\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      }\n\n      const filesCompilation = compileGroup.compileId\n        ? \"yes\"\n        : inlineImportMapIntoHTML\n        ? \"html_only\"\n        : \"no\"\n      enableVariant(filesCompilationRootNode, {\n        filesCompilation,\n        compiled: compileGroup.compileId ? \"yes\" : \"no\",\n      })\n      filesCompilationRootNode.querySelector(\"a.go_to_source_link\").onclick =\n        () => {\n          window.parent.location = `/${compileGroup.fileRelativeUrl}`\n        }\n      filesCompilationRootNode.querySelector(\"a.go_to_compiled_link\").onclick =\n        () => {\n          window.parent.location = `/${outDirectoryRelativeUrl}${compileId}/${compileGroup.fileRelativeUrl}`\n        }\n\n      const shouldCompile =\n        filesCompilation !== \"yes\" && browserSupport === \"no\"\n\n      if (shouldCompile) {\n        document\n          .querySelector(\".files_compilation_text\")\n          .setAttribute(\"data-warning\", \"\")\n        document\n          .querySelector(\".browser_support_text\")\n          .setAttribute(\"data-warning\", \"\")\n        document\n          .querySelector(\"#settings-button\")\n          .setAttribute(\"data-warning\", \"\")\n      } else {\n        document\n          .querySelector(\".files_compilation_text\")\n          .removeAttribute(\"data-warning\")\n        document\n          .querySelector(\".browser_support_text\")\n          .removeAttribute(\"data-warning\")\n        document\n          .querySelector(\"#settings-button\")\n          .removeAttribute(\"data-warning\")\n      }\n    },\n  )\n}\n\nconst getBrowserSupportMessage = ({\n  missingOnly,\n  featuresReport,\n  inlineImportMapIntoHTML,\n}) => {\n  const parts = []\n\n  const { importmapSupported } = featuresReport\n  if (importmapSupported) {\n    if (!missingOnly) {\n      if (inlineImportMapIntoHTML) {\n        parts.push(`importmaps are supported (only when inlined in html files)`)\n      } else {\n        parts.push(`importmaps are supported`)\n      }\n    }\n  } else {\n    parts.push(`importmaps are not supported`)\n  }\n\n  const { dynamicImportSupported } = featuresReport\n  if (dynamicImportSupported) {\n    if (!missingOnly) {\n      parts.push(`dynamic imports are supported`)\n    }\n  } else {\n    parts.push(`dynamic imports are not supported`)\n  }\n\n  const { topLevelAwaitSupported } = featuresReport\n  if (topLevelAwaitSupported) {\n    if (!missingOnly) {\n      parts.push(`top level await is supported`)\n    }\n  } else {\n    parts.push(`top level await is not supported`)\n  }\n\n  const { babelPluginRequiredNames } = featuresReport\n  const babelPluginRequiredCount = babelPluginRequiredNames.length\n  if (babelPluginRequiredCount === 0) {\n    if (!missingOnly) {\n      parts.push(`all babel plugins are natively supported`)\n    }\n  } else {\n    parts.push(\n      `${babelPluginRequiredCount} babel plugins are mandatory: ${babelPluginRequiredNames}`,\n    )\n  }\n\n  const { customCompilerPatterns } = featuresReport\n  const customCompilerCount = customCompilerPatterns.length\n  if (customCompilerCount === 0) {\n    // no need to talk about something unused\n  } else {\n    parts.push(\n      `${customCompilerCount} custom compilers enabled: ${customCompilerPatterns}`,\n    )\n  }\n\n  const { jsenvPluginRequiredNames } = featuresReport\n  const jsenvPluginRequiredCount = jsenvPluginRequiredNames.length\n  if (jsenvPluginRequiredCount === 0) {\n    // no need to talk about something unused\n  } else {\n    parts.push(\n      `${jsenvPluginRequiredCount} jsenv plugins are mandatory: ${jsenvPluginRequiredNames}`,\n    )\n  }\n\n  return `\n- ${parts.join(`\n- `)}`\n}\n",
    "export const createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = res\n    reject = rej\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\nexport const moveElement = (element, from, to) => {\n  to.appendChild(element)\n}\n\nexport const replaceElement = (elementToReplace, otherElement) => {\n  elementToReplace.parentNode.replaceChild(otherElement, elementToReplace)\n}\n",
    "export const connectEventSource = (\n  eventSourceUrl,\n  events = {},\n  {\n    connecting = () => {},\n    connected = () => {},\n    cancelled = () => {},\n    failed = () => {},\n    retryMaxAttempt = Infinity,\n    retryAllocatedMs = Infinity,\n    lastEventId,\n  } = {},\n) => {\n  const { EventSource } = window\n  if (typeof EventSource !== \"function\") {\n    return () => {}\n  }\n\n  const eventSourceOrigin = new URL(eventSourceUrl).origin\n\n  // will be either abort, disconnect or a third function calling cancelled\n  // depending on connectionStatus\n  let cancelCurrentConnection = () => {}\n\n  const reconnect = () => {\n    attemptConnection(\n      lastEventId\n        ? addLastEventIdIntoUrlSearchParams(eventSourceUrl, lastEventId)\n        : eventSourceUrl,\n    )\n  }\n\n  const attemptConnection = (url) => {\n    const eventSource = new EventSource(url, {\n      withCredentials: true,\n    })\n\n    let connectionStatus = \"connecting\"\n    const abort = () => {\n      if (connectionStatus !== \"connecting\") {\n        console.warn(`abort ignored because connection is ${connectionStatus}`)\n        return\n      }\n      connectionStatus = \"aborted\"\n      eventSource.onerror = undefined\n      eventSource.close()\n      cancelled({ connect: reconnect })\n    }\n    cancelCurrentConnection = abort\n    connecting({ cancel: abort })\n\n    eventSource.onopen = () => {\n      connectionStatus = \"connected\"\n      const disconnect = () => {\n        if (connectionStatus !== \"connected\") {\n          console.warn(\n            `disconnect ignored because connection is ${connectionStatus}`,\n          )\n          return\n        }\n        connectionStatus = \"disconnected\"\n        eventSource.onerror = undefined\n        eventSource.close()\n        cancelled({ connect: reconnect })\n      }\n      cancelCurrentConnection = disconnect\n      connected({ cancel: disconnect })\n    }\n\n    let retryCount = 0\n    let firstRetryMs = Date.now()\n\n    eventSource.onerror = (errorEvent) => {\n      const considerFailed = () => {\n        connectionStatus = \"disconnected\"\n        failed({\n          cancel: () => {\n            if (connectionStatus !== \"failed\") {\n              console.warn(\n                `disable ignored because connection is ${connectionStatus}`,\n              )\n              return\n            }\n            connectionStatus = \"disabled\"\n            cancelled({ connect: reconnect })\n          },\n          connect: reconnect,\n        })\n      }\n\n      if (errorEvent.target.readyState === EventSource.CONNECTING) {\n        if (retryCount > retryMaxAttempt) {\n          console.info(`could not connect after ${retryMaxAttempt} attempt`)\n          eventSource.onerror = undefined\n          eventSource.close()\n          considerFailed()\n          return\n        }\n\n        if (retryCount === 0) {\n          firstRetryMs = Date.now()\n        } else {\n          const allRetryDuration = Date.now() - firstRetryMs\n          if (retryAllocatedMs && allRetryDuration > retryAllocatedMs) {\n            console.info(\n              `could not connect in less than ${retryAllocatedMs} ms`,\n            )\n            eventSource.onerror = undefined\n            eventSource.close()\n            considerFailed()\n            return\n          }\n        }\n\n        connectionStatus = \"connecting\"\n        retryCount++\n        connecting({ cancel: abort })\n        return\n      }\n\n      if (errorEvent.target.readyState === EventSource.CLOSED) {\n        considerFailed()\n        return\n      }\n    }\n    Object.keys(events).forEach((eventName) => {\n      eventSource.addEventListener(eventName, (e) => {\n        if (e.origin === eventSourceOrigin) {\n          if (e.lastEventId) {\n            lastEventId = e.lastEventId\n          }\n          events[eventName](e)\n        }\n      })\n    })\n    if (!events.hasOwnProperty(\"welcome\")) {\n      eventSource.addEventListener(\"welcome\", (e) => {\n        if (e.origin === eventSourceOrigin && e.lastEventId) {\n          lastEventId = e.lastEventId\n        }\n      })\n    }\n  }\n\n  attemptConnection(eventSourceUrl)\n  const disconnect = () => {\n    cancelCurrentConnection()\n  }\n\n  const removePageUnloadListener = listenPageUnload(() => {\n    disconnect()\n  })\n\n  return () => {\n    removePageUnloadListener()\n    disconnect()\n  }\n}\n\nconst addLastEventIdIntoUrlSearchParams = (url, lastEventId) => {\n  if (url.indexOf(\"?\") === -1) {\n    url += \"?\"\n  } else {\n    url += \"&\"\n  }\n  return `${url}last-event-id=${encodeURIComponent(lastEventId)}`\n}\n\n// const listenPageMightFreeze = (callback) => {\n//   const removePageHideListener = listenEvent(window, \"pagehide\", (pageHideEvent) => {\n//     if (pageHideEvent.persisted === true) {\n//       callback(pageHideEvent)\n//     }\n//   })\n//   return removePageHideListener\n// }\n\n// const listenPageFreeze = (callback) => {\n//   const removeFreezeListener = listenEvent(document, \"freeze\", (freezeEvent) => {\n//     callback(freezeEvent)\n//   })\n//   return removeFreezeListener\n// }\n\n// const listenPageIsRestored = (callback) => {\n//   const removeResumeListener = listenEvent(document, \"resume\", (resumeEvent) => {\n//     removePageshowListener()\n//     callback(resumeEvent)\n//   })\n//   const removePageshowListener = listenEvent(window, \"pageshow\", (pageshowEvent) => {\n//     if (pageshowEvent.persisted === true) {\n//       removePageshowListener()\n//       removeResumeListener()\n//       callback(pageshowEvent)\n//     }\n//   })\n//   return () => {\n//     removeResumeListener()\n//     removePageshowListener()\n//   }\n// }\n\nconst listenPageUnload = (callback) => {\n  const removePageHideListener = listenEvent(\n    window,\n    \"pagehide\",\n    (pageHideEvent) => {\n      if (pageHideEvent.persisted !== true) {\n        callback(pageHideEvent)\n      }\n    },\n  )\n  return removePageHideListener\n}\n\nconst listenEvent = (emitter, event, callback) => {\n  emitter.addEventListener(event, callback)\n  return () => {\n    emitter.removeEventListener(event, callback)\n  }\n}\n",
    "import { connectEventSource } from \"./connectEventSource.js\"\nimport { jsenvLogger } from \"../util/jsenvLogger.js\"\n\nexport const connectCompileServerEventSource = (\n  fileRelativeUrl,\n  {\n    onFileModified,\n    onFileRemoved,\n    onConnecting,\n    onConnectionCancelled,\n    onConnectionFailed,\n    onConnected,\n    lastEventId,\n  },\n) => {\n  const eventSourceUrl = `${window.origin}/${fileRelativeUrl}`\n\n  let cancel = () => {}\n\n  const connect = () => {\n    return new Promise((resolve) => {\n      cancel = connectEventSource(\n        eventSourceUrl,\n        {\n          \"file-modified\": ({ data }) => {\n            jsenvLogger.debug(`${data} modified`)\n            onFileModified(data)\n          },\n          \"file-removed\": ({ data }) => {\n            jsenvLogger.debug(`${data} removed`)\n            onFileRemoved(data)\n          },\n        },\n        {\n          connecting: ({ cancel }) => {\n            jsenvLogger.debug(`connecting to ${eventSourceUrl}`)\n            onConnecting({\n              cancel: () => {\n                cancel()\n              },\n            })\n          },\n          connected: ({ cancel }) => {\n            jsenvLogger.debug(`connected to ${eventSourceUrl}`)\n            resolve(true)\n            onConnected({\n              cancel: () => {\n                cancel()\n              },\n            })\n          },\n          cancelled: ({ connect }) => {\n            jsenvLogger.debug(`disconnected from ${eventSourceUrl}`)\n            resolve(false)\n            onConnectionCancelled({ connect })\n          },\n          failed: ({ connect }) => {\n            jsenvLogger.debug(`disconnected from ${eventSourceUrl}`)\n            resolve(false)\n            onConnectionFailed({ connect })\n          },\n          retryMaxAttempt: Infinity,\n          retryAllocatedMs: 20 * 1000,\n          lastEventId,\n        },\n      )\n    })\n  }\n\n  return {\n    connect,\n    disconnect: () => cancel(),\n  }\n}\n",
    "import { removeForceHideElement } from \"../util/dom.js\"\nimport { createPromiseAndHooks } from \"../util/util.js\"\nimport { createPreference } from \"../util/preferences.js\"\nimport { enableVariant } from \"../variant/variant.js\"\n\nimport {\n  toggleTooltip,\n  removeAutoShowTooltip,\n  autoShowTooltip,\n} from \"../tooltip/tooltip.js\"\nimport { connectCompileServerEventSource } from \"./connectCompileServerEventSource.js\"\n\nconst livereloadingPreference = createPreference(\"livereloading\")\nlet eventSourceState = \"default\"\nlet livereloadingAvailableOnServer = false\n\nexport const initToolbarEventSource = ({\n  executedFileRelativeUrl,\n  livereloading,\n}) => {\n  removeForceHideElement(document.querySelector(\"#eventsource-indicator\"))\n  connectEventSource(executedFileRelativeUrl)\n  livereloadingAvailableOnServer = livereloading\n  if (!livereloadingAvailableOnServer) {\n    disableLivereloadSetting()\n  }\n\n  const livereloadCheckbox = document.querySelector(\"#toggle-livereload\")\n  livereloadCheckbox.checked = shouldLivereload()\n  livereloadCheckbox.onchange = () => {\n    livereloadingPreference.set(livereloadCheckbox.checked)\n    updateEventSourceIndicator()\n  }\n  updateEventSourceIndicator()\n}\n\nconst shouldLivereload = () => {\n  return livereloadingAvailableOnServer && getLivereloadingPreference()\n}\n\nconst disableLivereloadSetting = () => {\n  document\n    .querySelector(\".settings-livereload\")\n    .setAttribute(\"data-disabled\", \"true\")\n  document\n    .querySelector(\".settings-livereload\")\n    .setAttribute(\"title\", `Livereload not available: disabled by server`)\n  document.querySelector(\"#toggle-livereload\").disabled = true\n}\n\nconst parentEventSource = window.parent.__jsenv_eventsource__()\nconst latestChangeMap = parentEventSource.latestChangeMap\nlet eventSourceHooks = {}\nlet eventSourceConnection\nlet connectionReadyPromise\n\nconst handleFileChange = (file, type) => {\n  latestChangeMap[file] = type\n  updateEventSourceIndicator()\n  if (shouldLivereload()) {\n    if (\n      file.endsWith(\".css\") ||\n      file.endsWith(\".scss\") ||\n      file.endsWith(\".sass\")\n    ) {\n      reloadAllCss()\n      delete latestChangeMap[file]\n      updateEventSourceIndicator()\n    } else {\n      reloadPage()\n    }\n  }\n}\n\nconst reloadAllCss = () => {\n  const links = Array.from(window.parent.document.getElementsByTagName(\"link\"))\n  links.forEach((link) => {\n    if (link.rel === \"stylesheet\") {\n      const url = new URL(link.href)\n      url.searchParams.set(\"t\", Date.now())\n      link.href = String(url)\n    }\n  })\n}\n\nconst reloadPage = () => {\n  window.parent.location.reload(true)\n}\n\nconst reloadChanges = () => {\n  const fullReloadRequired = Object.keys(latestChangeMap).some(\n    (key) => !key.endsWith(\".css\"),\n  )\n  if (fullReloadRequired) {\n    reloadPage()\n    return\n  }\n  const cssReloadRequired = Object.keys(latestChangeMap).some((key) =>\n    key.endsWith(\".css\"),\n  )\n  if (cssReloadRequired) {\n    reloadAllCss()\n    Object.keys(latestChangeMap).forEach((key) => {\n      if (key.endsWith(\".css\")) {\n        delete latestChangeMap[key]\n      }\n      updateEventSourceIndicator()\n    })\n  }\n}\n\nconst connectEventSource = (executedFileRelativeUrl) => {\n  updateEventSourceIndicator()\n  connectionReadyPromise = createPromiseAndHooks()\n\n  eventSourceConnection = connectCompileServerEventSource(\n    executedFileRelativeUrl,\n    {\n      onFileModified: (file) => {\n        handleFileChange(file, \"modified\")\n      },\n      onFileRemoved: (file) => {\n        handleFileChange(file, \"removed\")\n      },\n      onFileAdded: (file) => {\n        handleFileChange(file, \"added\")\n      },\n      onConnecting: ({ cancel }) => {\n        eventSourceState = \"connecting\"\n        eventSourceHooks = { abort: cancel }\n        updateEventSourceIndicator()\n      },\n      onConnectionCancelled: ({ connect }) => {\n        eventSourceState = \"disabled\"\n        eventSourceHooks = { connect }\n        updateEventSourceIndicator()\n      },\n      onConnectionFailed: ({ connect }) => {\n        eventSourceState = \"failed\"\n        eventSourceHooks = { reconnect: connect }\n        updateEventSourceIndicator()\n      },\n      onConnected: ({ cancel }) => {\n        eventSourceState = \"connected\"\n        eventSourceHooks = { disconnect: cancel }\n        updateEventSourceIndicator()\n        connectionReadyPromise.resolve()\n        parentEventSource.disconnect()\n      },\n      lastEventId: parentEventSource.lastEventId,\n    },\n  )\n\n  eventSourceConnection.connect()\n}\n\nconst getLivereloadingPreference = () => {\n  return livereloadingPreference.has() ? livereloadingPreference.get() : true\n}\n\nexport const disconnectEventSource = () => {\n  if (eventSourceConnection) {\n    eventSourceConnection.disconnect()\n    eventSourceConnection = undefined\n  }\n}\n\nexport const waitEventSourceReady = () => connectionReadyPromise\n\nconst updateEventSourceIndicator = () => {\n  const { connect, abort, reconnect } = eventSourceHooks\n\n  const eventSourceIndicator = document.querySelector(\"#eventsource-indicator\")\n  const changeCount = Object.keys(latestChangeMap).length\n  enableVariant(eventSourceIndicator, {\n    eventsource: eventSourceState,\n    livereload: shouldLivereload() ? \"on\" : \"off\",\n    changes: changeCount > 0 ? \"yes\" : \"no\",\n  })\n\n  const variantNode = document.querySelector(\n    \"#eventsource-indicator > [data-when-active]\",\n  )\n  variantNode.querySelector(\"button\").onclick = () => {\n    toggleTooltip(eventSourceIndicator)\n  }\n\n  if (eventSourceState === \"disabled\") {\n    variantNode.querySelector(\"a\").onclick = connect\n  } else if (eventSourceState === \"connecting\") {\n    variantNode.querySelector(\"a\").onclick = abort\n  } else if (eventSourceState === \"connected\") {\n    removeAutoShowTooltip(eventSourceIndicator)\n    if (changeCount) {\n      const changeLink = variantNode.querySelector(\".eventsource-changes-link\")\n      changeLink.innerHTML = changeCount\n      changeLink.onclick = () => {\n        console.log(\n          JSON.stringify(latestChangeMap, null, \"  \"),\n          latestChangeMap,\n        )\n        // eslint-disable-next-line no-alert\n        window.parent.alert(JSON.stringify(latestChangeMap, null, \"  \"))\n      }\n      variantNode.querySelector(\".eventsource-reload-link\").onclick =\n        reloadChanges\n    }\n  } else if (eventSourceState === \"failed\") {\n    autoShowTooltip(eventSourceIndicator)\n    variantNode.querySelector(\"a\").onclick = reconnect\n  }\n}\n",
    "import {\n  forceHideElement,\n  removeForceHideElement,\n  deactivateToolbarSection,\n} from \"../util/dom.js\"\nimport { createHorizontalBreakpoint } from \"../util/responsive.js\"\nimport { hideTooltip } from \"../tooltip/tooltip.js\"\n\nconst WINDOW_SMALL_WIDTH = 420\n\nexport const makeToolbarResponsive = () => {\n  // apply responsive design on toolbar icons if needed + add listener on resize screen\n  // ideally we should listen breakpoint once, for now restore toolbar\n  const overflowMenuBreakpoint = createHorizontalBreakpoint(WINDOW_SMALL_WIDTH)\n  const handleOverflowMenuBreakpoint = () => {\n    responsiveToolbar(overflowMenuBreakpoint)\n  }\n  handleOverflowMenuBreakpoint()\n  overflowMenuBreakpoint.changed.listen(handleOverflowMenuBreakpoint)\n\n  // overflow menu\n  document.querySelector(\"#overflow-menu-button\").onclick = () =>\n    toggleOverflowMenu()\n}\n\nconst responsiveToolbar = (overflowMenuBreakpoint) => {\n  // close all tooltips in case opened\n  hideTooltip(document.querySelector(\"#eventsource-indicator\"))\n  hideTooltip(document.querySelector(\"#execution-indicator\"))\n  // close settings box in case opened\n  deactivateToolbarSection(document.querySelector(\"#settings\"))\n\n  if (overflowMenuBreakpoint.isBelow()) {\n    enableOverflow()\n  } else {\n    disableOverflow()\n  }\n}\n\nlet moves = []\n\nconst enableOverflow = () => {\n  // move elements from toolbar to overflow menu\n  const responsiveToolbarElements = document.querySelectorAll(\n    \"[data-responsive-toolbar-element]\",\n  )\n  const overflowMenu = document.querySelector(\"#overflow-menu\")\n\n  // keep a placeholder element to know where to move them back\n  moves = Array.from(responsiveToolbarElements).map((element) => {\n    const placeholder = document.createElement(\"div\")\n    placeholder.style.display = \"none\"\n    placeholder.setAttribute(\"data-placeholder\", \"\")\n    element.parentNode.replaceChild(placeholder, element)\n    overflowMenu.appendChild(element)\n    return { element, placeholder }\n  })\n\n  document\n    .querySelector(\"#toolbar\")\n    .setAttribute(\"data-overflow-menu-enabled\", \"\")\n  removeForceHideElement(document.querySelector(\"#overflow-menu-button\"))\n}\n\nconst disableOverflow = () => {\n  // close overflow menu in case it's open & unselect toggleOverflowMenu button in case it's selected\n  hideOverflowMenu()\n  deactivateToolbarSection(document.querySelector(\"#overflow-menu\"))\n  moves.forEach(({ element, placeholder }) => {\n    placeholder.parentNode.replaceChild(element, placeholder)\n  })\n  moves = []\n\n  document\n    .querySelector(\"#toolbar\")\n    .removeAttribute(\"data-overflow-menu-enabled\")\n  forceHideElement(document.querySelector(\"#overflow-menu-button\"))\n}\n\nconst toggleOverflowMenu = () => {\n  if (overflowMenuIsVisible()) {\n    hideOverflowMenu()\n  } else {\n    showOverflowMenu()\n  }\n}\n\nconst overflowMenuIsVisible = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  return toolbar.hasAttribute(\"data-overflow-menu-visible\")\n}\n\nconst showOverflowMenu = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  document.querySelector(\"#overflow-menu\").setAttribute(\"data-animate\", \"\")\n  toolbar.setAttribute(\"data-overflow-menu-visible\", \"\")\n}\n\nconst hideOverflowMenu = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  toolbar.removeAttribute(\"data-overflow-menu-visible\")\n  document.querySelector(\"#overflow-menu\").removeAttribute(\"data-animate\")\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport { urlIsInsideOf } from \"@jsenv/filesystem/src/urlIsInsideOf.js\"\nimport { urlToRelativeUrl } from \"@jsenv/filesystem/src/urlToRelativeUrl.js\"\n\nimport { fetchExploringJson } from \"../exploring/fetchExploringJson.js\"\nimport { startJavaScriptAnimation } from \"../toolbar/util/animation.js\"\nimport \"./focus/toolbar.focus.js\"\nimport { renderBackToListInToolbar } from \"./backtolist/toolbar.backtolist.js\"\nimport {\n  getToolbarIframe,\n  deactivateToolbarSection,\n  setStyles,\n} from \"./util/dom.js\"\nimport { createPreference } from \"./util/preferences.js\"\nimport { hideTooltip, hideAllTooltip } from \"./tooltip/tooltip.js\"\nimport {\n  renderToolbarSettings,\n  hideSettings,\n} from \"./settings/toolbar.settings.js\"\nimport { renderToolbarNotification } from \"./notification/toolbar.notification.js\"\nimport { renderToolbarTheme } from \"./theme/toolbar.theme.js\"\nimport { renderToolbarAnimation } from \"./animation/toolbar.animation.js\"\nimport { renderExecutionInToolbar } from \"./execution/toolbar.execution.js\"\nimport { renderCompilationInToolbar } from \"./compilation/toolbar.compilation.js\"\nimport { initToolbarEventSource } from \"./eventsource/toolbar.eventsource.js\"\nimport { makeToolbarResponsive } from \"./responsive/toolbar.responsive.js\"\n\nconst toolbarVisibilityPreference = createPreference(\"toolbar\")\n\nconst renderToolbar = async () => {\n  const executedFileCompiledUrl = window.parent.location.href\n  const compileServerOrigin = window.parent.location.origin\n  // this should not block the whole toolbar rendering + interactivity\n  const exploringConfig = await fetchExploringJson()\n  const { outDirectoryRelativeUrl, livereloading } = exploringConfig\n  const compileGroup = getCompileGroup({\n    executedFileCompiledUrl,\n    outDirectoryRelativeUrl,\n    compileServerOrigin,\n  })\n  const executedFileRelativeUrl = compileGroup.fileRelativeUrl\n\n  const toolbarOverlay = document.querySelector(\"#toolbar-overlay\")\n  toolbarOverlay.onclick = () => {\n    hideAllTooltip()\n    hideSettings()\n  }\n\n  const toolbarElement = document.querySelector(\"#toolbar\")\n  exposeOnParentWindow({\n    toolbar: {\n      element: toolbarElement,\n      show: showToolbar,\n      hide: () => hideToolbar(),\n      toggle: toogleToolbar,\n    },\n  })\n\n  const toolbarVisible = toolbarVisibilityPreference.has()\n    ? toolbarVisibilityPreference.get()\n    : true\n\n  if (toolbarVisible) {\n    showToolbar({ animate: false })\n  } else {\n    hideToolbar({ animate: false })\n  }\n\n  renderBackToListInToolbar({\n    outDirectoryRelativeUrl,\n    exploringHtmlFileRelativeUrl: exploringConfig.exploringHtmlFileRelativeUrl,\n  })\n\n  renderToolbarNotification()\n  makeToolbarResponsive()\n  renderToolbarSettings()\n  renderToolbarAnimation()\n  renderToolbarTheme()\n  renderExecutionInToolbar({ executedFileRelativeUrl })\n  renderCompilationInToolbar({ compileGroup })\n  // this might become active but we need to detect this somehow\n  deactivateToolbarSection(document.querySelector(\"#file-list-link\"))\n  initToolbarEventSource({ executedFileRelativeUrl, livereloading })\n\n  // if user click enter or space quickly while closing toolbar\n  // it will cancel the closing\n  // that's why I used toggleToolbar and not hideToolbar\n  document.querySelector(\"#button-close-toolbar\").onclick = () =>\n    toogleToolbar()\n}\n\nconst exposeOnParentWindow = (object) => {\n  let { __jsenv__ } = window.parent\n  if (!__jsenv__) {\n    __jsenv__ = {}\n    window.parent.__jsenv__ = {}\n  }\n\n  Object.assign(__jsenv__, object)\n}\n\nconst toogleToolbar = () => {\n  if (toolbarIsVisible()) {\n    hideToolbar()\n  } else {\n    showToolbar()\n  }\n}\n\nconst toolbarIsVisible = () =>\n  document.documentElement.hasAttribute(\"data-toolbar-visible\")\n\nlet hideToolbar = () => {\n  // toolbar hidden by default, nothing to do to hide it by default\n  sendEventToParent(\"toolbar-visibility-change\", false)\n}\n\n// (by the way it might be cool to have the toolbar auto show when)\n// it has something to say (being disconnected from livereload server)\nconst showToolbar = ({ animate = true } = {}) => {\n  toolbarVisibilityPreference.set(true)\n  if (animate) {\n    document.documentElement.setAttribute(\"data-toolbar-animation\", \"\")\n  } else {\n    document.documentElement.removeAttribute(\"data-toolbar-animation\")\n  }\n  document.documentElement.setAttribute(\"data-toolbar-visible\", \"\")\n\n  sendEventToParent(\"toolbar-visibility-change\", true)\n\n  const toolbarIframe = getToolbarIframe()\n  const toolbarIframeParent = toolbarIframe.parentNode\n  const parentWindow = window.parent\n  const parentDocumentElement =\n    parentWindow.document.compatMode === \"CSS1Compat\"\n      ? parentWindow.document.documentElement\n      : parentWindow.document.body\n\n  const scrollYMax =\n    parentDocumentElement.scrollHeight - parentWindow.innerHeight\n  const scrollY = parentDocumentElement.scrollTop\n  const scrollYRemaining = scrollYMax - scrollY\n\n  setStyles(toolbarIframeParent, {\n    \"transition-property\": \"padding-bottom\",\n    \"transition-duration\": \"300ms\",\n  })\n  // maybe we should use js animation here because we would not conflict with css\n  const restoreToolbarIframeParentStyles = setStyles(toolbarIframeParent, {\n    \"scroll-padding-bottom\": \"40px\", // same here we should add 40px\n    \"padding-bottom\": \"40px\", // if there is already one we should add 40px\n  })\n  const restoreToolbarIframeStyles = setStyles(toolbarIframe, {\n    height: \"40px\",\n    visibility: \"visible\",\n  })\n\n  if (scrollYRemaining < 40 && scrollYMax > 0) {\n    const scrollEnd = scrollY + 40\n    startJavaScriptAnimation({\n      duration: 300,\n      onProgress: ({ progress }) => {\n        const value = scrollY + (scrollEnd - scrollY) * progress\n        parentDocumentElement.scrollTop = value\n      },\n    })\n  }\n\n  hideToolbar = () => {\n    restoreToolbarIframeParentStyles()\n    restoreToolbarIframeStyles()\n\n    hideTooltip(document.querySelector(\"#eventsource-indicator\"))\n    hideTooltip(document.querySelector(\"#execution-indicator\"))\n    toolbarVisibilityPreference.set(false)\n    if (animate) {\n      document.documentElement.setAttribute(\"data-toolbar-animation\", \"\")\n    } else {\n      document.documentElement.removeAttribute(\"data-toolbar-animation\")\n    }\n    document.documentElement.removeAttribute(\"data-toolbar-visible\")\n    sendEventToParent(\"toolbar-visibility-change\", false)\n  }\n}\n\nconst getCompileGroup = ({\n  executedFileCompiledUrl,\n  outDirectoryRelativeUrl,\n  compileServerOrigin,\n}) => {\n  const outDirectoryRemoteUrl = String(\n    new URL(outDirectoryRelativeUrl, compileServerOrigin),\n  )\n  if (urlIsInsideOf(executedFileCompiledUrl, outDirectoryRemoteUrl)) {\n    const afterCompileDirectory = urlToRelativeUrl(\n      executedFileCompiledUrl,\n      outDirectoryRemoteUrl,\n    )\n    const slashIndex = afterCompileDirectory.indexOf(\"/\")\n    const fileRelativeUrl = afterCompileDirectory.slice(slashIndex + 1)\n    return {\n      fileRelativeUrl,\n      outDirectoryRelativeUrl,\n      compileId: afterCompileDirectory.slice(0, slashIndex),\n    }\n  }\n  return {\n    fileRelativeUrl: new URL(executedFileCompiledUrl).pathname.slice(1),\n    outDirectoryRelativeUrl,\n    compileId: null,\n  }\n}\n\nconst sendEventToParent = (type, value) => {\n  window.parent.postMessage(\n    {\n      jsenv: true,\n      type,\n      value,\n    },\n    \"*\",\n  )\n}\n\nwindow.renderToolbar = renderToolbar\n"
  ],
  "names": [
    "urlIsInsideOf",
    "url",
    "otherUrl",
    "urlObject",
    "URL",
    "otherUrlObject",
    "origin",
    "urlPathname",
    "pathname",
    "otherUrlPathname",
    "isInside",
    "startsWith",
    "getCommonPathname",
    "otherPathname",
    "firstDifferentCharacterIndex",
    "findFirstDifferentCharacterIndex",
    "commonString",
    "slice",
    "charAt",
    "firstDifferentSlashIndex",
    "lastIndexOf",
    "string",
    "otherString",
    "maxCommonLength",
    "Math",
    "min",
    "length",
    "i",
    "char",
    "otherChar",
    "pathnameToParentPathname",
    "slashLastIndex",
    "urlToRelativeUrl",
    "baseUrl",
    "baseUrlObject",
    "protocol",
    "urlAsString",
    "String",
    "username",
    "password",
    "host",
    "afterUrlScheme",
    "hash",
    "search",
    "baseUrlRessourceWithoutLeadingSlash",
    "basePathname",
    "commonPathname",
    "specificPathname",
    "baseSpecificPathname",
    "includes",
    "baseSpecificParentPathname",
    "relativeDirectoriesNotation",
    "replace",
    "relativeUrl",
    "obj",
    "key",
    "value",
    "Object",
    "defineProperty",
    "enumerable",
    "configurable",
    "writable",
    "createDetailedMessage",
    "message",
    "details",
    "keys",
    "forEach",
    "Array",
    "isArray",
    "join",
    "source",
    "excluded",
    "target",
    "sourceKeys",
    "indexOf",
    "objectWithoutPropertiesLoose",
    "getOwnPropertySymbols",
    "sourceSymbolKeys",
    "prototype",
    "propertyIsEnumerable",
    "call",
    "createCancellationToken",
    "register",
    "callback",
    "Error",
    "unregister",
    "throwIfRequested",
    "undefined",
    "cancellationRequested",
    "nativeTypeOf",
    "customTypeOf",
    "Symbol",
    "constructor",
    "iterator",
    "isCancelError",
    "name",
    "arrayLikeToArray",
    "arr",
    "len",
    "arr2",
    "unsupportedIterableToArray",
    "o",
    "minLen",
    "n",
    "toString",
    "from",
    "test",
    "ownKeys",
    "object",
    "enumerableOnly",
    "symbols",
    "filter",
    "sym",
    "getOwnPropertyDescriptor",
    "push",
    "apply",
    "_objectSpread2",
    "arguments",
    "getOwnPropertyDescriptors",
    "defineProperties",
    "then",
    "direct",
    "Promise",
    "resolve",
    "f",
    "args",
    "e",
    "reject",
    "body",
    "result",
    "fetchUsingXHR",
    "cancellationToken",
    "method",
    "credentials",
    "headers",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "XMLHttpRequest",
    "failure",
    "error",
    "settled",
    "cleanup",
    "ontimeout",
    "onerror",
    "onload",
    "onreadystatechange",
    "createRequestError",
    "cancelError",
    "abort",
    "readyState",
    "open",
    "setRequestHeader",
    "withCredentials",
    "computeWithCredentials",
    "hasBlob",
    "responseType",
    "send",
    "responseUrl",
    "responseURL",
    "responseStatus",
    "status",
    "responseStatusText",
    "statusText",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "response",
    "responseText",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "text",
    "blobToText",
    "arrayBufferToText",
    "buffer",
    "json",
    "JSON",
    "parse",
    "blob",
    "Blob",
    "cloneBuffer",
    "arrayBuffer",
    "blobToArrayBuffer",
    "formData",
    "hasFormData",
    "textToFormData",
    "canUseBlob",
    "window",
    "FileReader",
    "FormData",
    "hasArrayBuffer",
    "ArrayBuffer",
    "hasSearchParams",
    "URLSearchParams",
    "stack",
    "promise",
    "res",
    "rej",
    "originSameAsGlobalOrigin",
    "location",
    "globalOrigin",
    "hrefToOrigin",
    "isPrototypeOf",
    "isDataView",
    "isArrayBufferView",
    "headerMap",
    "headersString",
    "getAllResponseHeaders",
    "lines",
    "trim",
    "split",
    "line",
    "parts",
    "shift",
    "toLowerCase",
    "href",
    "scheme",
    "hrefToScheme",
    "secondProtocolSlashIndex",
    "pathnameSlashIndex",
    "colonIndex",
    "DataView",
    "isView",
    "viewClasses",
    "form",
    "bytes",
    "append",
    "decodeURIComponent",
    "reader",
    "fileReaderReady",
    "readAsArrayBuffer",
    "readAsText",
    "view",
    "Uint8Array",
    "chars",
    "fromCharCode",
    "byteLength",
    "set",
    "_await",
    "fetchNative",
    "mode",
    "options",
    "abortController",
    "AbortController",
    "reason",
    "fetch",
    "signal",
    "responseToHeaders",
    "_catch",
    "recover",
    "fetchUrl",
    "fetchJson",
    "fetchExploringJson",
    "updateIframeOverflowOnParentWindow",
    "aTooltipIsOpened",
    "document",
    "querySelector",
    "settingsAreOpened",
    "enableIframeOverflowOnParentWindow",
    "disableIframeOverflowOnParentWindow",
    "iframeOverflowEnabled",
    "iframe",
    "getToolbarIframe",
    "transitionDuration",
    "style",
    "setStyles",
    "setTimeout",
    "iframes",
    "parent",
    "querySelectorAll",
    "find",
    "contentWindow",
    "forceHideElement",
    "element",
    "setAttribute",
    "removeForceHideElement",
    "removeAttribute",
    "styles",
    "elementStyle",
    "restoreStyles",
    "map",
    "styleName",
    "restore",
    "currentStyle",
    "toolbarSectionIsActive",
    "hasAttribute",
    "activateToolbarSection",
    "deactivateToolbarSection",
    "startJavaScriptAnimation",
    "duration",
    "timingFunction",
    "t",
    "onProgress",
    "onCancel",
    "onComplete",
    "isNaN",
    "parseInt",
    "startMs",
    "performance",
    "now",
    "currentRequestAnimationFrameId",
    "done",
    "rawProgress",
    "progress",
    "handler",
    "nowMs",
    "requestAnimationFrame",
    "stop",
    "cancelAnimationFrame",
    "addEventListener",
    "mousedownEvent",
    "defaultPrevented",
    "documentElement",
    "touchstartEvent",
    "keydownEvent",
    "renderBackToListInToolbar",
    "outDirectoryRelativeUrl",
    "exploringHtmlFileRelativeUrl",
    "exploringHtmlFileUrl",
    "onclick",
    "clickEvent",
    "isClickToOpenTab",
    "button",
    "metaKey",
    "ctrlKey",
    "createPreference",
    "has",
    "localStorage",
    "hasOwnProperty",
    "get",
    "getItem",
    "setItem",
    "stringify",
    "toggleTooltip",
    "hideTooltip",
    "showTooltip",
    "autoShowTooltip",
    "removeAutoShowTooltip",
    "hideAllTooltip",
    "elementsWithTooltip",
    "elementWithTooltip",
    "renderToolbarSettings",
    "toggleSettings",
    "settingsAreVisible",
    "hideSettings",
    "showSettings",
    "_call",
    "notificationPreference",
    "_async",
    "arrayOfOpenedNotifications",
    "renderToolbarNotification",
    "notifCheckbox",
    "checked",
    "getNotificationPreference",
    "onchange",
    "setNotificationPreference",
    "requestPermission",
    "notification",
    "close",
    "notifyExecutionResult",
    "executedFileRelativeUrl",
    "execution",
    "previousExecution",
    "notificationEnabled",
    "notificationOptions",
    "lang",
    "icon",
    "getFaviconHref",
    "clickToFocus",
    "clickToClose",
    "notify",
    "notificationAvailable",
    "Notification",
    "link",
    "title",
    "permission",
    "focus",
    "onclose",
    "index",
    "splice",
    "permissionPromise",
    "DARK_THEME",
    "LIGHT_THEME",
    "themePreference",
    "renderToolbarTheme",
    "theme",
    "getThemePreference",
    "checkbox",
    "setTheme",
    "setThemePreference",
    "animationPreference",
    "renderToolbarAnimation",
    "animCheckbox",
    "getAnimationPreference",
    "setAnimationPreference",
    "onPreferenceChange",
    "enableAnimation",
    "disableAnimation",
    "enableVariant",
    "rootNode",
    "variables",
    "nodesNotMatching",
    "attributeIndicatingACondition",
    "nodeNotMatching",
    "conditionAttributeValue",
    "getAttribute",
    "matches",
    "testCondition",
    "renameAttribute",
    "attributeIndicatingAMatch",
    "nodesMatching",
    "nodeMatching",
    "condition",
    "parseCondition",
    "some",
    "node",
    "newName",
    "createHorizontalBreakpoint",
    "breakpointValue",
    "createBreakpoint",
    "windowWidthMeasure",
    "createMeasure",
    "compute",
    "currentValue",
    "changed",
    "createSignal",
    "previousValue",
    "callbackArray",
    "listen",
    "innerWidth",
    "removeEventListener",
    "measure",
    "getBreakpointState",
    "currentBreakpointState",
    "isAbove",
    "isBelow",
    "breakpointChanged",
    "breakpointState",
    "breakpointStatePrevious",
    "WINDOW_MEDIUM_WIDTH",
    "renderExecutionInToolbar",
    "applyExecutionIndicator",
    "input",
    "fileWidthBreakpoint",
    "handleFileWidthBreakpoint",
    "resizeInput",
    "__jsenv__",
    "executionResultPromise",
    "startTime",
    "endTime",
    "executionStorageKey",
    "sessionStorage",
    "executionIndicator",
    "variantNode",
    "textContent",
    "computeText",
    "size",
    "width",
    "_iterableToArrayLimit",
    "_i",
    "_arr",
    "_n",
    "_d",
    "_s",
    "_e",
    "next",
    "err",
    "TypeError",
    "arrayWithHoles",
    "iterableToArrayLimit",
    "nonIterableRest",
    "COMPILE_ID_OTHERWISE",
    "computeCompileIdFromGroupId",
    "groupId",
    "groupMap",
    "createUnexpectedGroupIdMessage",
    "compileId",
    "firstMatch",
    "regexp",
    "match",
    "secondMatch",
    "userAgentToVersion",
    "userAgent",
    "detectAndroid",
    "navigatorToBrowser",
    "navigator",
    "appVersion",
    "version",
    "detectInternetExplorer",
    "userAgentToBrowser",
    "detectOpera",
    "detectEdge",
    "detectFirefox",
    "detectChrome",
    "detectSafari",
    "detectElectron",
    "detectIOS",
    "detectorCompose",
    "detectors",
    "detector",
    "detectBrowser",
    "normalizeName",
    "normalizeVersion",
    "valueToVersion",
    "numberToVersion",
    "stringToVersion",
    "number",
    "major",
    "minor",
    "patch",
    "Number",
    "versionCompare",
    "versionA",
    "versionB",
    "semanticVersionA",
    "semanticVersionB",
    "majorDiff",
    "minorDiff",
    "patchDiff",
    "versionIsBelow",
    "versionSupposedBelow",
    "versionSupposedAbove",
    "findHighestVersion",
    "values",
    "reduce",
    "highestVersion",
    "resolveGroup",
    "compileIdCandidate",
    "minRuntimeVersions",
    "versionForGroup",
    "resolveBrowserGroup",
    "scanBrowserRuntimeFeatures",
    "coverageInstrumentationRequired",
    "failFastOnFeatureDetection",
    "groupMapUrl",
    "envFileUrl",
    "all",
    "envJson",
    "groupInfo",
    "inlineImportMapIntoHTML",
    "customCompilerPatterns",
    "babelPluginRequiredNamesFromGroupInfo",
    "getFeaturesReport",
    "featuresReport",
    "babelPluginRequiredNames",
    "canAvoidCompilation",
    "jsenvPluginRequiredNames",
    "importmapSupported",
    "dynamicImportSupported",
    "topLevelAwaitSupported",
    "jsenvPluginRequiredNameArray",
    "supportsImportmap",
    "remote",
    "supportsDynamicImport",
    "supportsTopLevelAwait",
    "babelPluginRequiredNameArray",
    "transformInstrumentIndex",
    "specifier",
    "jsToTextUrl",
    "importMap",
    "imports",
    "importmapScript",
    "createElement",
    "importmapString",
    "type",
    "src",
    "btoa",
    "appendChild",
    "scriptModule",
    "supported",
    "__importmap_supported",
    "removeChild",
    "js",
    "moduleSource",
    "namespace",
    "default",
    "renderCompilationInToolbar",
    "compileGroup",
    "browserSupportRootNode",
    "filesCompilationRootNode",
    "browserSupport",
    "alert",
    "getBrowserSupportMessage",
    "missingOnly",
    "filesCompilation",
    "compiled",
    "fileRelativeUrl",
    "shouldCompile",
    "babelPluginRequiredCount",
    "customCompilerCount",
    "jsenvPluginRequiredCount",
    "connectEventSource",
    "eventSourceUrl",
    "events",
    "connecting",
    "connected",
    "cancelled",
    "failed",
    "retryMaxAttempt",
    "Infinity",
    "retryAllocatedMs",
    "lastEventId",
    "EventSource",
    "eventSourceOrigin",
    "cancelCurrentConnection",
    "reconnect",
    "attemptConnection",
    "addLastEventIdIntoUrlSearchParams",
    "eventSource",
    "connectionStatus",
    "console",
    "warn",
    "connect",
    "cancel",
    "onopen",
    "disconnect",
    "retryCount",
    "firstRetryMs",
    "Date",
    "errorEvent",
    "considerFailed",
    "CONNECTING",
    "info",
    "allRetryDuration",
    "CLOSED",
    "eventName",
    "removePageUnloadListener",
    "listenPageUnload",
    "encodeURIComponent",
    "removePageHideListener",
    "listenEvent",
    "pageHideEvent",
    "persisted",
    "emitter",
    "event",
    "connectCompileServerEventSource",
    "onFileModified",
    "onFileRemoved",
    "onConnecting",
    "onConnectionCancelled",
    "onConnectionFailed",
    "onConnected",
    "data",
    "livereloadingPreference",
    "eventSourceState",
    "livereloadingAvailableOnServer",
    "initToolbarEventSource",
    "livereloading",
    "disableLivereloadSetting",
    "livereloadCheckbox",
    "shouldLivereload",
    "updateEventSourceIndicator",
    "getLivereloadingPreference",
    "disabled",
    "parentEventSource",
    "__jsenv_eventsource__",
    "latestChangeMap",
    "eventSourceHooks",
    "eventSourceConnection",
    "connectionReadyPromise",
    "handleFileChange",
    "file",
    "endsWith",
    "reloadAllCss",
    "reloadPage",
    "links",
    "getElementsByTagName",
    "rel",
    "searchParams",
    "reload",
    "reloadChanges",
    "fullReloadRequired",
    "cssReloadRequired",
    "onFileAdded",
    "eventSourceIndicator",
    "changeCount",
    "eventsource",
    "livereload",
    "changes",
    "changeLink",
    "innerHTML",
    "log",
    "WINDOW_SMALL_WIDTH",
    "makeToolbarResponsive",
    "overflowMenuBreakpoint",
    "handleOverflowMenuBreakpoint",
    "responsiveToolbar",
    "toggleOverflowMenu",
    "enableOverflow",
    "disableOverflow",
    "moves",
    "responsiveToolbarElements",
    "overflowMenu",
    "placeholder",
    "display",
    "parentNode",
    "replaceChild",
    "hideOverflowMenu",
    "overflowMenuIsVisible",
    "showOverflowMenu",
    "toolbar",
    "toolbarVisibilityPreference",
    "renderToolbar",
    "executedFileCompiledUrl",
    "compileServerOrigin",
    "exploringConfig",
    "getCompileGroup",
    "toolbarOverlay",
    "toolbarElement",
    "exposeOnParentWindow",
    "show",
    "showToolbar",
    "hide",
    "hideToolbar",
    "toggle",
    "toogleToolbar",
    "toolbarVisible",
    "animate",
    "assign",
    "toolbarIsVisible",
    "sendEventToParent",
    "toolbarIframe",
    "toolbarIframeParent",
    "parentWindow",
    "parentDocumentElement",
    "compatMode",
    "scrollYMax",
    "scrollHeight",
    "innerHeight",
    "scrollY",
    "scrollTop",
    "scrollYRemaining",
    "restoreToolbarIframeParentStyles",
    "restoreToolbarIframeStyles",
    "height",
    "visibility",
    "scrollEnd",
    "outDirectoryRemoteUrl",
    "afterCompileDirectory",
    "slashIndex",
    "postMessage",
    "jsenv"
  ],
  "mappings": "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"
}